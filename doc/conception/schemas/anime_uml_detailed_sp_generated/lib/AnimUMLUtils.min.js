/*! For license information please see AnimUMLUtils.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={666:t=>{!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag",l=e.regeneratorRuntime;if(l)t.exports=l;else{(l=e.regeneratorRuntime=t.exports).wrap=v;var u="suspendedStart",p="suspendedYield",_="executing",d="completed",m={},g={};g[s]=function(){return this};var f=Object.getPrototypeOf,h=f&&f(f(M([])));h&&h!==r&&i.call(h,s)&&(g=h);var y=w.prototype=$.prototype=Object.create(g);E.prototype=y.constructor=w,w.constructor=E,w[c]=E.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(y),t},l.awrap=function(t){return{__await:t}},S(x.prototype),x.prototype[o]=function(){return this},l.AsyncIterator=x,l.async=function(t,e,n,r){var i=new x(v(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(y),y[c]="Generator",y[s]=function(){return this},y.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=M,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return o.type="throw",o.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function v(t,e,n,r){var i=e&&e.prototype instanceof $?e:$,a=Object.create(i.prototype),s=new A(r||[]);return a._invoke=function(t,e,n){var r=u;return function(i,a){if(r===_)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return j()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var o=O(s,n);if(o){if(o===m)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=_;var c=b(t,e,n);if("normal"===c.type){if(r=n.done?d:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}(t,n,s),a}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function $(){}function E(){}function w(){}function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function x(t){function e(n,r,a,s){var o=b(t[n],t,r);if("throw"!==o.type){var c=o.arg,l=c.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,a,s)}),(function(t){e("throw",t,a,s)})):Promise.resolve(l).then((function(t){c.value=t,a(c)}),s)}s(o.arg)}var n;this._invoke=function(t,r){function i(){return new Promise((function(n,i){e(t,r,n,i)}))}return n=n?n.then(i,i):i()}}function O(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,O(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=b(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:j}}function j(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},125:t=>{"use strict";t.exports=globalThis["./pako.min.js"]},582:t=>{"use strict";t.exports=globalThis["./peg-0.10.0.min.js"]},317:t=>{"use strict";t.exports=globalThis.FS},678:t=>{"use strict";t.exports=globalThis.PATH},731:t=>{"use strict";t.exports=globalThis.SVGDOM},403:t=>{"use strict";t.exports=globalThis.SVGDOM_CSS},976:t=>{"use strict";t.exports=globalThis.URL},263:(t,e,n)=>{"use strict";n.d(e,{Tk:()=>i,vs:()=>a,wB:()=>s});var r=n(625);const i=Symbol("default");function a(t,e={},n,r="type"){function a(t){return Object.fromEntries(Object.entries(t).map((([t,e])=>[t,"object"==typeof e?s(e):e])))}function s(t){return null===t?null:void 0!==t?"string"==typeof t||"number"==typeof t?t:t instanceof Array?t.map(s):t[r]in e?e[t[r]](t,(e=>t===e?a(t):s(e)),n):i in e?void e[i](t,(e=>t===e?a(t):s(e)),n):a(t):void 0}return s(t)}function s(t,e,n={},i=[],a=!1){const{ignoreKey:o=(()=>!1),ignoreNode:c=(()=>!1)}=n;function l(t,e,r){const i=s(t,e,n,r,a);return a&&!i&&console.log("unmatched:",t,e,r),i}if(null===t&&null===e)return!0;if(null===t||null===e)return a&&console.log("unmatched:",t,e,"\t=>",!1),!1;if(Array.isArray(t)&&Array.isArray(e)){if(e.length<=t.length){return e.map(((e,n)=>l(t[n],e,[...i,n]))).every((t=>t))}return a&&console.log("unmatched length:",t.length,e.length,"\t=>",!1,i),t.map(((t,n)=>l(t,e[n],[...i,n]))).every((t=>t)),!1}if(Array.isArray(t)&&t.every(c))return!0;if(Array.isArray(e)&&e.every(c))return!0;if("object"==typeof t&&c(t))return!0;if("object"==typeof e&&c(e))return!0;if("object"==typeof t&&"object"==typeof e){if(c(e)||c(t))return!0;return Object.entries(e).filter((([t,e])=>!o(t))).map((([e,n])=>l(t[e],n,[...i,e]))).every((t=>t))}{const n=t===e;return a&&!n&&"string"==typeof t&&"string"==typeof e&&console.log((0,r.$Q)(t,e)),n}}},392:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>msgSigRegex,i:()=>AnimUMLEngine});var _Utils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(625),_DBM_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(695),_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(481),_Webots_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(490),debugAdditionalOperations=!1,debugEvalActions=!1;const uninitValRegex=/^uninitializedValue\((.*)\)$/,msgSigRegex=/([^]*)\(([^)]*)\)/;class AnimUMLEngine{constructor(model,settings_){this.name="AnimUML",this.setModel(model),this.settings=settings_;const currentModel=model;this.nbMessagesToKeepInEther=(null==settings_?void 0:settings_.nbMessagesToKeepInEther)||0;const self=this;this.extraOperations={},this.extraOperations.__builtin__={Webots:_Webots_js__WEBPACK_IMPORTED_MODULE_2__.R3,DBM:_DBM_js__WEBPACK_IMPORTED_MODULE_0__.l,plugin(name){var _self$currentModel$se,_self$currentModel$se2;let ret=null===(_self$currentModel$se=self.currentModel.settings)||void 0===_self$currentModel$se||null===(_self$currentModel$se2=_self$currentModel$se.plugins)||void 0===_self$currentModel$se2?void 0:_self$currentModel$se2[name];if(ret)return"string"==typeof ret&&(ret=eval(ret)),ret;console.error("Plugin not found:",name)},debug:(t,...e)=>(console.log("DEBUG:",...e,t),t),get config(){return self.treeifyConfig(self.configuration)},get jsonConfig(){return JSON.stringify(self.treeifyConfig(self.configuration))},JSON:{stringify:JSON.stringify,parse:JSON.parse},async digest(t,e,n=32){const r=await crypto.subtle.digest({name:t},(new TextEncoder).encode(e)),i=[...new Uint8Array(r)].map((t=>t.toString(16).padStart(2,"0"))).join("");return"number"==typeof n?BigInt.asUintN(n,BigInt("0x0"+i)):i}},this.sysHistory=[]}close(){var t,e;null===(t=(e=this.extraOperations.__builtin__.Webots).close)||void 0===t||t.call(e)}setModel(model){this.currentModel=model;for(const[name,def]of Object.entries((null==model||null===(_model$settings=model.settings)||void 0===_model$settings?void 0:_model$settings.plugins)??{})){var _model$settings,_plugin$init;console.log("Loading plugin:",name);const plugin="string"==typeof def?eval(def):def;model.settings.plugins[name]=plugin,null===(_plugin$init=plugin.init)||void 0===_plugin$init||_plugin$init.call(plugin,this)}let engine=this;this.EMIOperations={FALSE:0,TRUE:1,getters:{params(t){var e;debugAdditionalOperations&&console.log("params of ",t);var n=engine.configuration.objectState[t.name],r=n.__OP_NAME__,i=n.__ARGS__,a={};const s=null===(e=t.operationByName)||void 0===e?void 0:e[r];return s&&s.parameters&&s.parameters.forEach(((t,e)=>{"string"!=typeof t&&(t=t.name),a[t]=1*i[e]})),Object.assign(a,n.__NAMED_ARGS__),a}},SEND(t,e){debugAdditionalOperations&&console.log("SEND(%s, %s, ...)",t==this?"this":t,e.valueOfProperty),t[e.valueOfProperty].apply(this,Array.prototype.slice.call(arguments,2))},GET_ACTIVE_PEER(t,e){debugAdditionalOperations&&console.log("GET_ACTIVE_PEER(%s, %s, ...)",t==this?"this":t,e.valueOfProperty);let n=unescEMI(t.valueOfProperty);n.startsWith("ROOT_")&&(n=n.replace(/^ROOT_instMain\./,"").replace(/\./g,"_"));const r=engine.currentModel.getObject(n);return engine.currentModel.navigateThroughPorts(r,engine.currentModel.getObjectRelative(r,e.valueOfProperty),debugEvalActions).target},GET(t,e){var n,r=t;if(t.name&&engine.currentModel.getObject(t.name))r=engine.configuration.objectState[t.name];else if(t!=this&&e.valueOfProperty){var i;const e=unescEMI(t.valueOfProperty);e==(null===(i=engine.currentModel.getObject(e))||void 0===i?void 0:i.name)&&(r=engine.configuration.objectState[e])}return null==n&&(n=r[escAttr(e.valueOfProperty)]),null==n&&(n=!1),debugAdditionalOperations&&console.log("GET(%s, %s) => ",t==this?"this":t,e.valueOfProperty,n),n},SET(t,e,n){debugAdditionalOperations&&console.log("SET(%s, %s, %s)",t==this?"this":t,e.valueOfProperty,n),t.name&&engine.currentModel.getObject(t.name)&&(t=engine.configuration.objectState[t.name]),t[escAttr(e.valueOfProperty)]=n,n||delete t[escAttr(e.valueOfProperty)]},AT:(t,e)=>(debugAdditionalOperations&&console.log("AT(%s, %s)",t,e),t[e]),CALL(t,e){return debugAdditionalOperations&&console.log("CALL(%s, %s, ...)",t==this?"this":t,signal.valueOfProperty),t[e.valueOfProperty].apply(this,Array.prototype.slice(arguments,2))},INC(t,e,n){debugAdditionalOperations&&console.log("INC(%s, %s, %s)",t==this?"this":t,e.valueOfProperty,n);const r=escAttr(e.valueOfProperty);t[r]+""!="undefined"?t[r]+=n:t[r]=n,t[r]||delete t[r]},DEC(t,e,n){debugAdditionalOperations&&console.log("DEC(%s, %s, %s)",t==this?"this":t,e.valueOfProperty,n);const r=escAttr(e.valueOfProperty);t[r]+""!="undefined"?t[r]-=n:t[r]=-n,t[r]||delete t[r]},IS_IN_STATE(t,e){const n=engine.configuration.currentState[unescEMI(t.valueOfProperty)].includes(engine.currentModel.getState(unescEMI(e.valueOfProperty)));return debugAdditionalOperations&&console.log("IS_IN_STATE('%o', '%o') : %o",t,e,n),n},MESSAGES:()=>engine.lastSteps().flatMap((t=>t.messages)),SENT_MESSAGES:()=>engine.lastSteps().flatMap((t=>t.messages.filter((e=>e.sentAt==t)))),RECEIVED_MESSAGES:()=>engine.lastSteps().flatMap((t=>t.messages.filter((e=>e.receivedAt==t)))),IS_TRANSITION(t){var e;return(null===(e=engine.lastSteps()[0])||void 0===e?void 0:e.cause)==="transition:"+t.valueOfProperty},EP_GET_FIRST(t){var e;debugAdditionalOperations&&console.log("EP_GET_FIRST('%o')",t);const n=t.name;let r=null===(e=engine.configuration.objectState[n].__EP__)||void 0===e?void 0:e[0];if(r){const t=r.signature.replace(msgSigRegex,"$1");r=`SIGNAL_${t}`}return r},EP_IS_EMPTY(t){let e;if(debugAdditionalOperations&&console.log("EP_IS_EMPTY('%o')",t),t==this)e=t.__actualTargetObject__.name;else{e=unescEMI(t.valueOfProperty),e.startsWith("ROOT_")&&(e=e.replace(/^ROOT_instMain\./,"").replace(/\./g,"_"));const n=engine.currentModel.getObjectRelative(t.__actualTargetObject__,e);n&&(e=n.name)}var n=Object.values(engine.configuration.ether).flatMap((t=>t.map((t=>t.target)))).includes(e);return!(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Xq)(engine.configuration.objectState[e].__EP__)&&!n},EP_CONTAINS(t,e){var n,r;debugAdditionalOperations&&console.log("EP_CONTAINS(%s, %s)",t.valueOfProperty,e.valueOfProperty);const i=unescEMI(t.valueOfProperty);let a=engine.configuration.objectState[i];a||(a=engine.currentModel.getObjectRelative(t.__actualTargetObject__,i));const s=e.valueOfProperty.replace(/^SIGNAL_/,""),o=new RegExp(String.raw`^${s}\(`);return(null===(n=engine.configuration.ether[s.replace(/^SIGNAL_/,"")])||void 0===n?void 0:n.length)>0||1==(null===(r=a.__EP__)||void 0===r?void 0:r.some((t=>t.signature.match(o))))},printf(t){console.log.apply(console,arguments)}}}copyConfig(t){var e=Object.assign({},t);return e.currentState={},Object.entries(t.currentState).forEach((([t,n])=>{e.currentState[t]=n.slice(0)})),e.histories={},Object.entries(t.histories).forEach((([t,n])=>{e.histories[t]=n.slice(0)})),e.objectState={},Object.entries(t.objectState).forEach((([t,n])=>{e.objectState[t]={...n},n.__EP__&&(e.objectState[t].__EP__=n.__EP__.slice(0))})),e.ether={...e.ether},e}isActive(t){return this.currentModel.isActive(t)&&!t.isObserver}serializeConfig(t){try{return JSON.stringify(this.treeifyConfig(t))}catch(e){throw console.log("Problem serializing configuration:",t),e}}treeifyConfig(t,e){function n(t){return{source:e?t.source:"[",target:t.target,signature:t.signature,tag:t.tag}}var r={currentState:{},histories:{},objectState:Object.fromEntries(Object.entries(t.objectState).map((([t,e])=>[t,Object.fromEntries(Object.entries(e).sort(_Utils_js__WEBPACK_IMPORTED_MODULE_3__.hN).map((([t,e])=>"__EP__"===t?[t,e.map(n)]:[t,e])))])).sort(_Utils_js__WEBPACK_IMPORTED_MODULE_3__.hN)),ether:Object.fromEntries(Object.entries(t.ether).map((([t,e])=>[t,e.map(n)])).sort(_Utils_js__WEBPACK_IMPORTED_MODULE_3__.hN))};return this.currentModel.objects.filter((t=>this.isActive(t))).forEach((e=>{var n;r.currentState[e.name]=null===(n=t.currentState[e.name])||void 0===n?void 0:n.map((t=>this.currentModel.stateFullName(t)))})),Object.entries(t.histories||{}).forEach((([t,e])=>{r.histories[t]=e.map((t=>this.currentModel.stateFullName(t)))})),r}addToEther(t){var e,n;if(null===(e=this.settings)||void 0===e||!e.disableEther)if(t.target&&"]"!==t.target&&null!==(n=this.settings)&&void 0!==n&&n.enableEventPools){const e=this.configuration.objectState[t.target];e.__EP__=e.__EP__||[],e.__EP__.push(t)}else{var r,i=t.signature.replace(msgSigRegex,"$1"),a=this.configuration.ether[i]||[];if(null!==(r=this.settings)&&void 0!==r&&r.keepOneMessagePerTrigger){const t=0==this.nbMessagesToKeepInEther?a.length:-this.nbMessagesToKeepInEther;a.slice(0,t).forEach((t=>{t.ignored=!0})),a=a.slice(t)}t.ignored=!1,a.push(t),this.configuration.ether[i]=a}}removeFromEther(t){var e=t.signature.replace(msgSigRegex,"$1");const n=this.getEP(t.target);if(n.some((e=>e==t))){var r;1===n.length?delete this.getObjectState(t.target).__EP__:null!==(r=this.settings)&&void 0!==r&&r.autoIgnore?TODO:(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Od)(n,t)}else{var i=this.configuration.ether[e];1===i.length?delete this.configuration.ether[e]:(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Od)(i,t)}}getObjectState(t){return this.configuration.objectState[t]}getEP(t){return this.getObjectState(t).__EP__||[]}findMessageInEP(t,e,n){return this.getEP(e).find((e=>e.signature.replace(msgSigRegex,"$1")===t&&(!n||n.includes(e.tag))))}findMessage(t,e,n){t=t.replace(msgSigRegex,"$1");var r=this.findMessageInEP(t,e,n);if(r)return r;var i=this.configuration.ether[t];return i&&i.length>0?e?i.find((t=>"]"===t.target||t.target===e&&(!n||n.includes(t.tag)))):i[0]:void 0}async backToInternal(t){const e=(t+="").split(","),n=((0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(this.sysHistory),[]);let r=this.sysHistory;for(;e.length>1;){const t=1*e.shift();n.push(...r.slice(0,t));const i=1*e.shift(),a=0==t?r:r[t-1],[s,o]=[a.mainIdx,a.alts],c=r.slice(t);if(a.mainIdx=s<=i&&(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Xq)(c)?i+1:i,r=o[i],0==t&&(r.alts=a.alts,r.mainIdx=a.mainIdx),o.splice(i,1),(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Xq)(c)){const t=i<s?s-1:s;o.splice(t,0,c)}}t=e[0];const i=r.splice(t);n.push(...r);const a=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(r);if(a){a.alts=a.alts||[];const t=a.mainIdx;a.mainIdx=0,(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Xq)(i)&&a.alts.splice(t,0,i)}else{console.assert(r==this.sysHistory),r.alts=r.alts||[];const t=r.mainIdx;r.mainIdx=0,(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Xq)(i)&&r.alts.splice(t,0,i)}n.alts=this.sysHistory.alts,n.mainIdx=this.sysHistory.mainIdx,this.sysHistory=n;const s=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(this.sysHistory);var o,c;s?(this.configuration=this.copyConfig(s.configurationAfter),await(null===(o=this.settings)||void 0===o||null===(c=o.onconfigchanged)||void 0===c?void 0:c.call(o))):(await this.reset(),this.sysHistory=n)}isActivable(t){const e=this.currentModel.getTransObject(t);if(e.isObserver)return!1;var n=this.configuration.currentState[e.name];if(n){var r=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(n);return r.kind?this.currentModel.stateFullName(t.source)===this.currentModel.stateFullName(r):n.map((t=>this.currentModel.stateFullName(t))).includes(this.currentModel.stateFullName(t.source))}}eventMatched(t){var e,n,r;return this.currentModel.noEventTrigger(t)||!(null!==(e=this.settings)&&void 0!==e&&e.checkEvents)&&!(null!==(n=this.settings)&&void 0!==n&&null!==(r=n.isCheckedEvent)&&void 0!==r&&r.call(n,t.trigger))||this.findMessage(t.trigger,this.currentModel.getTransObject(t).name,t.ports)}isCurrentState(t){var e;return null===(e=this.configuration.currentState[this.currentModel.getStateObject(t).name])||void 0===e?void 0:e.map((t=>this.currentModel.stateFullName(t))).includes(this.currentModel.stateFullName(t))}setInitialState(t){this.configuration.currentState[t.name]=[this.currentModel.getInitial(t)]}getFireable(t,e){return e=e||(t=>this.isFireable(t)),this.configuration.currentState[t.name].flatMap((t=>(t.outgoing||[]).concat(Object.values(t.internalTransitions||{})).filter(e)))}callOperation(t,e,n){var r=t.split("."),i=this.currentModel.getObject(r[0]),a=r[1],s={cause:`operation:${t}${e?`:${e}`:n?`:${n.name}`:""}`,activeObject:i,configuration:this.copyConfig(this.configuration),messages:[]},o=this.findMessage(a,i.name),c=i.operationByName&&i.operationByName[a];let l;return!o||e||n?(o={source:e||(n?n.name:"["),target:autoReceiveDisabled.checked?"]":i.name,signature:`${a}`,receivedAt:autoReceiveDisabled.checked?void 0:s,sentAt:s},s.messages.push(o),!this.isActive(i)||c&&c.method||this.addToEther(o)):(o.receivedAt=s,o.target=i.name,s.messages.push(o),this.removeFromEther(o)),c&&c.method&&(l=this.evalActions(c.method,s,i,this.extraOperations,this,!1,!0)),s.configurationAfter=this.copyConfig(this.configuration),this.sysHistory.push(s),l}registerArguments(t,e,n){if(e.match(msgSigRegex)){const r=e.replace(msgSigRegex,"$2").trim();if(r){const e=r.split(",").map((t=>t.trim()));this.configuration.objectState[t.name].__NAMED_ARGS__=Object.fromEntries((0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.$R)(e,n.map((t=>t))))}}}async fireInternal(t,e=!1){var n,r,i,a,s;if(this.isFireable(t)||e){this.configuration.histories=this.configuration.histories||{},this.configuration.objectState=this.configuration.objectState||{};var o=this.currentModel.getTransObject(t);this.configuration.objectState[o.name]=this.configuration.objectState[o.name]||{};var c={cause:`transition:${this.currentModel.transFullName(t)}`,activeObject:o,configuration:this.copyConfig(this.configuration),messages:[]},l=this.configuration.currentState[o.name];if("shallowHistory"==t.target.kind){var u=this.configuration.histories[this.currentModel.stateFullName(t.target.region)];this.configuration.currentState[o.name]=u||this.currentModel.fullState(t.target.region)}else t.isInternal||(this.configuration.currentState[o.name]=this.currentModel.fullState(t.target));for(;((0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(this.configuration.currentState[o.name]).states||[]).length>0;)this.configuration.currentState[o.name].push(this.currentModel.getInitial((0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(this.configuration.currentState[o.name])));var p,_=this.currentModel.stateFullName(this.configuration.currentState[o.name][0]),d=[this.configuration.currentState[o.name][0]];this.configuration.currentState[o.name].slice(1).forEach((t=>{const e=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(d).states.some((t=>"shallowHistory"===t.kind));d.push(t),e&&(this.configuration.histories[_]=d.slice(0)),_+="."+t.name})),t.trigger&&((p=this.findMessage(t.trigger,o.name,t.ports))?(p.receivedAt=c,p.target=o.name,c.messages.push(p),this.removeFromEther(p)):c.messages.push({source:"[",target:o.name,signature:t.trigger,receivedAt:c}));for(var m=this.configuration.currentState[o.name].slice(),g=0;g<m.length&&g<l.length&&m[g]===l[g]&&(t.source!=m[g]||t.isInternal);g++);if(l=l.slice(g),m=m.slice(g),await(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Mo)(l.slice(0).reverse(),(async t=>{t.exit&&await this.evalActions(t.exit,c,o,this.extraOperations,this)})),p){const e=p.signature.match(msgSigRegex);if(e){this.configuration.objectState[o.name].__OP_NAME__=e[1];const n=e[2].trim()?e[2].split(",").map((t=>JSON.parse(t.trim()))):[];this.configuration.objectState[o.name].__ARGS__=n,this.registerArguments(o,t.trigger,n)}}if(t.effect){const e=1==this.nextEffectAsAsync,n=1==this.nextEffectAsFunction;this.nextEffectAsFunction=this.nextEffectAsAsync=!1;const r=this.evalActions(t.effect,c,o,this.extraOperations,this,e,n);this.effectResult=r instanceof Promise?await r:r}var f=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(this.configuration.currentState[o.name]);if(f.kind||(this.configuration.objectState[o.name].__OP_NAME__=void 0,this.configuration.objectState[o.name].__ARGS__=void 0,this.configuration.objectState[o.name].__NAMED_ARGS__=void 0),await(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Mo)(m,(async t=>{if(t.entry){const e=this.evalActions(t.entry,c,o,this.extraOperations,this);e instanceof Promise&&await e}})),c.configurationAfter=this.copyConfig(this.configuration),this.sysHistory.push(c),null!==(n=this.settings)&&void 0!==n&&n.fireInitialTransitions&&"initial"==f.kind){var h=f.outgoing[0];await this.fireInternal(h),(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(this.sysHistory).isAuto=!0}return await(null===(r=this.settings)||void 0===r||null===(i=r.onconfigchanged)||void 0===i?void 0:i.call(r)),await(null===(a=this.settings)||void 0===a||null===(s=a.onfired)||void 0===s?void 0:s.call(a,t)),p}console.error("Fired a non-fireable transition: ",this.currentModel.transFullName(t))}evalGuard(t){var e;if(null!==(e=this.settings)&&void 0!==e&&e.considerGuardsTrue)return!0;if("else"==t.guard){const e=this.currentModel.getTransObject(t);return!t.source.outgoing.filter((e=>t!==e)).map((t=>this.evalActions(t.guard,n,e,this.extraOperations,this))).some((t=>t))}var n={messages:[]};return this.evalActions(t.guard,n,this.currentModel.getTransObject(t),this.extraOperations,this)}isFireable(t){return this.isActivable(t)&&this.eventMatched(t)&&(!t.guard||this.evalGuard(t))}getFireableTransitions(){var t,e=this.currentModel.objects.filter((t=>this.isActive(t))).flatMap((t=>{var e,n,r=this.getFireable(t);if(null!==(e=this.settings)&&void 0!==e&&e.checkEvents&&null!==(n=this.settings)&&void 0!==n&&n.matchFirst){var i;const e=(this.configuration.objectState[t.name].__EP__||[]).map((t=>t.signature.replace(msgSigRegex,"$1"))),n=null===(i=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.MR)(r.filter((t=>!this.currentModel.noEventTrigger(t))),(t=>e.indexOf(t.trigger.replace(msgSigRegex,"$1"))))[0])||void 0===i?void 0:i.trigger;n&&(r=r.filter((t=>this.currentModel.noEventTrigger(t)||t.trigger===n)))}return r}));if(null!==(t=this.settings)&&void 0!==t&&t.reactiveSystem){const n=this.currentModel;function r(t){return n.getTransObject(t).isActor||n.isAfter(t)}e.some((t=>!r(t)))&&(e=e.filter((t=>!r(t))))}return e}async getFireables(){return this.getFireableTransitions().map((t=>this.currentModel.transFullName(t)))}async getConfiguration(){return this.serializeConfig(this.configuration,!1)}async setConfiguration(t){var e,n;this.sysHistory.splice(0);var r=JSON.parse(t);this.configuration={currentState:Object.fromEntries(Object.entries(r.currentState).map((([t,e])=>[t,e.map((t=>this.currentModel.getState(t)))]))),histories:Object.fromEntries(Object.entries(r.histories).map((([t,e])=>[t,e.map((t=>this.currentModel.getState(t)))]))),objectState:r.objectState,ether:r.ether},await(null===(e=this.settings)||void 0===e||null===(n=e.onconfigchanged)||void 0===n?void 0:n.call(e))}async fire(t,e=!1){var n=this.currentModel.getTransition(t);await this.fireInternal(n,e);const r=this.currentModel.getTransObject(n),i=()=>(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(this.configuration.currentState[r.name]);for(;null!==(a=this.settings)&&void 0!==a&&a.autoFireAfterChoice&&"choice"===i().kind;){var a,s=this.getFireable(r);if(1!=s.length&&(s=s.filter((t=>"else"!==t.guard))),1!=s.length)throw"There should be exactly one fireable transition";n=s[0],await this.fireInternal(n)}}async reset(){var t,e,n;this.sysHistory=[];const r=this.currentModel;function i(t){return r.name.startsWith("UML2AnimUML_")?escAttr(t):t}this.configuration={currentState:{},histories:{},objectState:Object.fromEntries(this.currentModel.objects.map((t=>[t.name,Object.fromEntries(Object.entries(t.propertyByName||{}).filter((([t,e])=>e.defaultValue)).map((([t,e])=>[i(t),e.defaultValue])))]))),ether:{}};for(const t of this.currentModel.objects.filter((t=>this.isActive(t))))this.setInitialState(t);if(await(null===(t=this.settings)||void 0===t||null===(e=t.onconfigchanged)||void 0===e?void 0:e.call(t)),null!==(n=this.settings)&&void 0!==n&&n.fireInitialTransitions)for(const t of this.currentModel.objects.filter((t=>this.isActive(t)))){const e=this.getFireable(t);1!==e.length&&alert("Expected only one initial transition"),"initial"!==e[0].source.kind&&alert("Expected source of initial transition to be an initial Pseudostate"),await this.fireInternal(e[0]),(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.Z$)(this.sysHistory).isAuto=!0}}get modelName(){var t;return null===(t=this.currentModel)||void 0===t?void 0:t.name}async parseTransition(t){return t}async parseConfiguration(t){return t}async showTransition(t){const e=this.currentModel.getTransition(t);return{object:this.currentModel.getTransObject(e).name,fqn:t,name:e.name,source:e.source.name,target:e.target.name}}async showConfiguration(t){return JSON.parse(t)}async evaluateAtom(t,e){return this.evalActions(t,{},{},Object.assign(Object.fromEntries(this.currentModel.objects.map((t=>[`__ROOT__${t.name}`,this.configuration.objectState[t.name]]))),{...this.extraOperations,...e}),this)}lastSteps(){const t=this.sysHistory;var e=t.length-1;if(e<0)return[];{var n;function r(){return t[e]}const i=[r()];if(null!==(n=this.settings)&&void 0!==n&&n.autoFireAfterChoice)for(;r().cause.startsWith("transition:")&&"choice"===this.currentModel.getTransition(r().cause.replace(/^transition:/,"")).source.kind;)i.unshift(t[--e]);return i}}evalActions(t,e,n,r,i,a=!1,s=!1){return t=t.replace(/::/g,"."),this.evalActionsLegacy(t,e,n,r,i,a,s)}interpretActions(t,e,n,r,i,a,s){function o(t){return"__EMI__"+t}let c={FALSE:0,TRUE:1,SET(t,e,n){const r=i.configuration.objectState[t.object.name];n?r[o(e.name)]=n:delete r[o(e.name)]},GET(t,e){if(t instanceof p)return new d(t,e.name);{const r=i.configuration.objectState[t.object.name];if(o(e.name)in r)return r[o(e.name)];if(t.object==n){let t=i.currentModel.getObjectRelative(n,e.name);return t||(t=i.currentModel.getObject()),t&&(t=new m(t)),null==t&&(t=!1),t}return!1}},SEND(t,e,...n){},AT:(t,e)=>t[e],INC(t,e,n){t[o(e)]+=n},DEC(t,e,n){t[o(e)]-=n},EP_IS_EMPTY(t){var e;const n=t.path();"ROOT_instMain"===n[0]&&n.splice(0,1);const r=n.join("_");return 0==((null===(e=i.configuration.objectState[r].__EP__)||void 0===e?void 0:e.length)??0)}};this.parsedActionsCache=this.parsedActionsCache??{};const l=this.parsedActionsCache[t]??_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__.E2.parse(t);this.parsedActionsCache[t]=l;let u=0;class p{constructor(t){this.name=t}}class _ extends p{constructor(t){super(t)}}class d extends p{constructor(t,e){super(e),this.source=t}path(){return[...this.source instanceof d?this.source.path():[this.source.name],this.name]}}class m{constructor(t){this.object=t}}const g={"==":(t,e)=>t==e,"&&":(t,e)=>t&&e,"||":(t,e)=>t||e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">":(t,e)=>t>e,">=":(t,e)=>t>=e},f={"-":t=>-t};function h(t){let e;switch(String(t.type)){case"memberAccessExp":e=h(t.left)[t.propertyName];break;case"numberExp":e=t.value;break;case"variableExp":"params"===t.name?e=i.EMIOperations.getters.params(n):"this"===t.name?e=new m(n):t.name in r||t.name in c?e=c[t.name]:t.name in i.configuration.objectState[n.name]||(e=new _(t.name));break;case"binaryOpExp":{const n=g[t.op];"function"!=typeof n&&console.log("error: binary operator",t.op,"not found"),e=n(h(t.left),h(t.right))}break;case"prefixUnaryExp":{const n=f[t.op];"function"!=typeof n&&console.log("error: unary prefix operator",t.op,"not found"),e=n(h(t.expression))}break;case"functionCallExp":const a=h(t.left);"function"!=typeof a&&console.log("error: expression did not evaluate to a function: ",(0,_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__.Pz)(t.left));e=a(...t.args.map((t=>h(t))));break;default:console.log("error: cannot interpret",t.type,":",t)}return(0,_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__.Pz)(t),e}let y;for(;u<l.length;){const t=l[u];(0,_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_1__.Pz)(t),"expressionStat"===String(t.type)?y=h(t.expression):console.log("error: cannot interpret",t.type,":",t),u++}return y}evalActionsLegacy(t,e,n,r,i,a=!1,s=!1){let o=this.EMIOperations;const c=this.currentModel;function l(t){return unescEMI("function"==typeof t&&t.valueOfProperty?t.valueOfProperty:"object"==typeof t&&t.returnValueOf?t.returnValueOf.signature:JSON.stringify(t))}function u(t){var e,n;return n=t==d?"this":"object"==typeof t&&t.returnValueOf?`${t.returnValueOf.signature}`:!t.valueOfProperty||null!==(e=i.settings)&&void 0!==e&&e.symbolicValues?l(t):0,debugEvalActions&&console.log("getValue => "+n),n}function p(t,a,s){debugEvalActions&&console.log("doSet(%o, %o, %o)",t,a,s);let o=t;if(t.valueOfProperty){const e=c.getObjectRelative(n,unescEMI(t.valueOfProperty));e&&e==c.getObject(e.name)?(t=i.configuration.objectState[e.name],a=a.split(".")[1]):(t=i.configuration.objectState[n.name],o={})}if("object"==typeof s&&s.returnValueOf){var u,p,_=s.returnValueOf;let o;"]"===_.target?(_.target=n.name,o=n):o=i.currentModel.getObject(_.target);var d,m=_.signature.replace(msgSigRegex,"$1"),g=null===(u=o)||void 0===u||null===(p=u.operationByName)||void 0===p?void 0:p[m];if(g&&g.method){var f;_.receivedAt=e;const t=_.signature.replace(msgSigRegex,"$2").trim(),n=t?t.split(",").map((t=>JSON.parse(t))):[];let a={...Object.fromEntries((0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.$R)((null===(f=g.parameters)||void 0===f?void 0:f.map((t=>"string"==typeof t?t:t.name)))||[],n)),...r};d=i.evalActions(g.method,e,o,a,i,!1,!0),_.returnedValue=d,debugEvalActions&&console.log("evaled method of %s to %o",m,d)}s.returnValueOf.signature=`${unescEMI(a)} = ${unescEMI(s.returnValueOf.signature)}`,"function"==typeof d&&d.valueOfProperty&&(d=`uninitializedValue(${d.valueOfProperty})`),d?t[a]=d:delete t[a]}else{s?t[a]=s:delete t[a];const r={source:n.name,target:o.valueOfProperty?unescEMI(o.valueOfProperty):n.name,signature:`${o.valueOfProperty?`${unescEMI(o.valueOfProperty)}.`:""}${unescEMI(a)} = ${l(s)}`,sentAt:e,receivedAt:e,type:"set"};e.messages.push(r)}return!0}const _=n.name?i.configuration.objectState[n.name]:n,d=new Proxy(_,{get(t,a){var s;if("__actualTargetObject__"==a)return n;if("console"==a)return console;debugEvalActions&&console.log("get(%s)",String(a));const m=_.__NAMED_ARGS__;if(null!=m&&m.hasOwnProperty(a))return m[a];if(r&&r.hasOwnProperty(a)){const t=r[a];return t.bind&&t.bind(d),t}if(o.hasOwnProperty(a)){const t=o[a];return t.bind&&t.bind(d),t}if(null!==(s=o.getters)&&void 0!==s&&s.hasOwnProperty(a))return o.getters[a].bind(d)(n);if(a in t||"symbol"==typeof a)return t[a];if(a.match(/^SIGNAL_/))return a;var g=function t(r){var a=function(){};function s(t){return`${r}${t.match(/^[0-9]*$/)?`[${t}]`:t.match(uninitValRegex)?`[${t.replace(uninitValRegex,"$1")}]`:"."+t}`}return a.toString=()=>!1,a.valueOfProperty=r,debugEvalActions&&console.log("nav PROP:"+r),new Proxy(a,{apply(t,a,s){var o;debugEvalActions&&console.log("apply²");var p,_,d=unescEMI(r.toString()),m="]",g=d.split(/\./),f=!1;2==g.length&&((p=c.getObject(g[0]))||(p=c.getObject(g[0].replace(/\[([0-9]+)\]$/,"$1")))||(p=c.getObjectRelative(n,g[0])))&&(debugEvalActions&&console.log("Initial target: ",p.name),({target:p,tag:_}=c.navigateThroughPorts(n,p,debugEvalActions)),debugEvalActions&&console.log("Final target: ",p),m=p.name,d=g[1],f=!0);var h={source:n.name,target:m,displaySignature:`${d}(${Array.prototype.map.call(s,l).join(", ")})`,signature:`${d}(${Array.prototype.map.call(s,u).join(", ")})`,sentAt:e};return _&&(h.tag=_),f&&(h.targeted=!0),debugEvalActions&&console.log("call %s",h.signature),null==e||null===(o=e.messages)||void 0===o||o.push(h),i.addToEther(h),{returnValueOf:h}},get(e,a){if(debugEvalActions&&console.log(`get²(${String(a)})`),"__actualTargetObject__"==a)return n;if(a==Symbol.toPrimitive){var o;if(null!==(o=i.settings)&&void 0!==o&&o.symbolicValues)return()=>`uninitializedValue(${r})`;if(e.valueOfProperty){const t=function(t,e){const r=e.split(".");let a,s=!1;if(r[0]in t)a=t[r[0]],s=!0;else{const t=c.getObjectRelative(n,r[0]);t&&(a=i.configuration.objectState[t.name],s=!0)}if(s){for(const t of r.slice(1)){if(!a){s=!1;break}a=a[t]}if(s)return{hasValue:!0,value:a}}return{hasValue:!1}}(e,e.valueOfProperty);if(t.hasValue)return()=>t.value}}return a in e||"symbol"==typeof a?e[a]:t(s(a))},has:(t,e)=>(debugEvalActions&&console.log(`has²(${String(e)})`),!0),set:(t,e,n)=>(debugEvalActions&&console.log(`set²(${String(e)}, ${n})`),p(t,s(e),n))})}(a);return g},has:(t,e)=>(debugEvalActions&&console.log("has(self, %s)",e),!["console","alert"].includes(e)),set:(t,e,n)=>(debugEvalActions&&console.log("set %s to %s",e,n),p(t,e,n))});try{return contextualEval.call(d,t,a,s)}catch(e){throw console.log("error evaluating",t,e.stack),e}}}function escAttr(t){return`__EMI__${t}`}function unescEMI(t){return null==t?void 0:t.replace(/__EMI__/g,"")}},730:(t,e,n)=>{"use strict";n.d(e,{BJ:()=>y,OR:()=>v});var r=n(57),i=n(625),a=n(54),s=n(481),o=n(263);const c=/([^(]+)(?:\(([^)]*)\))?/;function l(t){console.warn(`AnimUML static analysis warning: ${t}`)}function u(t){console.error(`AnimUML static analysis error: ${t}`)}const p="Object diagram",_="Object-class diagram consistency",d="State diagram",m="Object/class-state diagram consistency",g="Object/class-interaction diagram consistency",f={associationWithEnum:{category:"Class diagram",id:"associationWithEnum"},noClass:{category:p,id:"noClass"},privateOperationOnConnector:{category:p,id:"privateOperationOnConnector"},unfoundConnectorOperation:{category:p,id:"unfoundConnectorOperation"},unparsableConnectorMessage:{category:p,id:"unparsableConnectorMessage"},classNotFound:{category:_,id:"classNotFound"},noConnectorType:{category:_,id:"noConnectorType"},connectorTypeNotFound:{category:_,id:"connectorTypeNotFound"},connectorTypeNotAssociation:{category:_,id:"connectorTypeNotAssociation"},connectorTypeInvalid:{category:_,id:"connectorTypeInvalid"},activeObjectHasNonActiveClass:{category:_,id:"activeObjectHasNonActiveClass"},operationShouldBelongOnlyToClass:{category:_,id:"operationShouldBelongOnlyToClass"},operationShouldBelongToClass:{category:_,id:"operationShouldBelongToClass"},propertyShouldBelongOnlyToClass:{category:_,id:"propertyShouldBelongOnlyToClass"},propertyShouldBelongToClass:{category:_,id:"propertyShouldBelongToClass"},actorObjectHasNonActorClass:{category:_,id:"actorObjectHasNonActorClass"},noGuardAfterChoice:{category:d,id:"noGuardAfterChoice"},triggerOnPseudostateOutgoingTransition:{category:d,id:"triggerOnPseudostateOutgoingTransition"},noTriggerOnStateOutgoingTransition:{category:d,id:"noTriggerOnStateOutgoingTransition"},argumentsParametersMismatch:{category:d,id:"argumentsParametersMismatch"},invalidTriggerArgument:{category:d,id:"invalidTriggerArgument"},triggerArgumentUsedInGuard:{category:d,id:"triggerArgumentUsedInGuard"},guardUnparsable:{category:d,id:"guardUnparsable"},effectUnparsable:{category:d,id:"effectUnparsable"},privateOperationAsTrigger:{category:m,id:"privateOperationAsTrigger"},unfoundTriggerOperation:{category:m,id:"unfoundTriggerOperation"},privateOperationAsNonSelfMessageInInteraction:{category:g,id:"privateOperationAsNonSelfMessageInInteraction"},unfoundInteractionOperation:{category:g,id:"unfoundInteractionOperation"},unfoundInteractionTargetObject:{category:g,id:"unfoundInteractionTargetObject"},unfoundInteractionSourceObject:{category:g,id:"unfoundInteractionSourceObject"}},h={duplicateObjectNames:{category:g,id:"duplicateObjectNames"},unparsableTransitionLabel:{category:d,id:"unparsableTransitionLabel"}};function y(t,{reportError:e=u,reportWarning:n=l,checkActorOperations:s=!0,checkActorClass:o=!0}={}){const p=new Map;function _(e,n){var i;return(null===(i=e.operationByName)||void 0===i?void 0:i[n])??function(e){var n;const i=null===(n=t.classes)||void 0===n?void 0:n[e];if(i){const t=p.get(i);if(t)return t;{const t=(0,r.B8)(i);return p.set(i,t),t}}return{}}(e.class)[n]}function d(e,n){return`${t.transFullName(e)} from ${t.stateFullName(e.source)} to ${t.stateFullName(e.target)} in ${n.name}'s state machine`}function m(t){return t.ends}function g(t){return t.literals}for(const[C,A]of Object.entries(t.classes??{}))if(A.ends&&A.ends.some((t=>g(t.type)))){const M={"Remove association."(){delete t.classes[C]},target:A},j=A.ends.find((t=>!g(t.type)&&!m(t.type)));if(j){const P=A.ends.find((t=>t!==j));M["Replace with an attribute."]=()=>{var e;delete t.classes[C],((e=j.type).propertyByName??(e.propertyByName={}))[A.name]={name:A.name,type:P.type.name}}}n(`Association with enumerations like ${C} between ${A.ends.map((t=>t.type.name)).join(" and ")} should not exist. Declare an attribute instead.`,f.associationWithEnum,M)}for(const k of t.objects)if(k.class){const I=v(k);if(I){var y;!k.isActor||null!==(y=I.stereotypes)&&void 0!==y&&y.includes("actor")||n(`Class ${k.class} of actor ${k.name} does not have the «actor» stereotype.`,f.actorObjectHasNonActorClass,{"Add «actor» stereotype to class."(){(I.stereotypes??(I.stereotypes=[])).push("actor")},targets:[k,I]});const N=(0,r.tD)(I);for(const[L,R]of Object.entries(k.propertyByName??{})){const B=N[L];B?"defaultValue"in R&&R.defaultValue!==B.defaultValue||n(`Property ${L} of object ${k.name} is also declared on its class.`,f.propertyShouldBelongOnlyToClass,{"Remove property from object."(){delete k.propertyByName[L]},target:R}):n(`Property ${L} of object ${k.name} should rather be defined on its class.`,f.propertyShouldBelongToClass,{"Move property to class."(){(I.propertyByName??(I.propertyByName={}))[L]=R,delete k.propertyByName[L]},target:R})}const D=(0,r.B8)(I);for(const[q,U]of Object.entries(k.operationByName??{}))D[q]?n(`Operation ${q} of object ${k.name} is also declared on its class.`,f.operationShouldBelongOnlyToClass,{"Remove operation from object."(){delete k.operationByName[q]},target:U}):n(`Operation ${q} of object ${k.name} should rather be defined on its class.`,f.operationShouldBelongToClass,{"Move operation to class."(){(I.operationByName??(I.operationByName={}))[q]=U,delete k.operationByName[q],(0,i.Xq)(U.parameters)&&(U.parameters=U.parameters.map((t=>"string"==typeof t?{name:t}:t)))},target:U})}else n(`Class ${k.class} of ${k.isActor?"actor":"object"} ${k.name} not found.`,f.classNotFound,{[`Create class ${k.class}.`](){(t.classes??(t.classes={}))[k.class]={name:k.class,comments:["Generated by a quick fix, please check and complete."]}},target:k})}else if(!k.isActor||o){const G=(0,i.Z5)(k.name);n(`No class is specified for ${k.isActor?"actor":"object"} ${k.name}.`,f.noClass,{[`Set class to ${G}.`](){k.class=G},target:k})}for(const[F,V]of Object.entries((0,i.vM)(t.objects,(t=>t.name))))V.length>1&&e(`Found ${V.length} objects with the same name: "${F}".`,h.duplicateObjectNames,{"Remove second one."(){t.removeObject(V[1])},"Remove first one."(){t.removeObject(V[0])},targets:V});function v(e){var n;return null===(n=t.classes)||void 0===n?void 0:n[e.class]}for(const W of t.objects.filter((e=>t.isActive(e)))){const K=v(W);var E;K&&(t.isActive(K)||null!==(E=K.stereotypes)&&void 0!==E&&E.some((t=>"active"===t))||n(`Class ${W.class} of active object ${W.name} is not active.`,f.activeObjectHasNonActiveClass,{"Add «active» stereotype to class."(){(K.stereotypes??(K.stereotypes=[])).push("active")},targets:[W,K]}));for(const z of(0,r.ES)(W))if(z.label)e(`Could not parse label "${z.label}" of transition ${d(z,W)}.`,h.unparsableTransitionLabel,{target:z});else{function J(t,e,r,i){const a=t[e];if(a)try{r(a)}catch(r){"peg$SyntaxError"===r.constructor.name?n(`Could not parse ${e} of transition ${d(z,W)}, line ${r.location.start.line}, column ${r.location.start.column}: ${r.message}`,i,{target:t}):console.log(r)}}z.source.kind&&z.trigger&&n(`Transition ${d(z,W)} should not have a trigger because it has a pseudostate as source.`,f.triggerOnPseudostateOutgoingTransition,{target:z}),z.source.kind||z.trigger||W.isActor||W.isObserver||n(`Transition ${d(z,W)} should have a trigger because it has a state as source.`,f.noTriggerOnStateOutgoingTransition,{target:z}),J(z,"effect",b,f.effectUnparsable),J(z,"guard",$,f.guardUnparsable)}for(const X of(0,r.Sv)(W).filter((t=>"choice"===t.kind)))for(const Z of X.outgoing)Z.guard||n(`No guard after choice on transition ${d(Z,W)}.`,f.noGuardAfterChoice,{target:Z});const H=(0,a.W)({...W,operationByName:{...W.operationByName}},t);for(const[Y,Q]of Object.entries((0,r.zE)(H))){if(Y.startsWith("TO")||Y.startsWith("GUARD_"))continue;const tt=_(W,Y);if(tt)if(tt.private)n(`Operation ${Y} on ${W.name} is private but appears as trigger in its state machine.`,f.privateOperationAsTrigger,{targets:[tt,...Q.map(S)]});else for(const et of Q){var w;const nt=(null===(w=tt.parameters)||void 0===w?void 0:w.length)??0,rt=et.trigger,it=(0,r.$m)(rt),at=(null==it?void 0:it.length)??0;if(void 0===it);else if(at===nt);else{const ot=(it??[]).map((t=>t.trim())),ct=0===nt&&(it??[]).every(st)?{[`Add trigger arguments (${ot.join(", ")}) as parameters.`](){tt.parameters=ot.map((t=>({name:t})))}}:void 0;n(`Operation ${Y} on ${W.name} has ${nt} parameters, but trigger ${rt} has ${at} argument(s).`,f.argumentsParametersMismatch,{...ct??{},targets:[tt,S(et)]})}function st(t){return t.trim().match(/^[\p{ID_Start}_$][\p{ID_Continue}_$\u200C\u200D]*$/u)}for(const lt of it??[])st(lt)||n(`Argument "${lt}" of trigger ${rt} on ${W.name} is not a valid identifier.`,f.invalidTriggerArgument,{target:S(et)});if(at&&et.guard)try{let ut=$(et.guard);for(const pt of it??[])ut[pt]&&n(`Argument "${pt}" of trigger ${rt} of transition ${d(et,W)} should not be used in its guard. Insert a choice pseudostate.`,f.triggerArgumentUsedInGuard,{"Insert a choice pseudostate."(){const t=S(et),e=t.region;function n(t,e){let n=1;const r=()=>`${t}_${n}`;for(;e[r()];)n++;return r()}const r={region:e,name:n("choice",e.stateByName),type:"Pseudostate",kind:"choice",comment:"Generated by a quick fix, please check and complete."},i={region:e,name:n(`${t.name}_upstream`,e.transitionByName),source:t.source,target:r,trigger:t.trigger,comment:"Generated by a quick fix, please check and complete."},a={region:e,name:n(`${t.name}_else`,e.transitionByName),source:r,target:t.source,guard:"else",comment:"Generated by a quick fix, please check and complete."};r.incoming=[i],r.outgoing=[t,a],t.source=r,t.trigger=void 0,e.states.push(r),e.stateByName[r.name]=r,e.transitions.push(i,a),e.transitionByName[i.name]=i,e.transitionByName[a.name]=a},target:S(et)})}catch(_t){}}else if("when"!==Y){const dt=W,mt=v(dt),gt=(0,i.Tw)(Q.map(S).filter((t=>t))),ft={[`Add operation to ${mt?`class ${mt.name}`:`object ${dt.name}`}.`](){var t,e;const n={name:Y,class:mt??dt,comments:["Generated by a quick fix, please check and complete."]};((t=mt??dt).operationByName??(t.operationByName={}))[Y]=n,((e=mt??dt).operations??(e.operations=[])).push(n)},targets:[W,...gt]};(0,i.Xq)(gt)&&!gt.some((t=>t.effect))&&(ft["Transform trigger into effect."]=()=>{for(const t of gt)t.effect=t.trigger,t.trigger=void 0}),n(`Could not find operation ${Y} on ${W.name} that appears as trigger in its state machine.`,f.unfoundTriggerOperation,ft)}}}function S(e){try{return t.getTransition(t.transFullName(e).replace(/__DOT__/g,"."))}catch(t){return}}for(const[ht,yt]of Object.entries(t.connectorByName??{})){function vt(t,e,r){if(t)for(const i of t){const t=i.trim().match(c);if(t){const[,a,s=""]=t,o=_(e,a);if(s.split(",").filter((t=>t)),o)o.private&&n(`Operation ${a} on ${e.name} is private but appears in message ${i} sent on connector ${ht} from ${r.name}.`,f.privateOperationOnConnector,{[`Make operation ${o.class.name}.${o.name} public.`](){o.private=!1},targets:[o,yt]});else{const t=v(e);n(`Could not find operation ${a} on ${e.name} corresponding to message ${i} sent on connector ${ht} from ${r.name}.`,f.unfoundConnectorOperation,{[`Add operation to ${t?`class ${t.name}`:`object ${e.name}`}.`](){var n,r;const i={name:a,class:t??e,comments:["Generated by a quick fix, please check and complete."]};((n=t??e).operationByName??(n.operationByName={}))[a]=i,((r=t??e).operations??(r.operations=[])).push(i)},targets:[e,yt]})}}else n(`Could not parse message "${i}" on connector ${ht} from ${r.name} to ${e.name}.`,f.unparsableConnectorMessage,{target:yt})}}const{forward:bt,reverse:$t}=yt.possibleMessages??{},Et=yt.ends[0],wt=yt.ends[1];wt.isActor&&!s||vt(bt,wt,Et),Et.isActor&&!s||vt($t,Et,wt);const St=v(Et),xt=v(wt);function Ot(e,n){e["Create new association."]=()=>{const e={ends:[{type:St},{type:xt}],comments:["Generated by a quick fix, please check and complete."]};var r;if(!n&&(n=`${St.name}2${xt.name}`,null!==(r=t.classes)&&void 0!==r&&r[n])){let e=0;const r=n;for(;t.classes[n=`${r}_${++e}`];);}t.classes[n]=e,yt.type=n},e.target=yt}if(yt.type){var x;const Tt=null===(x=t.classes)||void 0===x?void 0:x[yt.type];if(Tt)if(Tt.ends){if(St&&xt){const Ct=Tt.ends[0].type,At=Tt.ends[1].type;if(Ct===St&&At===xt||Ct===xt&&At===St);else{const Mt={};Ot(Mt),n(`Connector type ${yt.type} of connector ${yt.name} between ${Et.name} : ${Et.class} and ${wt.name} : ${wt.class} does not connect their respective classes, but ${Ct.name} and ${At.name} instead.`,f.connectorTypeInvalid,Mt)}}}else{const jt={};St&&xt&&Ot(jt),n(`Connector type ${yt.type} of connector ${yt.name} between ${Et.name} and ${wt.name} is not an association.`,f.connectorTypeNotAssociation,jt)}else{const Pt={};St&&xt&&Ot(Pt,yt.type),n(`Association ${yt.type} for type of connector ${yt.name} between ${Et.name} and ${wt.name} not found.`,f.connectorTypeNotFound,Pt)}}else{const kt={};if(St&&xt){const It=Object.entries(t.classes??{}).filter((([t,e])=>{if(m(e)){const t=e.ends[0].type,n=e.ends[1].type;return t===St&&n===xt||t===xt&&n===St}return!1}));for(const[Nt,Dt]of It)kt[`Set type to existing association${Dt.label?` "${Dt.label}"`:""}.`]=()=>{yt.type=Nt};Ot(kt)}n(`No type is specified for connector ${ht} between ${Et.name} and ${wt.name}.`,f.noConnectorType,kt)}}function O(t){return t.flatMap((t=>{switch(t.type){case"call":case"autoAcceptCall":case"found":return[t];case"loop":return O(t.loopBody);case"alt":return t.alternatives.flatMap((t=>O(t.altBody)));case"ref":case"return":case"accept":case"after":return[];default:throw`Unknown event type: ${t.type}`}}))}const T=new Set;for(const[Lt,Rt]of Object.entries(t.interactions??{}))for(const Bt of O(Rt.events)){const qt=t.getObject(Bt.to);if(qt){if(qt.isActor&&!s)continue;const Ut=Bt.call??Bt.accept,Gt=_(qt,Ut);Gt?Gt.private&&Bt.from!==Bt.to&&n(`Operation ${Ut} on ${qt.name} is private but appears as a non-self message from ${Bt.from} in interaction "${Lt}".`,f.privateOperationAsNonSelfMessageInInteraction,{targets:[Gt,Bt]}):n(`Could not find operation ${Ut} on ${qt.name} that appears as message in interaction "${Lt}".`,f.unfoundInteractionOperation,{targets:[qt,Bt]})}else T.has(Bt.to)||(T.add(Bt.to),n(`Could not find object ${Bt.to} that first appears as message target in interaction "${Lt}".`,f.unfoundInteractionTargetObject,{target:Bt}));t.getObject(Bt.from)||T.has(Bt.from)||(T.add(Bt.from),n(`Could not find object ${Bt.from} that first appears as message source in interaction "${Lt}".`,f.unfoundInteractionSourceObject,{target:Bt}))}}function v(t,e=!1){const n=[],r=[];function i(t){return function(n,r,i){e?t.push({message:n,type:r,fixes:i}):t.push(n)}}return y(t,{reportWarning:i(r),reportError:i(n)}),{errors:n,warnings:r}}function b(t){return s.E2.keepLocation=!0,E(s.E2.parse(t))}function $(t){return s.TA.keepLocation=!0,E(s.TA.parse(t))}function E(t){const e={},n=[{}];function r(t){n.push({})}function a(t){n.pop()}function c(t,e){"string"==typeof t.variable&&console.log("forOfStat",t.variable),r(),e(t),a()}function l(t){t&&(t.uses??(t.uses=[])).push({type:"call"})}function u(t){if(t)return(t.uses??(t.uses=[])).push({type:"assign"}),t}function p(t,e){if(t){const n={type:"memberAccess",propertyName:e};return(t.uses??(t.uses=[])).push(n),n}}return(0,o.vs)(t,{lambdaExp(t,e){r(),e(t),a()},functionExp(t,e){r(),e(t),a()},block(t,e){r(),e(t),a()},tryStat(t,e){r(),e(t.tryBlock),a(),r(),(0,i.Z$)(n)[t.varName]=t.__location__,e(t.catchBlock),a(),r(),e(t.finallyBlock),a()},namePat({name:t,__location__:e}){(0,i.Z$)(n)[t]=e},slotPat({name:t,newName:e,__location__:r}){(0,i.Z$)(n)[(null==e?void 0:e.name)??t]=r},forOfStat:c,forInStat:c,forStat:c,variableExp({name:t,__location__:r}){for(const e of n.slice().reverse())if(t in e)return;return(e[t]??(e[t]={locations:[]})).locations.push(r),e[t]},thisExp:({__location__:t})=>((e.this??(e.this={locations:[]})).locations.push(t),e.this),assign:({left:t,op:e,right:n},r)=>(r(n),u(r(t))),functionCallExp:({source:t,args:e},n)=>(0,o.wB)(t,{type:"variableExp",name:"GET"})&&(0,o.wB)(e[1],{type:"variableExp"})?(n(e.slice(2)),p(n(e[0]),e[1].name)):(0,o.wB)(t,{type:"variableExp",name:"AT"})?(n(e.slice(2)),p(n(e[0]),`[${(0,s.Pz)(e[1])}]`)):(0,o.wB)(t,{type:"variableExp",name:"SET"})&&(0,o.wB)(e[1],{type:"variableExp"})||(0,o.wB)(t,{type:"variableExp",name:"INC"})&&(0,o.wB)(e[1],{type:"variableExp"})||(0,o.wB)(t,{type:"variableExp",name:"DEC"})&&(0,o.wB)(e[1],{type:"variableExp"})?(n(e.slice(2)),u(p(n(e[0]),e[1].name))):(0,o.wB)(t,{type:"variableExp",name:"SEND"})&&(0,o.wB)(e[1],{type:"variableExp"})||(0,o.wB)(t,{type:"variableExp",name:"CALL"})&&(0,o.wB)(e[1],{type:"variableExp"})?(n(e.slice(2)),l(p(n(e[0]),e[1].name))):(n(e),void l(n(t))),memberAccessExp:({source:t,propertyName:e},n)=>p(n(t),e)}),e}},97:(t,e,n)=>{"use strict";n.d(e,{LR:()=>g});var r=n(921),i=n(428),a=n(985),s=(n(113),n(392)),o=n(279);class c{}const l={getSlots:()=>[]};class u extends c{constructor(t){super(),this.params={classDiagram:!0},this.getURL=function(e=""){const n=(0,i.tC)(t.model,l,this.params);return(0,a.K)(e+"/plantuml/",n)},this.name="Class diagram"}}class p extends c{constructor(t){super(),this.params={classDiagram:!1},this.getURL=function(e="",n=l){const r=(0,i.tC)(t.model,n,this.params);return(0,a.K)(e+"/plantuml/",r)},this.name="Object diagram"}}class _ extends c{constructor(t,e){super(),this.name=`State diagram of ${e.name}`,this.params={displayedObjects:[e],classDiagram:!1,hideClasses:!0},this.getURL=function(e=""){const n=(0,i.tC)(t.model,l,this.params);return(0,a.K)(e+"/plantuml/",n)}}}class d{constructor(t){t instanceof r.H?this.model=t:this.model=new r.H(t),this.name=t.name,this.diagrams=[]}get objects(){return this.model.objects}isActive(t){return this.model.isActive(t)}}class m{constructor(t){var e;this.name=`Execution of ${t.name}`,this.diagrams=[],this.engine=new s.i(t.model,(null===(e=t.model.settings)||void 0===e?void 0:e.semantics)??{})}}class g{constructor(){this.models=[],this.executions=[]}getTree(){const t=this;return{actions:{"Open built-in model":{parameters:{modelName:{type:"select",set:globalThis.examples.map((t=>t.name))}},async perform(e){const n=globalThis.examples.find((t=>t.name===e));await(0,o.d)(n),t.models.push(new d(n))}}},models:Object.fromEntries(this.models.map((e=>[e.name,{actions:{"New class diagram":{perform(){e.diagrams.push(new u(e))}},"New object diagram":{options:{displayedObjects:{type:"subset",set:e.objects.map((t=>t.name))}},perform(){const t=new p(e);return e.diagrams.push(t),t}},"New execution":{perform(){const n=new m(e),r=new p(e);return r.executionName=n.name,r.name=`Execution diagram for ${e.name}`,t.executions.push({name:n.name,controller:n,"Execution diagram":r}),n}},...Object.fromEntries(e.objects.filter((t=>e.isActive(t))).map((t=>[`Open state diagram of ${t.name}`,{perform(){const n=new _(e,t);return e.diagrams.push(n),n}}])))},diagrams:Object.fromEntries(e.diagrams.map((t=>[t.name,t])))}]))),executions:Object.fromEntries(this.executions.map((t=>[t.name,t])))}}}},599:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Tail:()=>_utils_Tail_js__WEBPACK_IMPORTED_MODULE_13__.x,allObjectsToPlantUML:()=>_Export2PlantUML_js__WEBPACK_IMPORTED_MODULE_17__.tC,analyzeToObject:()=>_AnimUMLStaticAnalysis_js__WEBPACK_IMPORTED_MODULE_24__.OR,au2puMain:()=>_au2puUtils_js__WEBPACK_IMPORTED_MODULE_18__.DH,buildTrace:()=>_Explorer_js__WEBPACK_IMPORTED_MODULE_0__.H9,diffExplore:()=>_DiffExplorer_js__WEBPACK_IMPORTED_MODULE_2__.Y,diffInternal:()=>_Utils_js__WEBPACK_IMPORTED_MODULE_4__.$Q,engineToiSLI:()=>_EngineToiSLI_js__WEBPACK_IMPORTED_MODULE_23__.Y,evaluateStepBuilder:()=>_EngineToiSLI_js__WEBPACK_IMPORTED_MODULE_23__.v,explore:()=>_Explorer_js__WEBPACK_IMPORTED_MODULE_0__.KB,getAnimUMLEngine:()=>getAnimUMLEngine,getEventArgs:()=>_ModelUtils_js__WEBPACK_IMPORTED_MODULE_12__.$m,getEventName:()=>_ModelUtils_js__WEBPACK_IMPORTED_MODULE_12__.Le,getTreeBuilder:()=>getTreeBuilder,history2Sequence:()=>history2Sequence,matches:()=>_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__.wB,modelCheck:()=>modelCheck,parallelExplore:()=>_ParallelExplorer_js__WEBPACK_IMPORTED_MODULE_1__.K,toPlantUMLURI:()=>_PlantUMLURI_js__WEBPACK_IMPORTED_MODULE_3__.K,transformActions:()=>transformActions,transformExpression:()=>transformExpression,z2mc:()=>z2mc});var _Explorer_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(856),_ParallelExplorer_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(42),_DiffExplorer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(916),_PlantUMLURI_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(985),_Utils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(625),_CLILoadModel_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(886),_AnimUMLEngine_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(392),_Preprocessor_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(279),_Model_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(921),_ImportFromAnimUML_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(171),_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(481),_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(263),_ModelUtils_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(57),_utils_Tail_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(686),_RemoteTool_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(746),_History2TCSVGSequence_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(32),_MakeTCSVGStatic_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(463),_Export2PlantUML_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(428),_au2puUtils_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(209),_z2mc_javascript_src_model_checkers_z_hashset_predicate_mc_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(282),_z2mc_javascript_src_operators_str_str2tr_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(453),_z2mc_javascript_src_operators_str_synchronous_product_semantics_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(86),_AnimUMLTree_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(97),_EngineToiSLI_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(831),_AnimUMLStaticAnalysis_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(730);async function getAnimUMLEngine(modelPath,settings){var _model$settings;let model;return"object"==typeof process?model=await(0,_CLILoadModel_js__WEBPACK_IMPORTED_MODULE_5__.u7)(modelPath,null==settings?void 0:settings.modelId):(model=await fetch(modelPath),model=await model.text(),eval(model),console.log(globalThis.examples),model=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.Z$)(globalThis.examples),model=(0,_ImportFromAnimUML_js__WEBPACK_IMPORTED_MODULE_8__.F)(model),await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_7__.d)(model,null),model=new _Model_js__WEBPACK_IMPORTED_MODULE_9__.H(model)),new _AnimUMLEngine_js__WEBPACK_IMPORTED_MODULE_6__.i(model,settings??(null===(_model$settings=model.settings)||void 0===_model$settings?void 0:_model$settings.semantics))}function transformActions(t,e,n){return(0,_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__.vs)(_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_10__.E2.parse(t),e,n)}function transformExpression(t,e,n){return(0,_ASTUtils_js__WEBPACK_IMPORTED_MODULE_11__.vs)(_JavaScriptActionLanguageParser_js__WEBPACK_IMPORTED_MODULE_10__.TA.parse(t),e,n)}async function modelCheck(t,e,n,r="localhost:8082"){function i(t,e){return Object.entries(t).map((([t,n])=>`${t} = ${e?`|${n}|`:n}`))}const a=[...i(e.watchExpressions,!0),...i(e.LTLProperties)].join("\n"),s=(Object.keys(e.LTLProperties),`http://${r}/obp2`);let o;const c=new Promise((e=>{const r=new _RemoteTool_js__WEBPACK_IMPORTED_MODULE_14__.U(`${s}`,{onuuid(e){o=new _RemoteTool_js__WEBPACK_IMPORTED_MODULE_14__.b(`${s}/control`),r.setEngine(t),o.sendCommand("VERIFY_LTL_PROPERTY",e,`${n}:${a}`)},onerror(t){console.error(t)},onresults(t){e(t),r.close()}})}));return c.then((()=>o.close())),await c}function history2Sequence(t,e){const{path:n="."}=e,r=(0,_History2TCSVGSequence_js__WEBPACK_IMPORTED_MODULE_16__.u)(t.sysHistory,t.currentModel,{origin:"http://127.0.0.1:8082/",participants:t.currentModel.objects,...e});return null!=e&&e.makeStatic?(0,_MakeTCSVGStatic_js__WEBPACK_IMPORTED_MODULE_15__.E)(r,n,e):r}const z2mc={z_hashset_predicate_mc:_z2mc_javascript_src_model_checkers_z_hashset_predicate_mc_js__WEBPACK_IMPORTED_MODULE_19__,str2tr:_z2mc_javascript_src_operators_str_str2tr_js__WEBPACK_IMPORTED_MODULE_21__,synchronous_product_semantics:_z2mc_javascript_src_operators_str_synchronous_product_semantics_js__WEBPACK_IMPORTED_MODULE_20__};function getTreeBuilder(){return new _AnimUMLTree_js__WEBPACK_IMPORTED_MODULE_22__.LR}},886:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u7:()=>loadModel});var fs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(317),_Model_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(921),_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(416),_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(279);function getScript(t,e){const n=t.match(new RegExp(`^.*<script [^>]*id="${e}"[^>]*>(.*?)<\/script>.*$`,"s"));return n?n[1]:void 0}function createDummyModel(t){return{name:"__dummy__",getObject(t){return this.objects.find((e=>e.name===t))},isActive:t=>!1,isPort:t=>!1,stateFullName:t=>t.name,getConnectors:()=>[],getBehavior(){},objects:t.objects.map((({name:t,isActor:e})=>({name:t,isActor:e}))),interactions:Object.fromEntries([[t.name,t]].concat([...t.refSpans.entries()].map((([t,e])=>[t,{events:e.map((t=>({object:t,state:"TODO"}))),isDummy:!0}]))))}}async function loadModel(t,e,n=!1,r=!1){let i;try{i=fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(t,"utf8")}catch(n){if([t,e]=t.split("#"),!e)throw n;i=fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(t,"utf8")}return await loadModelInternal(i,e,n,r)}async function loadModelInternal(fileData,id,raw=!1,full=!1){console.log("Trying to load a JavaScript sample"),globalThis.examples=void 0;try{eval(fileData)}catch(t){}if(globalThis.examples){if(raw)return globalThis.examples[0];{const e=globalThis.examples[0];return await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__.d)(e),new _Model_js__WEBPACK_IMPORTED_MODULE_3__.H(e)}}{console.log("Failed, trying to extract JSON from a <script> with id:",id);let data=getScript(fileData,id);if(!data){console.log("Could not find a model with id:",id),console.log("Here is a list of <script> element ids in the given file:");for(const n of getScriptIds(fileData))console.log("\t",n[1]);console.log("Trying to extract JSON from a <script> variable");const match=fileData.match(/^.*<script(?:[ \t\r\n][^>]*)?>(.*?)<\/script>.*$/s),def={objects:[]};let success=!1;const ret=await new Promise((async(resolve,reject)=>{try{if(match){let model;const document={write(t){const e=t.match(/^.*src='[ \t\r\n]*https?:\/\/[^\/]*\/+[Aa][Nn][Ii][Mm][Uu][Mm][Ll].[Hh][Tt][Mm][Ll]#([^']*)'.*$/s);e?model=JSON.parse(decodeURIComponent(e[1])):console.log("document.write called with unrecognizable model:",t)}};eval(match[1]),model?raw?(success=!0,resolve(model)):(await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__.d)(model),success=!0,resolve(new _Model_js__WEBPACK_IMPORTED_MODULE_3__.H(model))):resolve(def)}else resolve(def)}catch(t){reject(t)}}));if(success)return ret;{const r=/(?<=https:\/\/[^\/]*\/AnimUML.html#)([^ \t\n]*})/g,i=fileData.match(r);console.log("Found",i.length,"model URLs");const a=i[id]??i[0],s=JSON.parse(decodeURIComponent(a));return raw?s:(await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__.d)(s),new _Model_js__WEBPACK_IMPORTED_MODULE_3__.H(s))}}{async function processed(t){return raw?t:(await(0,_Preprocessor_js__WEBPACK_IMPORTED_MODULE_2__.d)(t,(async t=>getScript(fileData,t.replace(/^#/,"")))),new _Model_js__WEBPACK_IMPORTED_MODULE_3__.H(t))}try{return data=JSON.parse(data),processed(data)}catch(e){console.log("Found non-JSON <script> with id:",id,", trying to eval");try{return data=eval(data),processed(data)}catch{}if(full)return void console.log("Failed to load a model.");{console.log("Failed to eval, trying to parse as PlantUML-like sequence diagram");const{keepObjects:o,keepRefSpans:c}=_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2;_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.keepObjects=_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.keepRefSpans=!0;const l=_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.parse(data);_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.keepObjects=o,_ImportFromPlantUMLSequence_js__WEBPACK_IMPORTED_MODULE_1__.E2.keepRefSpans=c;const u=createDummyModel(l);return u}}}}}function getScriptIds(t){return t.matchAll(/<script [^>]*id="([^"]*)"/g)}async function loadModels(t,e,n){const r=[...getScriptIds(fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(t,"utf8"))],i=[];for(const a of r){const r=a[1],s=await loadModel(t,r,e,n);s&&i.push(s)}return i}},330:(t,e,n)=>{"use strict";async function r(t,e,n=!1){if(n)return await e.parseConfiguration(t);{if(t.arrayBuffer&&(t=await t.arrayBuffer()),"string"==typeof t)return t;let e=new DataView(t);return new TextDecoder("iso-8859-15").decode(e)}}n.d(e,{w:()=>r})},695:(t,e,n)=>{"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{l:()=>i});class i{constructor(t,e){if(r(this,"dbm",void 0),r(this,"nbClocks",void 0),this.nbClocks=t,e)console.assert(e.length==(t+1)**2,"dbm array does not have the right size"),this.dbm=e;else{this.dbm=new Array((t+1)*(t+1)),this.dbm.fill(i.constrainLessOrEqual);for(let e=1;e<=t;e++)this.dbm[e*(t+1)+e]=i.emptyness;for(let e=1;e<=t;e++)this.enable(e)}}xMinusYRelatesToM(t,e,n,r){const a=i.computeInternal(n,r);return this.andGuard(t,e,a),this}gt(t,e){const n=i.computeInternal(-e,!0);return this.andGuard(0,t,n),this}ge(t,e){const n=i.computeInternal(-e,!1);return this.andGuard(0,t,n),this}lt(t,e){const n=i.computeInternal(e,!0);return this.andGuard(t,0,n),this}le(t,e){const n=i.computeInternal(e,!0);return this.andGuard(t,0,n),this}andGuard(t,e,n){this.dbm[t*(this.nbClocks+1)+t]==i.emptyness||this.dbm[e*(this.nbClocks+1)+e]==i.emptyness?this.dbm[0]=i.emptyness:this.and(t,e,n)}static computeInternal(t,e){return t<<1|(e?i.constrainLess:i.constrainLessOrEqual)}isEmpty(){return this.dbm[0]==i.emptyness}and(t,e,n){if(i.lessThan(i.add(this.dbm[e*(this.nbClocks+1)+t],n),i.constrainLessOrEqual))this.dbm[0]=i.emptyness;else if(i.lessThan(n,this.dbm[t*(this.nbClocks+1)+e])){this.dbm[t*(this.nbClocks+1)+e]=n;for(let n=0;n<=this.nbClocks;n++)if(this.dbm[n*(this.nbClocks+1)+n]!=i.emptyness)for(let r=0;r<=this.nbClocks;r++)if(n!=r&&this.dbm[r*(this.nbClocks+1)+r]!=i.emptyness){let a=i.add(this.dbm[n*(this.nbClocks+1)+t],this.dbm[t*(this.nbClocks+1)+r]);i.lessThan(a,this.dbm[n*(this.nbClocks+1)+r])&&(this.dbm[n*(this.nbClocks+1)+r]=a);let s=i.add(this.dbm[n*(this.nbClocks+1)+e],this.dbm[e*(this.nbClocks+1)+r]);i.lessThan(s,this.dbm[n*(this.nbClocks+1)+r])&&(this.dbm[n*(this.nbClocks+1)+r]=s)}}}static lessThan(t,e){if(t==i.infinity)return!1;const n=i.getValue(t),r=i.getValue(e);return n==r?i.isStrict(t)&&!i.isStrict(e):n<r}static getValue(t){return t>>1}static isStrict(t){return(t&i.constrainMask)==i.constrainLess}static add(t,e){return t==i.infinity||e==i.infinity?i.infinity:i.computeInternal(i.getValue(t)+i.getValue(e),i.isStrict(t)||i.isStrict(e))}set(t,e){for(let n=0;n<=this.nbClocks;n++)n==t?this.dbm[n*(this.nbClocks+1)+n]=i.constrainLessOrEqual:this.dbm[n*(this.nbClocks+1)+n]!=i.emptyness&&(this.dbm[t*(this.nbClocks+1)+n]=i.add(i.computeInternal(e,!1),this.dbm[n]),this.dbm[n*(this.nbClocks+1)+t]=i.add(i.computeInternal(-e,!1),this.dbm[n*(this.nbClocks+1)]))}enable(t){for(let e=0;e<=this.nbClocks;e++)e==t?this.dbm[e*(this.nbClocks+1)+e]=i.constrainLessOrEqual:this.dbm[e*(this.nbClocks+1)+e]!=i.emptyness&&(this.dbm[t*(this.nbClocks+1)+e]=i.infinity,this.dbm[e*(this.nbClocks+1)+t]=i.infinity)}delay(){for(let t=1;t<=this.nbClocks;t++)this.dbm[t*(this.nbClocks+1)+t]!=i.emptyness&&(this.dbm[t*(this.nbClocks+1)]=i.infinity)}toString(t=this.clockNames){if(null==this.dbm)return"oo";if(this.isEmpty(this.dbm))return"empty";function e(e){return(null==t?void 0:t[e])??"c"+e}let n="";for(let t=1;t<=this.nbClocks;t++)if(this.dbm[t*(this.nbClocks+1)+t]!=i.emptyness){let r="",a=!1;const s=this.dbm[t];s!=i.infinity&&(a=!0,r+=-i.getValue(s),r+=i.isStrict(s)?" < ":" <= "),r+=e(t);const o=this.dbm[t*(this.nbClocks+1)];o!=i.infinity&&(a=!0,r+=i.isStrict(o)?" < ":" <= ",r+=i.getValue(o)),r.length>4&&a&&(n.length>0&&(n+=" & "),n+=r)}for(let t=1;t<=this.nbClocks;t++)if(this.dbm[t*(this.nbClocks+1)+t]!=i.emptyness)for(let r=t+1;r<=this.nbClocks;r++)if(this.dbm[r*(this.nbClocks+1)+r]!=i.emptyness){let a="",s=!1;const o=this.dbm[r*(this.nbClocks+1)+t];o!=i.infinity&&(s=!0,a+=-i.getValue(o),a+=i.isStrict(o)?" < ":" <= "),a+=e(t),a+=" - ",a+=e(r);let c=this.dbm[t*(this.nbClocks+1)+r];c!=i.infinity&&(s=!0,a+=i.isStrict(c)?" < ":" <= ",a+=i.getValue(c)),a.length>4&&s&&(n.length>0&&(n+=" & "),n+=a)}return 0==n.length&&(n+="oo"),n}isClockLessThan(t,e){if(this.dbm[t*(this.nbClocks+1)+t]==i.emptyness)return!1;const n=this.dbm[t*(this.nbClocks+1)];return!(e!=i.getValue(n)||!i.isStrict(n))}isClockLessOrEqualThan(t,e){if(this.dbm[t*(this.nbClocks+1)+t]==i.emptyness)return!1;const n=this.dbm[t*(this.nbClocks+1)];return e==i.getValue(n)&&!i.isStrict(n)}isClockGreaterOrEqualThan(t,e){if(this.dbm[t*(this.nbClocks+1)+t]==i.emptyness)return!1;const n=this.dbm[t];return-e==i.getValue(n)&&!i.isStrict(n)}getMin(t){const e=this.dbm[t];return-i.getValue(e)}}r(i,"constrainMask",1),r(i,"constrainLess",1),r(i,"constrainLessOrEqual",0),r(i,"infinity",32767),r(i,"emptyness",i.computeInternal(-1,!1))},916:(t,e,n)=>{"use strict";n.d(e,{Y:()=>i});var r=n(625);async function i(t,e,n,i=!0,{configurationComparator:a}={}){n=n||console.log;let s=!1;var o=0,c=0;const l={},u=[],p={},_=[];async function d(t){t?await n.apply(null,arguments):await n("counts",o,c,NaN)}return await Promise.all([t.reset(),e.reset()]),await async function n(){async function m(t){const e=await t.getConfiguration();return[e,await t.parseConfiguration(e)]}const[[g,f],[h,y]]=await Promise.all([m(t),m(e)]),v=l[f],b=p[y];if(v&&b){if(v.id!=b.id)return s=!0,await d("diff",t.name," went back to known config ",v.id,": ",await t.showConfiguration(g)," whereas ",e.name," went back to known config ",b.id,": ",await e.showConfiguration(h)),!0;await d("info",(async()=>["Back to config ",v.id,": ",await t.showConfiguration(g),", and ",b.id,": ",await e.showConfiguration(h)]))}else{if(v){s=!0,await d("diff",t.name," went back to known config ",v.id,": ",await t.showConfiguration(g)," whereas ",e.name," went to a new config: ",await e.showConfiguration(h)),await d("diff","=> ",e.name," was supposed to be in ",await e.showConfiguration(_[v.id].config)," but is instead in ",await e.showConfiguration(h)),await d("diff","=> These two configurations differ at: ");var $=(0,r.$Q)(_[v.id].configKey,y);return await d("diff","\t",$[0]),await d("diff","\t",$[1]),!0}if(b)return s=!0,await d("diff",t.name," went to a new config: ",await t.showConfiguration(g)," whereas ",e.name," went to known config ",b.id,": ",await e.showConfiguration(h)),await d("diff","=> ",t.name," was supposed to be in ",await t.showConfiguration(u[b.id].config)," but is instead in ",await t.showConfiguration(g)),await d("diff","=> These two configurations differ at: "),$=(0,r.$Q)(u[b.id].configKey,f),await d("diff","\t",$[0]),await d("diff","\t",$[1]),!0;{if(await d("info","Reached config ",o,(async()=>[": ",await t.showConfiguration(g),", and ",await e.showConfiguration(h)])),i){var E=JSON.stringify(await t.showConfiguration(g)),w=JSON.stringify(await e.showConfiguration(h));if(E!==w)return s=!0,await d("diff","=> These two configurations (",o,") : ",JSON.parse(E)," and ",JSON.parse(w)," differ at: "),$=(0,r.$Q)(E,w),await d("diff","\t",$[0]),await d("diff","\t",$[1]),!0}if(a){const[O,T]=await Promise.all([t.showConfiguration(g),e.showConfiguration(h)]);if(!a(O,T))return s=!0,await d("diff","=> These two configurations (",o,") : ",O," and ",T," differ according to the given comparator"),!0}const[S,x]=await Promise.all([t.getFireables(),e.getFireables()]);if(l[f]={fireables:S,id:o,config:g,configKey:f},u.push(l[f]),p[y]={fireables:x,id:o,config:h,configKey:y},_.push(p[y]),await d("info",(async()=>[t.name,"'s parsed transition ends are: ",await(0,r.sz)(S,(e=>t.showTransition(e))),", and ",e.name,"'s are: ",await(0,r.sz)(x,(t=>e.showTransition(t)))])),S.length!=x.length)return s=!0,await d("diff",t.name," returned ",S.length," fireable transitions: ",await(0,r.sz)(S,(e=>t.parseTransition(e))),", whereas ",e.name," returned ",x.length," fireable transitions: ",await(0,r.sz)(x,(t=>e.parseTransition(t)))),!0;o++,c+=S.length,o%1e3==0&&await d();for(const[C,A]of(0,r.$R)(S,x)){async function M(t,e,n){await t.setConfiguration(e),await t.fire(n)}if(await d("info",(async()=>["Firing ",await t.showTransition(C),", and ",await e.showTransition(A)])),await d("info",(async()=>["\tfrom ",l[f].id,": ",await t.showConfiguration(g)," and ",p[y].id,": ",await e.showConfiguration(h)])),await Promise.all([M(t,g,C),M(e,h,A)]),await n())return!0}}}return!1}(),globalThis.configs1a=u,globalThis.configs2a=_,await d(),{nbConfigurations:o,nbTransitions:c,diff:s}}},831:(t,e,n)=>{"use strict";function r(t){async function e(e){return async function(e,n,r){const i=[];e.replace(n,((...e)=>i.push((async(e,n,r)=>JSON.stringify(await t.evaluateAtom(n)))(...e))));const a=await Promise.all(i);return e.replace(n,(()=>a.shift()))}(e,/@([^@]*)@/g)}return async(n,{s:r,a:i,t:a})=>{await t.setConfiguration(r);const s=await e(n);return await t.fire(i),await t.evaluateAtom(s,{})}}function i(t,e){return{semantics:{initial:async()=>(await t.reset(),[await t.getConfiguration()]),actions:async(n,r)=>(await t.setConfiguration(r),t.extraOperations.evaluateOnInput=async t=>await e(t,n),await t.getFireables()),execute:async(n,r,i)=>(await t.setConfiguration(i),t.extraOperations.evaluateOnInput=async t=>await e(t,r),await t.fire(n),[await t.getConfiguration()]),configurationHashFn:t=>function(t){let e,n,r=0;if(null==t||0===t.length)return r;for(e=0;e<t.length;e++)n=t.charCodeAt(e),r=(r<<5)-r+n,r|=0;return r}(t),configurationEqFn:(t,e)=>t===e},async evaluateState(t,e,n){throw"Unsupported"},async evaluateStep(t,e,n,r,i){throw"Unsupported"},isAccepting:async e=>(await t.setConfiguration(e),await t.evaluateAtom(t.currentModel.accepting))}}n.d(e,{Y:()=>i,v:()=>r})},856:(t,e,n)=>{"use strict";n.d(e,{H9:()=>a,KB:()=>i});var r=n(330);async function i(t,e,n,{onfired:i,useBlob:a=!0,withBFS:s=!1,getConfigKey:o=r.w,ondeadlock:c}={}){if(s)return async function(t,e,n,{onfired:r,useBlob:i=!0,getConfigKey:a,ondeadlock:s}={}){let o=0,c=0,l=0,u=0,p=0,_={},d=!1;async function m(e,n,r){var s=await a(e,t,!i);_[s]||(_[s]={from:n,transition:r},f.push(e),o++)}async function g(){e&&await e(o,c,l,u,p,h.length,f.length)}await t.reset();let f=[];await m(await t.getConfiguration());let h=f;f=[];t:for(;h.length>0;){u++,p=0;for(const e of h){p++,await t.setConfiguration(e);const i=await t.getFireables();0==i.length&&(l++,null==s||s(e)),c+=i.length,await g();for(const a of i){await t.setConfiguration(e),await t.fire(a);const i=await t.getConfiguration(e);if(r&&r(await t.parseTransition(a),i),await m(i,e,a),n&&await n(i,o)){d=!0;break t}}}h=f,f=[]}return await g(),{nbConfigurations:o,nbTransitions:c,nbDeadlocks:l,stoppingConditionReached:d,configs:_}}(t,e,n,{onfired:i,useBlob:a,getConfigKey:o,ondeadlock:c});var l=0,u=0,p=0,_={};async function d(){e&&await e(l,u,p)}await t.reset();const m=await async function e(r,s){r&&i&&i(await t.parseTransition(s),m);var m=await t.getConfiguration(),g=await o(m,t,!a);if(_[g]);else{var f=await t.getFireables();if(0==f.length&&(p++,null==c||c(m)),_[g]={fireables:f,from:r,transition:s},l++,u+=f.length,await d(),n&&await n(m,l))return!0;for(const n of f)if(await t.setConfiguration(m),await t.fire(n),await e(m,n))return!0}return!1}();return await d(),{nbConfigurations:l,nbTransitions:u,nbDeadlocks:p,stoppingConditionReached:m,configs:_}}async function a(t,e){return async function(t,e){const n=[];do{n.unshift(e[t].transition)}while(t=e[t].from);return console.assert(null==n.shift()),n}(await t.getConfiguration(),e)}},428:(t,e,n)=>{"use strict";n.d(e,{tC:()=>f,hy:()=>y});var r=n(625),i=n(850);function a(t,e="black"){return t?`\n\t\tskinparam hyperlinkColor ${e}\n\t\tskinparam hyperlinkUnderline false\n\t`:""}var s=n(54),o=n(991),c=n(481),l=n(57);const u="black",p="red",_='Currently showing elements with static analysis issues in <color:red>red</color>.\\nHover your mouse over them to read messages.\\nClose "Static analysis" in "analysis tools" once done\\nreviewing them.';function d(t,e,n,o){const{raw:c=!0,callPrefix:l="",forAnimation:_=!1,editing:d=!1,colors:f=g,hideLinks:h=!1,styleMode:y,showExplicitSM:b,hideOuterSMBoxes:$,stateCommentLocation:E="left",transitionCommentLocation:w="bottom",showSelfTransitionsAsInternal:S,heatMap:x,foldedStateFQNs:O=[],onlyStateFQN:T,narrow:C=!1,longTransitionFQNs:A=[],nonRankingTransitionFQNs:M=[],elementToMessage:j}=o;function P(t,n,r){return`javascript:${l}${t}('${encodeURIComponent(e.stateFullName(n))}'${r?`,'${r}'`:""})`}function k(t,e){return`[[${n.getTransURI("editTransition",t,e)} ${(0,r.uB)(t[e])||`<add ${e}>`}]]`}function I(t,i){function a(e){return t.ports?` from ${t.ports.join(", ")}${e?" ":""}`:""}var s,o="";if(d&&!c)o=`${k(t,"trigger")}${a(!0)}[&#8203;${k(t,"guard")}]/${k(t,"effect")} [[${n.getTransURI("removeTransition",t)} &#9003;]]`,t.label&&!(t.trigger||t.guard||t.effect)&&(o=`<i><back:#FFDEDE>${(0,r.uB)(t.label)}</back></i>\\n${o}`);else{let l=!1;if(t.trigger||t.guard||t.effect){function u(){var e=t.trigger;return!c&&(n.isActivable(t)&&!n.eventMatched(t)||e&&_)&&(e=`<color:${f.noEventColor}><s>${e}</s></color>`),e}function p(){var e=(0,r.uB)(t.guard);return!c&&!n.isFireable(t)&&n.isActivable(t)&&n.eventMatched(t)&&(e=`<color:${f.falseGuardColor}><s>${e}</s></color>`),e}const m="    ";o=`${s=u(),s||""}${a(t.guard)}${t.guard?`${C&&t.trigger?"\\n"+m:""}[${p()}]`:""}${t.effect?`/${C&&(t.trigger||t.guard)?"\\n"+m:""}${(0,r.uB)(t.effect,m)}`:""}`}else t.label&&(o=`${(0,r.uB)(t.label)}`,l=!0);c||!_&&!n.isFireable(t)||(""==o&&(o="// fire"),o=`[[${n.getFireURI(t)} ${o}&#8203;]]`),o=v(o,null==j?void 0:j.get(t)),l&&(o=`<i><back:#FFDEDE>${o}</back></i>`)}return o=function(t){if(null!=x&&x.max){function n(t){return Math.log(t+1)}const r=e.transFullName(t);let i=0,a="00";function s(t){const e=t.toString(16);return(1==e.length?"0":"")+e}return r in x&&(i=Math.round(255*n(x[r])/n(x.max)),a=s(i)),`<color:${0==i?"FF":"00"}${0==i?"00":"FF"}00${0==i?"FF":a}>⬤</color>`}return""}(t)+o,""!=o?`: ${o}`:(i?":":"")+o}function N(t){return`[[javascript:${l}transitionTo('${e.stateFullName(t)}') →]] [[${P("editState",t)} ${t.name}]] [[${P("removeState",t)} &#9003;]] [[javascript:${l}transitionFrom('${e.stateFullName(t)}') →]]`}function D(t){return L(t,"Current pseudostate",f.currentStateColor)}function L(t,n,r){var i=`${e.stateFullName(t)}Note`;return`\n\t\t\tnote "${n}" as ${i} ${r?`#${r}`:""}\n\t\t\t${"initial"==t.kind?`[*] --\x3e ${i}`:`${i} --\x3e ${q(t)}`}`}function R(t,e,n){var i=`${n||""}${(0,r.uB)(t[e])}`;return d&&!c&&(i=`[[${P("editProperty",t,e)} ${i}]]`),i}function B(t){return _?t.kind&&!0:n.isCurrent(t)}function q(t){switch(String(t.kind)){case"shallowHistory":return`${q(t.region)}[H]`;case"deepHistory":return`${q(t.region)}[H*]`;case"initial":return"[*]";default:return(0,i.KL)(e.stateFullName(t))}}const U=T?e.getState(T):t,G=function t(i,a){return`\n\t\t\t${!c&&d?`\n\t\t\t\tstate "[[javascript:${l}addState('${e.stateFullName(i)}') Add state]]" as __ADD_STATE_TO_${q(i)}__\n\t\t\t\tstate "[[javascript:${l}addPseudostate('${e.stateFullName(i)}','initial') Add initial]]" as __ADD_INITIAL_TO_${q(i)}__\n\t\t\t\tstate "[[javascript:${l}addPseudostate('${e.stateFullName(i)}','choice') Add choice]]" as __ADD_CHOICE_TO_${q(i)}__\n\t\t\t\tstate "[[javascript:${l}addPseudostate('${e.stateFullName(i)}','shallowHistory') Add shallow history]]" as __ADD_SHALLOW_HISTORY_TO_${q(i)}__\n\t\t\t`:""}\n\t\t\t${(i.states||[]).map((n=>{var r=n.kind,i=[];const s=t(n,i),o=function(t){return O.includes(e.stateFullName(t))}(n);switch(n.kind){case"junction":console.log('Unsupported "%s" Pseudostate: %s',n.kind,n);break;case"deepHistory":case"shallowHistory":d&&!c&&a.push(L(n,`&#171;${n.kind}&#187; ${N(n)}`));break;case"initial":if(d&&!c)return L(n,`&#171;${n.kind}&#187; ${N(n)}`)+(B(n)?`#${f.currentStateColor}`:"");if(!c)return`\n\t\t\t\t\t\t\t${D(n)}\n\t\t\t\t\t\t\t${B(n)?"":`hide ${e.stateFullName(n)}Note`}\n\t\t\t\t\t\t`;break;case"terminate":r="end";case"join":case"fork":case"choice":case"entrypoint":case"exitpoint":return`\n\t\t\t\t\t\tstate ${q(n)} <<${r}>>\n\t\t\t\t\t\t${d&&!c?`note left of ${q(n)} ${B(n)?`#${f.currentStateColor}`:""} : &#171;${n.kind}&#187; ${N(n)}`:c?"":`${D(n)}\n\t\t\t\t\t\t\t${B(n)?"":`hide ${e.stateFullName(n)}Note`}\n\t\t\t\t\t\t`}`;default:return`\n\t\t\t\t\t\t${n.entry?`${q(n)} : ${R(n,"entry","entry/")}`:""}\n\t\t\t\t\t\t${n.exit?`${q(n)} : ${R(n,"exit","exit/")}`:""}\n\t\t\t\t\t\t${n.doActivity?`${q(n)} : ${R(n,"doActivity","do/")}`:""}\n\t\t\t\t\t\t${Object.values(n.internalTransitions||{}).map((t=>`\n\t\t\t\t\t\t\t${q(n)} ${I(t,!0)}`)).join("")}\n\t\t\t\t\t\t${!c&&d?`${q(n)} : Add [[javascript:addInternalTransition('${e.stateFullName(n)}') transition]]${n.entry?"":`, [[javascript:addEntry('${e.stateFullName(n)}') entry]]`}${n.doActivity?"":`, [[javascript:addDoActivity('${e.stateFullName(n)}') do]]`}${n.exit?"":`, [[javascript:addExit('${e.stateFullName(n)}') exit]]`}${n.comment?"":`, [[javascript:editProperty('${e.stateFullName(n)}','comment') comment]]`}`:""}\n\t\t\t\t\t\tstate ${function(t){return d&&!c?`"${N(t)}" as ${q(t)}`:`"${t.name}" as ${q(t)}`}(n)} ${o?"<<o-o>> ":""}${!c&&B(n)?`#${f.currentStateColor}`:""} ${s.trim()?`{\n\t\t\t\t\t\t\t${o?"":s}\n\t\t\t\t\t\t}`:""}\n\t\t\t\t\t\t${i.join("")}\n\t\t\t\t\t\t${E&&n.comment?`\n\t\t\t\t\t\t\tnote ${E} of ${q(n)}\n${function(t,n){return m("editProperty",e.stateFullName(t),n,t.comment,c,d)}(n,"comment")}\n\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t`:""}\n\t\t\t\t\t`}})).join("")}\n\t\t\t${(i.transitions||[]).map((t=>{return S&&t.source==t.target?`\n\t\t\t\t\t\t${q(t.source)} ${I(t)}\n\t\t\t\t\t`:`\n\t\t\t\t\t\t${q(t.source)} -${i=[...c||!n.isFireable(t)||_?[]:[`#${f.fireableTransitionColor}`],...(a=t,M.includes(e.transFullName(a))?["norank"]:[])],(0,r.Xq)(i)?`[${i}]`:""}-${function(t){return A.includes(e.transFullName(t))}(t)?"--":""}> ${q(t.target)} ${I(t)}\n\t\t\t\t\t\t${w&&(t.comment||!c&&d)?`\n\t\t\t\t\t\t\tnote ${w} on link\n${function(t,n){return m("editTransition",e.transFullName(t),n,t.comment,c,d)}(t,"comment")}\n\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t`:""}`;var i,a})).join("")}\n\t\t`}(function(t,e,n,r){return r&&!n?(0,s.W)(t,e):t}(U,e,d,b));return`\n\t\t@startuml\n\t\t'left to right direction\n\t\t${"dark"===y?"skinparam monochrome reverse":""}\n\t\thide empty description\n\t\t${a(h||!!j,j?p:u)}\n\t\t${!b||d||c?"":"left header Warning, showing as explicit state machine,\\nbut execution actually proceeds on the original state machine.\\nExplicit-specific function calls will not appear in history.\\nIf an history node or any other error is visible, then your state\\nmachine is not supported yet."}\n\n\t\t${$?G:`\n\t\t\tstate "${function(e){if(d&&!c){var n=encodeURIComponent(t.name);return`[[javascript:${l}editObject('${n}') ${e}]] [[javascript:${l}removeObject('${n}') &#9003;]]`}return e}(U.name)}" as ${(0,i.KL)(U.name)} {\n\t\t\t\t${G}\n\t\t\t}\n\t\t`}\n\t\t@enduml\n\t`}function m(t,e,n,r,i,a){if(!i&&a){const i=`[[javascript:${t}('${e}','${n}') edit]]`;return r?r.replace(/[^ \t\n]/,`${i} $&`):i}return r}const g={currentStateColor:"lightgreen",fireableTransitionColor:"green",noEventColor:"red",falseGuardColor:"red"};function f(t,e,n={}){const{raw:s=!0,forAnimation:g=!1,editing:f=!1,callPrefix:y="",hideLinks:b=!1,styleMode:$,hideOuterSMBoxes:E,displayedObjects:w=t.objects,displayedClasses:S=Object.values(t.classes||{}),objectCommentLocation:x="left",operationCommentLocation:O="left",propertyCommentLocation:T="left",showMethodsAsActivities:C=!1,showActorsAsObjects:A=!1,showProperties:M=!0,showDataTypes:j=!0,showNonDataTypes:P=!0,showEventPools:k=!0,showPorts:I,hideClasses:N,hidePackages:D,checkEvents:L,hideMethods:R,hideStateMachines:B,showEndNames:q,hideOperations:U,classDiagram:G,elementToMessage:F}=n,V=w.filter((e=>I||!t.isPort(e)));if(G){const z=Object.fromEntries(Object.entries(t.classes||{}).filter((([t,e])=>{var n;return S.includes(e)||(null===(n=e.ends)||void 0===n?void 0:n.every((t=>S.includes(t.type))))}))),J={};if(1===S.length)Object.assign(J,z);else for(const[tt,et]of Object.entries(z)){function nt(t){if((0,r.Xq)(t.packagePath)){let n=J;for(const r of t.packagePath){var e;(e=n)[r]??(e[r]={isPackage:!0,name:r,elements:{}}),n=n[r].elements}n[t.name]=t}else J[tt]=t}switch(Z(et)){case"Class":case"Interface":P&&nt(et);break;case"Enumeration":j&&nt(et);break;case"Association":P&&(J[tt]=et)}}const X=Q(J);return 0===Object.entries(z).length?X+'note "Nothing to show on this class diagram. You could try adding classifiers to your model." as emptyNote':F?X+`title ${_}`:X;function Z(t){return t.ends?"Association":t.literals?"Enumeration":t.isInterface?"Interface":"Class"}function Y(t,e){const n=null==F?void 0:F.get(t);return t.label?` : ${v(t.label,n)}`:n?` : ${v(e,n)}`:""}function Q(t){return`\n\t\t\t\t${"dark"===$?"skinparam monochrome reverse":""}\n\t\t\t\t'left to right direction\n\t\t\t\tskinparam classAttributeIconSize 0\n\t\t\t\tskinparam shadowing false\n\t\t\t\thide circle\n\t\t\t\thide empty members\n\t\t\t\t'hide fields\n\t\t\t\t${a(b||!!F,F?p:u)}\n\n\t\t\t\t${Object.entries(t).map((([t,e])=>{var n;return e.ends?P?(()=>{function n(t,e,n){return`${t.isNavigable?n:""}${e.isComposite?"*":""}`}function r(t){return t.multiplicity?`"${t.multiplicity}"`:""}const i=e.ends[0],a=e.ends[1];return`${i.type.name} ${r(i)} ${n(i,a,"<")}--${n(a,i,">")} ${r(a)} ${a.type.name}${Y(e,t)}`})():"":e.literals?j?`\n\t\t\t\t\t\t\tenum ${e.name} <<enumeration>> {\n\t\t\t\t\t\t\t\t${e.literals.map((t=>t.name)).join("\n")}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`:"":e.isPackage&&!D?`\n\t\t\t\t\t\t\tpackage ${t} {\n\t\t\t\t\t\t\t\t${Q(e.elements)}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`:P?`\n\t\t\t\t\t\t\t${e.isAbstract?"abstract":""} ${e.isInterface?"interface":"class"} "${v(t,null==F?void 0:F.get(e))}" as ${t}${e.isInterface?" <<interface>>":""}${(0,r.Xq)(e.supertypes)?` extends ${e.supertypes.map((t=>t.name)).join(", ")}`:""}${(0,r.Xq)(e.interfaces)?` implements ${e.interfaces.map((t=>t.name)).join(", ")}`:""}${(null===(n=e.stereotypes)||void 0===n?void 0:n.map((t=>`<<${t}>>`)).join(""))??""} {\n\t\t\t\t\t\t\t\t${M?Object.entries(e.propertyByName??{}).map((([t,e])=>`${e.private?"-":"+"}${t}${e.type?` : ${e.type}${(0,i.BV)(e)}`:""}`)).join("\n"):""}\n\t\t\t\t\t\t\t\t${U?"":Object.entries(e.operationByName??{}).map((([t,e])=>{var n;const a=null===(n=e.parameters)||void 0===n?void 0:n.some((t=>t.direction));return`${e.private?"-":"+"}${e.isStatic?"{static}":""}${v(t,null==F?void 0:F.get(e))}(${(e.parameters||[]).map((t=>`${a?t.direction?`**${t.direction}** `:"**in** ":""}${t.name}${t.type?` : ${t.type}${(0,i.BV)(t)}`:""}`)).join(", ")})${e.returnType?` : ${e.returnType}${(0,i.BV)(e)}`:""}${(0,r.Xq)(e.stereotypes)?" "+e.stereotypes.map((t=>`<<${t}>>`)).join(""):""}`})).join("\n")}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t${e.comments&&x?`\n\t\t\t\t\t\t\t\tnote ${x} of ${t}\n\t\t\t\t\t\t\t\t\t${e.comments.join("\n")}\n\t\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t\t`:""}\n\t\t\t\t\t\t\t${T?Object.entries(e.propertyByName||{}).filter((([t,e])=>(0,r.Xq)(e.comments))).map((([e,n])=>`\n\t\t\t\t\t\t\t\tnote ${T} of ${t}::${e}\n\t\t\t\t\t\t\t\t\t${n.comments.join("\n")}\n\t\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t\t`)).join("\n"):""}\n\t\t\t\t\t\t\t${O?Object.entries(e.operationByName||{}).filter((([t,e])=>(0,r.Xq)(e.comments))).map((([e,n])=>`\n\t\t\t\t\t\t\t\tnote ${O} of ${t}::${e}\n\t\t\t\t\t\t\t\t\t${n.comments.join("\n")}\n\t\t\t\t\t\t\t\tend note\n\t\t\t\t\t\t\t`)).join("\n"):""}\n\t\t\t\t\t\t`:""})).join("\n")}\n\t\t\t`}}if(N){var W=V.filter((e=>t.isActive(e))),K=W.map((r=>d(r,t,e,{...n,hideOuterSMBoxes:!1!==E&&1==w.length}))).join("");return W.forEach((t=>{H&&(K+=`${(0,i.KL)(H.name)} -[hidden]-> ${(0,i.KL)(t.name)}\n`),H=t})),""===K.trim()?K='note "Nothing to show on this diagram. You could try adding state machines to your model." as emptyNote':F&&(K+=`title ${_}`),K}{function rt(t){return!L||e.findMessage(t.name,t.class.name)}function it(t){return encodeURIComponent(`${t.class.name}.${t.name}`)}function at(t,e){let n=e.returnType?` : ${e.returnType}${(0,i.BV)(e)}`:"";return!s&&$t(t,e)&&(n=` [[javascript:${y}editOperationPart('${it(e)}','returnType') ${n||": <returnType>"}]]`),n}function st(t,e){var n;const r=null===(n=e.parameters)||void 0===n?void 0:n.some((t=>t.direction));let a=(e.parameters||[]).map((t=>"string"==typeof t?t:`${r?t.direction?`**${t.direction}** `:"**in** ":""}${t.name}${t.type?` : ${t.type}${(0,i.BV)(t)}`:""}`)).join(", ");return!s&&$t(t,e)&&(a=`[[javascript:${y}editParameters('${it(e)}') ${a||"<params>"}]]`),a}function ot(t,e){let n=`(${st(t,e)})${at(t,e)}`;const i=null==F?void 0:F.get(e.originalOperation),a=v(e.name,i);return n=$t(t,e)&&!s?`[[javascript:${y}editOperation('${it(e)}') ${a}]]${n} [[javascript:${y}removeOperation('${it(e)}') &#9003;]]`:rt(e)&&!s?`[[javascript:${y}callOperation('${it(e)}')${e.method?`{${(0,r.uB)(e.method).replace(/<U\+007B>/g,"{")}}`:""} ${a}]]${n}`:`${a}${n}`,n=`${e.private?"-":"+"}${n}`,n}function ct(t){return(0,i.KL)(t).replace(/\./,"__")}function lt(t){const e=!s&&f?` [[javascript:${y}removeObject('${t.name}') &#9003;]]`:"",n=t.class&&!(t.isActor&&t.class===t.name),r=null==F?void 0:F.get(t),i=pt(v(t.name,r));return n||f?`"${i} : ${ut(t)}${e}" as ${ct(t.name)}`:`"${i}${e}" as ${ct(t.name)}`}function ut(t){return!s&&f?`[[javascript:${y}editObjectProperty('${t.name}','class') ${t.class||"<class>"}]]`:t.class}function pt(t){return s?t:f?`[[javascript:${y}editObject('${t}') ${t}]]`:`[[javascript:${y}setSender('${encodeURIComponent(t)}') ${t}]]`}function _t(e,n){return r=>{var i=r;return s||f||(!L||!t.isActive(e)&&e.isActor)&&(i=`[[javascript:${y}callOperation('${n.name}.${i.replace(/ /g,"%20")}','${e.name}') ${i}]]`),i}}function dt(e){var n;const r=`<<[[javascript:${y}setActor('${e.name}',${!e.isActor}) make${e.isActor?"Object":"Actor"}]]>>`;let i="";return e.isActor&A&&(i+="<<actor>>"),t.isActive(e)?i+=f&&!s?`<<[[javascript:${y}makePassive('${e.name}') makePassive]]>>${r}`:e.isActor&&!A?"":"<<active>>":f&&!s&&(i+=`<<[[javascript:${y}makeActive('${e.name}') makeActive]]>>${r}`),e.isObserver?i+=f&&!s?`<<[[javascript:${y}makeNonObserver('${e.name}') makeNonObserver]]>>`:e.isActor&&!A?"":"<<observer>>":f&&!s&&(i+=`<<[[javascript:${y}makeObserver('${e.name}') makeObserver]]>>`),i+=(null===(n=e.stereotypes)||void 0===n?void 0:n.map((t=>`<<${t}>>`)).join(""))??"",i}function mt(t,e){if(U||R)return"";var n=e.method;return $t(t,e)&&!s?n=`[[javascript:${y}editMethod('${it(e)}') ${n?(0,r.uB)(n):"<add method>"}]]`:n&&C?n=`\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t${h(c.E2.parse(n))}\n\t\t\t\t\t\t}}\n\t\t\t\t\t`:n&&(n=n.replace(/__/g,"~__")),n&&(n=`\n\t\t\t\t\t\tnote right of ${ct(e.class.name)}::${e.name}\n${n}\n\t\t\t\t\t\tend note`),n}function gt(){const e=[];return V.flatMap((n=>t.getConnectors(n).filter((r=>!e.includes(r)&&t.isPort(t.getOtherEnd(r,n)))).map((i=>{var a,s;const o=t.navigateThroughPorts(n,t.getOtherEnd(i,n));Array.prototype.push.apply(e,o.traversedConnectors);const c=(0,r.Z$)(o.traversedConnectors),l=[i.endNames?i.endNames[i.ends.indexOf(n)]:" ",c.endNames?c.endNames[c.ends.indexOf(o.target)]:" "];return{name:"VIRTUAL CONNECTOR",ends:[n,o.target],endNames:l,...1===o.traversedConnectors.length?{showAs:"(0",possibleMessages:{forward:1===c.ends.indexOf(o.target)?null===(a=c.possibleMessages)||void 0===a?void 0:a.forward:null===(s=c.possibleMessages)||void 0===s?void 0:s.reverse}}:{}}}))))}function ft(t){return t.ends.every((t=>V.includes(t)))}function ht(t,e){return!s&&bt(t,e)?`[[javascript:${y}editPropertyName('${t.name}','${e}') ${e}]]`:e}function yt(t,e,n){return!s&&bt(t,n)?` : [[javascript:${y}editPropertyPart('${t.name}','${n}','type') ${e.type?e.type:"<type>"}]]`:e.type?` : ${e.type}${(0,i.BV)(e)}`:""}function vt(t,e){return!s&&bt(t,e)?` [[javascript:${y}removeProperty('${t.name}','${e}') &#9003;]]`:""}function bt(t,e){var n;return f&&(null===(n=t.propertyByName)||void 0===n?void 0:n[e])}function $t(t,e){var n;return f&&(null===(n=t.operationByName)||void 0===n?void 0:n[e.name])}function Et(t){return t.match(/\(.*\)/)?t:t+"()"}var H;return K="allowmixing\n"+V.map((i=>{function a(){return t.isActive(i)&&!B?o.W`
						note right of ${ct(i.name)}
						{{
							${d(i,t,e,n)}
						}}
						end note
					`:""}function c(t){return x&&(t.comment||!s&&f)?o.W`
					note ${x} of ${ct(t.name)}
						${m("editObjectProperty",t.name,"comment",t.comment,s,f)}
					end note
				`:""}if(i.isActor&&!A)return o.W`
					actor ${lt(i)} ${dt(i)}
					${a()}
					${c(i)}
				`;{function g(t){return t.replace(/^__EMI__/,"")}function h(t){try{return t.valueOfProperty?t.valueOfProperty:JSON.stringify(t)}catch(t){return"<error>"}}function b(e){var n;return"string"==typeof e.class?null===(n=t.classes)||void 0===n?void 0:n[e.class]:e.class}const $=Object.fromEntries(Object.entries(e.getSlots(i)||{}).map((([t,e])=>[g(t),e]))),E=M?{...(_=b(i),_&&Object.fromEntries(function t(e){var n;return[...Object.entries((null==e?void 0:e.propertyByName)??{}),...(null==e||null===(n=e.supertypes)||void 0===n?void 0:n.flatMap(t))??[]]}(_))),...i.propertyByName}:{},w=Object.values({...(0,l.B8)(b(i)),...i.operationByName}).map((t=>({...t,class:i,originalOperation:t})));let S,C;var u,p;k&&(S=null===(u=e.getEventPool)||void 0===u?void 0:u.call(e,i),C=null===(p=e.getMatchingEtherMessages)||void 0===p?void 0:p.call(e,i),C=(0,r.Xq)(C)?C:void 0);const j=f||(0,r.Xq)(w)&&!U,P=f||Object.keys(E).length+Object.keys($).filter((t=>!t.match(/__.*__/))).length>0,I=j||P;let N=t.isPort(i)?`circle " " as ${ct(i.name)}`:o.W`
						class ${lt(i)} ${dt(i)} {
							${Object.entries(E).map((([t,e])=>o.W`
									${e.private?"-":"+"} ${v(ht(i,t),null==F?void 0:F.get(e))}${yt(i,e,t)}${t in $?` = ${h($[t])}`:""}${vt(i,t)}
								`))}
							${Object.entries($).filter((([t,e])=>!(t in E))).map((([t,e])=>t.match(/__.*__/)?"":`${t} = ${h(e)}`)).filter((t=>t))}
							${f&&!s?`[[javascript:${y}addProperty('${i.name}') ADD]] a property`:""}
							${P&&j?"---":""}
							${U?"":w.map((t=>`${ot(i,t)}`))}
							${f&&!s?`[[javascript:${y}addOperation('${i.name}') ADD]] an operation()`:""}
							${I&&(S||C)?"---":""}
							${S?o.W`
								**Event pool:** {method}
								${S.map((t=>`• ${Et(t.signature)}`))}
							`:""}
							${C?o.W`
								**Ether:** {method}
								${C.map((t=>`• ${Et(t.signature)}`))}
							`:""}
						}
						${w.map((t=>mt(i,t))).join("")}
						${c(i)}
						${T?Object.entries(E).filter((([t,e])=>e.comments||!s&&bt(i,t))).map((([t,e])=>{var n;return o.W`
							note ${T} of ${ct(i.name)}::${t}
								${m("editPropertyPart",`${i.name}','${t}`,"comment",null===(n=e.comments)||void 0===n?void 0:n[0],s,f)}
							end note
						`})):""}
						${O?w.filter((t=>t.comments||!s&&$t(i,t))).map((t=>{var e;return o.W`
							note ${O} of ${ct(i.name)}::${t.name}
								${m("editOperationPart",it(t),"comment",null===(e=t.comments)||void 0===e?void 0:e[0],s,f)}
							end note
						`})):""}
						${a()}
					`;if(!D)for(const L of i.packagePath??[])N=o.W`
							package ${L} {
								${N}
							}
						`;return N}var _})).join("\n")+"\n"+(t.connectors||[]).filter(ft).concat(I?[]:gt().filter(ft)).map((e=>{var n,i,a="",s=null===(n=e.possibleMessages)||void 0===n?void 0:n.forward,c=null===(i=e.possibleMessages)||void 0===i?void 0:i.reverse,l=(0,r.Xq)(c);a="";const u=q&&e.endNames?`"${e.endNames[0]}" `:"",p=q&&e.endNames?` "${e.endNames[1]}"`:"";let _="",d="",m="";if(e.type){var g;const n=null===(g=t.classes)||void 0===g?void 0:g[e.type];if(n){const t=n.ends[0],r=n.ends[1];let i,a;e.ends[0].class===t.type.name||e.ends[1].class===r.type.name?(i=t,a=r):(i=r,a=t),i.isComposite?d+="*":a.isNavigable&&(d+=">"),a.isComposite?_+="*":i.isNavigable&&(_+="<"),m=n.label?` : ${n.label}`:""}}const f=null==F?void 0:F.get(e);return(0,r.Xq)(s)&&(a+=o.W`
					${ct(e.ends[0].name)} ${u}${_}-${l?"[#transparent]":""}${e.showAs??""}-${d}${p} ${ct(e.ends[1].name)} : > ${v(s.map(_t(e.ends[0],e.ends[1])).join("\\n"),f,"\\n")}${m}
				`),l&&(a=a?a+"\n":"",a+=o.W`
					${ct(e.ends[0].name)} ${u}${_}--${d}${p} ${ct(e.ends[1].name)} : < ${v(c.map(_t(e.ends[1],e.ends[0])).join("\\n"),f,"\\n")}${m}
				`),""==a&&(a+=o.W`
					${ct(e.ends[0].name)} ${u}${_}-${e.showAs??""}-${d}${p} ${ct(e.ends[1].name)}${m}
				`),a})).join("\n"),t.connectors&&0!=t.connectors.length||V.forEach((t=>{H&&(K+=`${ct(H.name)} -[hidden]-> ${ct(t.name)}\n`),H=t})),o.W`
			${"dark"===$?"skinparam monochrome reverse":""}
			'left to right direction
			skinparam classAttributeIconSize 0
			skinparam shadowing false
			hide circle
			hide empty members
			'hide fields
			${a(b||!!F,F?p:u)}

			${F?`title ${_}`:""}

			${K}
		`}}function h(t){return o.W`
		start
		${t.map((function t(e){switch(String(e.type)){case"block":return o.W`
					${e.statements.map(t)}
				`;case"ifStat":return o.W`
						if (${(0,c.Pz)(e.condition)}) then (true)
							${t(e.thenStat)}
						else (false)
							${e.elseStat?t(e.elseStat):""}
						endif
					`;case"doStat":return o.W`
						repeat\\
							${t(e.statement)}
						repeat while (${(0,c.Pz)(e.condition)}) is (true)
						-> false;
					`;case"whileStat":return o.W`
						while (${(0,c.Pz)(e.condition)}) is (true)
							${t(e.statement)}
						endwhile (false)
					`;default:return o.W`:${(0,c.Pz)(e).replace(/\\n/g,"\\\\n").replace(/\n/g,"\\n").replace(/__/g,"~__")};`}}))}
		stop
	`}function y(t){return h(c.E2.parse(t.method))}function v(t,e,n=""){return e?(t||(t="// placeholder"),`${n}[[javascript:{${e}} ${t}&#8203;]]`):t}},850:(t,e,n)=>{"use strict";function r(t){var e=t.replace(/ /g,"_SPACE_");return t.length>1&&(e=e.replace(/\[/g,"_LSQUARE_").replace(/]/g,"_RSQUARE_")),e}function i(t){const e=t.multiplicity;if(e){const t=e.lower??0,n=e.upper;return 0===t&&n<0?"[*]":t===n?1===t?"":`[${n}]`:`[${t}..${n<0?"*":n}]`}return""}n.d(e,{BV:()=>i,KL:()=>r})},32:(t,e,n)=>{"use strict";n.d(e,{u:()=>s});var r=n(991),i=n(625),a=n(687);function s(t,e,{origin:n,scale:s,hideSets:o,hideStates:c,showPseudostateInvariants:l,hideLinks:u,participants:p=[],styleMode:_,showTransitions:d}){const m=p;let g=-1;function f(){const t=g>0&&!w?`after="msg[${g-1}]"`:"";return w=!1,t}function h(t){return(t+"").replace(/"/g,"&quot;")}function y(t){return`participant.${"string"==typeof t?t:t.name}`}function v(t){return t.displaySignature??t.signature}const b={},$=[],E={};let w=!1,S="";return(0,a.R)(r.W`
		${m.map(((t,e)=>r.W`
				<use id="${y(t)}" xlink:href="#${t.isActor?"actor":"object"}" ${0==e?'x="100" y="0"':`after="${y(m[e-1])}"`}>
					<param name="name" value="${t.name} : ${t.class||""}"/>
				</use>
			`))}


		${t.flatMap(((t,n)=>{const a=[];d&&t.cause.match(/^transition:/)&&(g++,a.push(r.W`
					<use	id="msg[${g}]"
						xlink:href="#note"
						${f()}
						${S}
					>
						<param name="on" value="${y(t.activeObject)}"/>
						<param name="note" value="${t.cause}"/>
						<param name="title" value='
Watch expressions after:
							${JSON.stringify(t.watchExpressions,null,2)}
Configuration before:
							${JSON.stringify(engine.treeifyConfig(t.configuration),null,2)}'/>
					</use>
				`)),"PlantUML:loop"===t.cause&&(g++,a.push(r.W`
					<use	id="msg[${g}]"
						xlink:href="#fragment"
						${f()}
					>
						<param name="on" value="${m.map(y).join(",")}"/>
						<param name="label" value="loop"/>
						<param name="condition" value=" "/>
					</use>
				`),S=`parent="msg[${g}]"`,w=!0);const s=a.concat((t.messages||[]).map(((e,n)=>{let a="";return v(e).match(/^after\(/)?(g++,a+=r.W`
						<use	id="msg[${g}]"
							xlink:href="#after"
							${f()}
							${S}
						>
							<param name="on" value="${m.map(y).join(",")}"/>
							<param name="signature" value="${v(e)}"/>
						</use>
					`,a):"set"===e.type?(o||(e.source===e.target?(g++,a+=r.W`
							<use	id="msg[${g}]"
								xlink:href="#set"
								${f()}
								${S}
							>
								<param name="on" value="${y(e.source)}"/>
								<param name="signature" value="${h(v(e))}"/>
							</use>
						`):(g++,a+=r.W`
							<use	id="msg[${g}]"
								xlink:href="#direct"
								${f()}
								${S}
								from="${y(e.source)}"
								to="${y(e.target)}"
							>
								<param name="signature" value="${h(v(e))}"/>
							</use>
						`)),a):(e.sentAt==t&&"["!==e.source&&(g++,e.callId=g,a+=r.W`
							<use	id="msg[${g}]"
								xlink:href="#call"
								${f()}
								${S}
							>
								<param name="on" value="${y(e.source)}"/>
							</use>
						`,$.push(g),E[g]=v(e)),e.receivedAt==t&&("callId"in e?(g++,a+=r.W`
								<use	id="msg[${g}]"
									xlink:href="#${e.source===e.target?"self":""}accept"
									${f()}
									call="msg[${e.callId}]"
									${S}
								>
									<param name="on" value="${y(e.target)}"/>
									<param name="signature" value="${h(v(e))}"/>
								</use>
							`,(0,i.Od)($,e.callId),e.returnedValue&&(g++,a+=r.W`
									<use	id="msg[${g}]"
										xlink:href="#direct"
										${f()}
										${S}
										from="${y(e.target)}"
										to="${y(e.source)}"
										class="dashed"
									>
										<param name="signature" value="${h(e.returnedValue)}"/>
									</use>
								`)):(g++,a+=r.W`
								<use	id="msg[${g}]"
									xlink:href="#found"
									${f()}
									leftmost="${y(m[0].name)}"
									${S}
								>
									<param name="on" value="${y(e.target)}"/>
									<param name="signature" value="${h(v(e))}"/>
								</use>
							`)),a)})));if(t.activeObject){const u=t.activeObjects||[t.activeObject];for(const p of u){const _=p.name;function x(t){if(e.isActive(p)){const e=t.configurationAfter.currentState[_];if(!(0,i.Z$)(e).kind||l)return e.map((t=>t.name)).join(".")}}if(!c){const O=x(t);!O||0!=n&&O===b[_]||(g++,s.push(r.W`
								<use	id="msg[${g}]"
									xlink:href="#invariant"
									${f()}
									${S}
								>
									<param name="on" value="${y(_)}"/>
									<param name="invariant" value="${h(O)}"/>
									<param name="link" value="javascript:backTo(${n+1});"/>
								</use>
							`),b[_]=O)}}}return s})).join("\n")}
		${$.map((t=>(g++,r.W`
				<use	id="msg[${g}]"
					xlink:href="#unaccepted"
					${f()}
					call="msg[${t}]"
					rightmost="${y((0,i.Z$)(m))}"
					${S}
				>
					<param name="signature" value="${h(E[t])}"/>
				</use>
			`))).join("\n")}
	`,{origin:n,scale:s,hideLinks:u,styleMode:_})}},171:(t,e,n)=>{"use strict";n.d(e,{F:()=>i});var r=n(625);function i(t){var e,n;return t.operations=[],Object.entries(t.operationByName||{}).forEach((([e,n])=>{n&&(n.name=e,n.class=t,t.operations=t.operations||[],t.operations.push(n))})),t.objects||t.connectorByName?(t.objects||(t.objects=[]),"object"==typeof t.classes&&(null===(e=(n=Object.values(t.classes)).forEach)||void 0===e||e.call(n,(t=>{i(t)}))),t.objects.forEach((t=>{i(t)})),t.connectors=[],(0,r.LI)(t.connectorByName,((e,n)=>{t.connectors=t.connectors||[],t.connectors.push(n),n.name=e,n.ends||(n.ends=e.split("2")),n.ends=n.ends.map((e=>{var n=e;return"string"==typeof e&&((n=t.objects.find((t=>t.name==e)))||(n={name:e},t.objects.push(n))),n}))})),t):(t.states=[],t.transitions=[],Object.keys(t.stateByName||{}).forEach((e=>{var n=t.stateByName[e];function r(e){if("string"==typeof e){var n=t.transitionByName[e];return n||(n={},t.transitionByName[e]=n),n}return e}n.region=t,i(n),n.name=e,n.incoming=(n.incoming||[]).map(r),n.incoming.forEach((t=>{t.target=n})),n.outgoing=(n.outgoing||[]).map(r),n.outgoing.forEach((t=>{t.source=n})),t.states.push(n),Object.entries(n.internalTransitions||{}).forEach((([t,e])=>{t=`__internal__${t}__`,e.region=n,e.isInternal=!0,e.source=n,e.target=n,e.name=t,n.transitionByName=n.transitionByName||{},n.transitionByName[t]=e}))})),Object.keys(t.transitionByName||{}).forEach((e=>{var n=t.transitionByName[e];function r(r,i){var a=n[r];if(!a){const o=/^(.+)2(.+?)(_[0-9]+)?$/;a="source"===r?e.replace(o,"$1"):e.replace(o,"$2")}if("string"==typeof a){let c=a.split(".");function l(e){var n=void 0;return c.forEach((e=>{n=(n||t).stateByName[e]})),n}var s=l();s||(s={name:a,states:[],transitions:[],region:t},t.stateByName[a]=s,t.states.push(s)),n[r]=s,s[i]||(s[i]=[]),c.length>1?s[i].unshift(n):s[i].push(n)}}n.isInternal||(n.name=e,t.transitions.push(n),n.region=t,r("source","outgoing"),r("target","incoming"))})),t)}},416:(t,e,n)=>{"use strict";n.d(e,{E2:()=>r,x6:()=>i}),n(582);const r=peg.generate('\n\t{\n\t\tconst refSpans = new Map();\n\t\tconst map = new Map();\n\t\tlet index = 0;\n\t\tconst stack = [];\n\t\tconst toResolve = new Map();\n\t\tconst activations = [];\n\t\tlet parts;\n\t\tfunction store(id, to) {\n\t\t\tif(id) {\n\t\t\t\tmap.set(id, {index, to});\n/*\n\t\t\t\tif(toResolve.has(id)) {\n\t\t\t\t\tconst objs = toResolve.get(id);\n\t\t\t\t\tfor(const obj of objs) {\n\t\t\t\t\t\tobj.obj[obj.idrefAttr] = index;\n\t\t\t\t\t}\n\t\t\t\t}\n*/\n\t\t\t}\n\t\t}\n\t\t// for forward references\n\t\tfunction resolveLater(id, to) {\n\t\t\tif(!parts.has(to)) {\n\t\t\t\tlet c = toResolve.get(to);\n\t\t\t\tif(!c) {\n\t\t\t\t\tc = [];\n\t\t\t\t\ttoResolve.set(to, c);\n\t\t\t\t}\n\t\t\t\tc.push(index);\n\t\t\t}\n\t\t}\n\t\tfunction enter() {\n\t\t\tstack.push(index);\n\t\t\tindex = 0;\n\t\t}\n\t\tfunction leave() {\n\t\t\tindex = stack.pop();\n\t\t}\n\t\tfunction gates(id) {\n\t\t\tconst calls = toResolve.get(id);\n\t\t\treturn calls?.map(i => ({name: "??", accept: i}));\n\t\t}\n\t\tconst self = this;\n\t\tfunction unsupportedItem(item, message) {\n\t\t\tconst loc = location();\n\t\t\tconsole.log(`${self.humanLocation ? `${self.humanLocation}: ` : ""}Line ${loc.start.line}, column ${loc.start.column}: ${message}`)\n/*\n\t\t\tindex++;\n\t\t\treturn item;\n/*/\n\t\t\treturn undefined;\n/**/\n\t\t}\n\t}\n\tstart =\tNL* title:(_ "title" _ title:REST NL+ {return title;})?\n\t\tlifelines:(lifelines:lifeline* {parts = new Set(lifelines); return lifelines;})\n\t\tevents:event* _\n\t\t{return {title, lifelines: lifelines.map(e => e.name), events: events.filter(e => e),\n\t\t\t//toResolve,\n\n\t\t\t// used by CLILoadModel.js/createDummyModel\n\t\t\tobjects: self.keepObjects ? lifelines : undefined,\n\t\t\trefSpans: self.keepRefSpans ? refSpans : undefined,\n\t\t};}\n\n\tlifeline = _ isActor:("actor" {return true;} / "participant" {return false;}) _ (STRING _ "as" _)? name:ID _ NL+ {return {isActor, name};}\n\n\tevent =\n\t\t\t_ id:(id:ID _ ":" _ {return id;})?\n\t\t\tfrom:ID _ "-" mode:(">" / "?") _ to:ID _\n\t\t\taction:(e:("++" / "--" / "**" / "!!") _ {return e;})?\n\t\t\t":" _ call:(sig / call:REST {return {call};}) NL+\n\t\t\tactivate:(_ "activate" _ act:ID &{\n\t\t\t\treturn mode === ">" && act === to;\n\t\t\t} _ NL+)?\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tstore(id, to); resolveLater(id, to);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(activate || action === "++") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactivations.push(index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst ret = {arguments: call.args || undefined, target: call.target || undefined, from, to: to};\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(mode === "?") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tret.call = call.call;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tret.type = "call";\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tret.accept = call.call;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tret.type = "autoAcceptCall";\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn ret;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t/\t_ from:ID _ "--\x3e" _ to:ID _ ":" _ returnValue:REST NL+\t\t\t{return unsupportedItem({returnValue, from, to}, `warning: ignoring return from ${from} to ${to}; try using PlantUML\'s return syntax or AnimUML\'s returning syntax.`);}\n\t\t\t\t// TODO: recognize this dotted arrow right after deactivation\n\t\t/\t_ "returning" _ returningCall:ID _ ":" _ returnValue:REST NL+\t\t{index++; return {type: "return", returningCall: map.get(returningCall).index, return: returnValue};}\n\t\t/\t_ fromGate:("[" _ e:ID? _ {return e;})? "->" _ to:ID _ ":" _ call:(sig / call:REST {return {call};}) NL+\n\t\t\tactivate:(_ "activate" _ act:ID &{\n\t\t\t\treturn act === to;\n\t\t\t} _ NL+)?\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(activate) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactivations.push(index);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {type: "found", arguments: call.args || undefined, call: call.call, fromGate: fromGate ?? "??", to};\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t/\t_ "activate" _ activate:ID _ NL+\t\t\t\t\t{activations.push("UNKNOWN"); return unsupportedItem({activate}, `warning: ignoring activation of ${activate}, which does not immediately follow a call message.`);}\n\t\t/\t_ "deactivate" _ deactivate:ID _ NL+\t\t\t\t\t{activations.pop(); return unsupportedItem({deactivate}, `warning: ignoring deactivation of ${deactivate}; try returning the call instead.`);}\n\t\t/\t_ id:(id:ID _ ":"_ {return id;})?\n\t\t\t"ref" _ "over" _ h:ID t:(_ "," _ e:ID {return e;})* _\n\t\t\taccepting:("accepting" _ gh:gate gt:("," _ e:gate {return e;})* {return [gh, ...gt]})?\n\t\t\t":" _ ref:REST NL+\n\t\t\t\t\t\t\t\t\t\t\t\t{store(id); index++; refSpans.set(ref, [h, ...t]); return {type: "ref", ref, gates: [...accepting ?? [], ...gates(id) ?? []]};}\n\t\t/\t_ "loop" _ condition:loopCondition (NL+ {enter()}) loopBody:event* _ "end" _ NL+\t{leave(); index++; return {type: "loop", ...condition, loopBody: loopBody.filter(e => e)};}\n\t\t/\t_ type:("alt" / "par") _ h:(condition:REST (NL+ {enter()}) altBody:event*\t\t{leave(); return {type: "alternative", condition: condition ? condition : undefined, altBody: altBody.filter(e => e)};})\n\t\t\tt:(_ "else" _ condition:REST (NL+ {enter()}) altBody:event*\t\t{leave(); return {type: "alternative", condition, altBody: altBody.filter(e => e)};})*\n\t\t\t_ "end" _ NL+\t\t\t\t\t\t\t\t{index++; return {type, alternatives: [h, ...t]};}\n\t\t/\t_ "create" _ create:ID _ NL+\t\t\t\t\t\t{index++; return {create};}\n\t\t/\t_ "..." _ "after" _ "(" _ after:[^\\n)]* ")" _ "..." "."* NL+\t\t{index++; return {type: "after", after: after.join("")};}\n\t\t/\t_ "accept" _ accept:ID _ NL+\n\t\t\tactivate:(_ "activate" _ to:ID &{\n\t\t\t\treturn to === map.get(accept).to;\n\t\t\t} _ NL+)?\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst call = map.get(accept).index;\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(activate) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactivations.push(call);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn {type: "accept", accept: call};\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t/\t_ "return" _ returnValue:REST NL+\t\t\t\t\t{index++; return {type: "return", returningCall: activations.pop(), return: returnValue};}\n\n\tgate\t=\taccept:ID _ "from" _ name:ID _\t\t\t\t\t\t{return {name, accept: map.get(accept).index};}\n\n\tloopCondition\t=\tupper:INT _ "times" _\t\t\t\t\t\t{return {lower: upper, upper};}\n\t\t\t/\tcondition:REST\t\t\t\t\t\t\t{return {condition};}\n\n\tREST = s:[^\\n]*\t\t\t\t\t\t\t\t\t{return s.join("");}\n\tID = h:[A-Za-z_]t:[A-Za-z0-9_]*\t\t\t\t\t\t\t\t{return h + t.join("");}\n\tSTRING = \'"\' [^"]* \'"\'\n\tsig =\ttarget:(e:[^(\\n=]+ _ "=" _ {return e.join("");})? call:[^(\\n]* _ "("\n\t\t\targs:(_ args:(h:arg t:(_ "," _ arg:arg {return arg;})* {return [h, ...t];}) {return args;})?\n\t\t")"\t\t\t\t\t\t\t\t\t\t{return {call: call.join(""), args: args ?? [], target: target?.trim()};}\n\targ = arg:[^,)]+ {return arg.join("");}\n\tNL = _ COMMENT? "\\r"? "\\n"\n\t_ = [ \\t]*\n\tCOMMENT = "\'" REST / "/\'" (!"\'/" .)* "\'/"\n\tINT\t= d:[0-9]+\t\t\t\t\t\t\t\t\t\t{return Number.parseInt(d.join(""));}\n');function i(t){return"lifelines"in t?"interaction":"fromGate"in t?"found":"call"in t||"call"in t?"call":"accept"in t?"string"==typeof t.accept?"autoAcceptCall":"accept":"returningCall"in t?"return":"state"in t?"state":"after"in t?"after":"ref"in t?"ref":"alternatives"in t?"alt":"loopBody"in t?"loop":"altBody"in t?"alternative":void 0}},113:(t,e,n)=>{"use strict";n.d(e,{o:()=>a});var r=n(687);n(279);var i=n(625);function a(t,e,{origin:n,interactionConfig:a,participants:s=[],styleMode:o}){function c(t){return`participant.${t}`}function l(t,e){return t[e.accept]}function u(t){const e=new Set(t.flatMap((e=>p(t,e))));return g.filter((t=>e.has(t)))}function p(t,n){if("fromGate"in n)return[n.to];if("call"in n)return[n.from];if("accept"in n)return"string"==typeof n.accept?[n.from,n.to]:[l(t,n).to];if("state"in n)return[n.object];if("loopBody"in n)return u(n.loopBody);if("altBody"in n)return u(n.altBody);if("alternatives"in n)return u(n.alternatives);if("ref"in n){var r;const t=u((null===(r=e.interactions[n.ref])||void 0===r?void 0:r.events)??[]),i=g.filter((e=>t.includes(e)));return 0==i.length?g:i}if("after"in n||"ref"in n||"returningCall"in n)return[];console.log("Unsupported event: ",n)}function _(t,e){return p(t,e)}function d(t,e,n,r,i){function s(){return`event[${r}${n-1}]`}function o(){return n>0?`after="${s()}"`:""}function u(t){return function(t){const e=`${r}${n}`;return a&&a[t].some((({eventRef:t})=>(console.log(t.join("."),"===",e),t.join(".")===e)))}(t)?"<param name='cursor' value='yes'/>":""}function m(t=""){return`event[${r}${n}${t}]`}function y(t){const e=m(t);return h=e,`id="${e}"`}function v(){return i?`parent="${i}"`:""}if("fromGate"in e){const b=e.target?`${e.target} = `:"";return`\n\t\t\t\t<use\t${y()}\n\t\t\t\t\txlink:href="#found"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${v()}\n\t\t\t\t\tleftmost="${c(g[0])}"\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${c(e.to)}"/>\n\t\t\t\t\t<param name="signature" value="${b}${e.call}(${e.arguments||[]})"/>\n\t\t\t\t\t<param name="circle" value="none"/>\n\t\t\t\t\t${u(e.from)}\n\t\t\t\t</use>\n\t\t\t`}if("call"in e){const $=m();return f.set($,e),`\n\t\t\t\t<use\t${y()}\n\t\t\t\t\txlink:href="#call" \n\t\t\t\t\t${o()}\n\t\t\t\t\t${v()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${c(e.from)}"/>\n\t\t\t\t\t${u(e.from)}\n\t\t\t\t</use>\n\t\t\t`}if("accept"in e){let E,w,S,x,O,T="";return"string"==typeof e.accept?(E=e,w=`${m()}.call`,S=`\n\t\t\t\t\t<use\tid="${w}"\n\t\t\t\t\t\txlink:href="#call" \n\t\t\t\t\t\t${o()}\n\t\t\t\t\t\t${v()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<param name="on" value="${c(e.from)}"/>\n\t\t\t\t\t\t${u(e.from)}\n\t\t\t\t\t</use>\n\t\t\t\t`,x=w,O=E.accept,e.target&&(T=`${e.target} = `)):(E=l(t,e),w=`event[${r}${e.accept}]`,S="",x=s(),O=E.call,f.delete(w),E.target&&(T=`${E.target} = `)),`\n\t\t\t\t${S}\n\t\t\t\t<use\t${y()}\n\t\t\t\t\txlink:href="#${E.to===E.from?"selfaccept":"accept"}"\n\t\t\t\t\tafter="${x}"\n\t\t\t\t\tcall="${w}"\n\t\t\t\t\t${v()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${c(E.to)}"/>\n\t\t\t\t\t<param name="signature" value="${T}${O}(${E.arguments||[]})"/>\n\t\t\t\t\t${u(E.to)}\n\t\t\t\t</use>\n\t\t\t`}if("returningCall"in e){const C=t[e.returningCall];return C.from===C.to?`\n\t\t\t\t\t<use\t${y("call")}\n\t\t\t\t\t\txlink:href="#call"\n\t\t\t\t\t\t${o()}\n\t\t\t\t\t\t${v()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<param name="on" value="${c(C.to)}"/>\n\t\t\t\t\t</use>\n\t\t\t\t\t<use\t${y()}\n\t\t\t\t\t\txlink:href="#selfaccept"\n\t\t\t\t\t\tafter="${m("call")}"\n\t\t\t\t\t\tcall="${m("call")}"\n\t\t\t\t\t\t${v()}\n\t\t\t\t\t\tclass="dashed"\n\t\t\t\t\t>\n\t\t\t\t\t\t<param name="on" value="${c(C.from)}"/>\n\t\t\t\t\t\t<param name="signature" value="${e.return}"/>\n\t\t\t\t\t\t${u(C.to)}\n\t\t\t\t\t</use>\n\t\t\t\t`:`\n\t\t\t\t\t<use\t${y()}\n\t\t\t\t\t\txlink:href="#direct"\n\t\t\t\t\t\t${o()}\n\t\t\t\t\t\t${v()}\n\t\t\t\t\t\tfrom="${c(C.to)}"\n\t\t\t\t\t\tto="${c(C.from)}"\n\t\t\t\t\t\tclass="dashed"\n\t\t\t\t\t>\n\t\t\t\t\t\t<param name="signature" value="${e.return}"/>\n\t\t\t\t\t\t${u(C.to)}\n\t\t\t\t\t</use>\n\t\t\t\t`}if("state"in e)return`\n\t\t\t\t<use\t${y()}\n\t\t\t\t\txlink:href="#invariant"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${v()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${c(e.object)}"/>\n\t\t\t\t\t<param name="invariant" value="${e.state}"/>\n\t\t\t\t\t${u(e.object)}\n\t\t\t\t</use>\n\t\t\t`;if("after"in e)return`\n\t\t\t\t<use\t${y()}\n\t\t\t\t\txlink:href="#after"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${v()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${g.map(c)}"/>\n\t\t\t\t\t<param name="signature" value="after(${e.after})"/>\n\t\t\t\t\t${u(e.object)}\n\t\t\t\t</use>\n\t\t\t`;if("ref"in e){const A=p(t,e);return`\n\t\t\t\t<use\t${y()}\n\t\t\t\t\txlink:href="#fragment"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${v()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${A.map(c)}"/>\n\t\t\t\t\t<param name="label" value="ref"/>\n\t\t\t\t\t<param name="condition" value=" "/>\n\t\t\t\t</use>\n\t\t\t\t<use\tid="${m()}.text"\n\t\t\t\t\txlink:href="#textcompartment"\n\t\t\t\t\tparent="${m()}"\n\t\t\t\t>\n\t\t\t\t\t<param name="label" value="${e.ref}"/>\n\t\t\t\t</use>\n\t\t\t\t${(e.gates||[]).map(((e,n)=>{const i=t[e.accept],a=`event[${r}${e.accept}]`;f.delete(a);const s=i.target?`${i.target} = `:"";return`\n\t\t\t\t\t\t<use\t${y(`.gate.${n}`)}\n\t\t\t\t\t\t\txlink:href="#actualgate"\n\t\t\t\t\t\t\tcall="${a}"\n\t\t\t\t\t\t\tfragment="${m()}"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<param name="signature" value="${s}${i.call}(${i.arguments||[]})"/>\n\t\t\t\t\t\t</use>\n\t\t\t\t\t`})).join("\n")}\n\t\t\t`}if("alternatives"in e){const M=`${r}${n}.`;return`\n\t\t\t\t<use\t${y()}\n\t\t\t\t\txlink:href="#fragment"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${v()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${_(t,e).map(c)}"/>\n\t\t\t\t\t<param name="label" value="${e.type??"alt"}"/>\n\t\t\t\t\t<param name="condition" value=" "/>\n\t\t\t\t</use>\n\t\t\t\t${e.alternatives.map(((t,e)=>{const n=`${M}${e}`;return`\n\t\t\t\t\t\t<use\tid="${n}"\n\t\t\t\t\t\t\txlink:href="#compartment"\n\t\t\t\t\t\t\t${0==e?"":`after="${M}${e-1}"`}\n\t\t\t\t\t\t\tparent="${m()}"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<param name="condition" value="${t.condition}"/>\n\t\t\t\t\t\t</use>\n\t\t\t\t\t\t${t.altBody.map(((e,r)=>d(t.altBody,e,r,`${n}.`,n))).join("\n")}\n\t\t\t\t\t`})).join("\n")}\n\t\t\t`}if("loopBody"in e){const j=`${r}${n}.`;function P(){if("condition"in e)return`[${e.condition}]`;if(!("lower"in e))return"";if(e.lower!==e.upper)return`[between ${e.lower} and ${e.upper} times]`;switch(e.lower){case 1:return"[once]";case 2:return"[twice]";default:return`[${e.lower} times]`}}return`\n\t\t\t\t<use\t${y()}\n\t\t\t\t\txlink:href="#fragment"\n\t\t\t\t\t${o()}\n\t\t\t\t\t${v()}\n\t\t\t\t>\n\t\t\t\t\t<param name="on" value="${_(t,e).map(c)}"/>\n\t\t\t\t\t<param name="label" value="loop"/>\n\t\t\t\t\t<param name="condition" value="${P()}"/>\n\t\t\t\t\t${Object.values(a||{}).includes(n)?"<param name='color' value='blue'/>":""}\n\t\t\t\t</use>\n\t\t\t\t${e.loopBody.map(((t,n)=>d(e.loopBody,t,n,j,m()))).join("\n")}\n\t\t\t`}return console.log("Error: event of unknown type: ",e),""}const m=s.map((t=>t.name));let g=t.lifelines;g||(g=e.objects.map((t=>t.name)),g=(0,i.MR)(u(t.events),(t=>m.indexOf(t))));const f=new Map;let h,y=0;return(0,r.R)(`\n\t\t${g.map(((t,n)=>{var r,i;return`\n\t\t\t\t<use id="${c(t)}" xlink:href="#${null!==(r=e.getObject(t))&&void 0!==r&&r.isActor?"actor":"object"}" ${0==n?'x="100" y="0"':`after="${c(g[n-1])}"`}>\n\t\t\t\t\t<param name="name" value="${t} : ${(null===(i=e.getObject(t))||void 0===i?void 0:i.class)||""}"/>\n\t\t\t\t</use>`})).join("\n")}\n\n\n\t\t${t.events.map(((e,n)=>d(t.events,e,n,"",""))).join("\n")}\n\t\t${[...f.entries()].map((([t,e])=>{const n=e.target?`${e.target} = `:"";return`\n\t\t\t\t<use\tid="unaccepted[${y++}]"\n\t\t\t\t\txlink:href="#unaccepted"\n\t\t\t\t\tafter="${y>1?`unaccepted[${y}]`:h}"\n\t\t\t\t\tcall="${t}"\n\t\t\t\t\trightmost="${c((0,i.Z$)(g))}"\n\t\t\t\t>\n\t\t\t\t\t<param name="signature" value="${n}${e.call}(${e.arguments||[]})"/>\n\t\t\t\t</use>\n\t\t\t`})).join("\n")}\n\t`,{origin:n,styleMode:o})}},481:(t,e,n)=>{"use strict";n.d(e,{E2:()=>a,Pz:()=>s,TA:()=>i}),n(582);const r=t=>String.raw`

	{

		const self = this;

		function stringParse(s) {
/*			// problem with JSON.parse: "\0" is not valid JSON, it should be "\u0000"
			return JSON.parse(s);
/*/
			return eval(s);
/**/
		}

		function binOp(left, right, leftName = "left", type = "binaryOpExp") {
			if(right.length > 0) {
				let ret = {[leftName]: left, type, ...right[0]};
				if(ret.type === "templateExp") {
					ret = {...ret, tag: ret.source};
				}
				for(const part of right.slice(1)) {
					if(part.type === "templateExp") {
						ret = {...part, tag: ret};
					} else {
						ret = {[leftName]: ret, type, ...part};
					}
				}
				return ret;
			} else {
				return left;
			}
		}

		function w(node) {
			return self.keepLocation
			?
				{...node, __location__: location()}
			:	node
			;
		}
	}

	${t}

	statement	=	_ e:(	expression:functionExp		{return {type: "expressionStat", expression};}
				/	expression:classExp		{return {type: "expressionStat", expression};}
				)					{return e;}
			/	_ labels:label* s:(
					ifStat
				/	blockStat
				/	forStat
				/	forOfStat
				/	forInStat
				/	whileStat
				/	switchStat
				/	tryStat
				)					{return {...s, labels};}
			/
				_ labels:label* stat:(
					doStat
				/	returnStat
				/	continueStat
				/	breakStat
				/	variableStat
				/	importStat
				/	expressionStat
				) _ ";"?	{return {...stat, labels};}
				/ _ ";"	{return {type: "emptyStat",}}

	label		=	l:ID _ ":" _ {return l;}

	breakStat	=	"break" !IDPART _sl name:(!("case" !IDPART) n:ID {return n;})?			{return {type: "breakStat", name};}

	continueStat	=	"continue" !IDPART _sl name:ID?			{return {type: "continueStat", name};}

	tryStat		=	"try" _
				tryBlock:blockStat
				cb:(_ "catch" varName:(_ "(" _ v:ID _ ")" {return v;})? _ catchBlock:blockStat {return {catchBlock, varName};})?
				finallyBlock:(_ "finally" _ b:blockStat {return b;})?
										{return w({type: "tryStat", tryBlock, ...cb, finallyBlock});}

	importStat	=
				"export" _ "default" !IDPART _
					value:expression
												{return {type: "defaultExportStat", value};}
			/	"export" _ "*" _ "from" _ from:STRING				{return {type: "exportAllStat", from};}
			/	kind:("import" / "export") !IDPART _
				!(("function" / "const" / "let" / "var" / "async" / "class") !IDPART)
				contents:(
					"{" _ names:names?  "}" {return {names};}
				/	"*" _ "as" _ as:ID {return {as};}
				/	!"default" defaultExport:ID {return {defaultExport};}
				) _ from:("from" _ f:STRING {return f;})?
										{return {type: "importStat", ...contents, from, kind};}

	switchStat	=	"switch" !IDPART _ "(" _ selector:expression _ ")" _ "{"
					clauses:clause*
				_ "}"
										{return {type: "switchStat", selector, clauses};}

	clause		=	_ "case" !IDPART _ value:expression _ ":" statements:(_ !("default" / "case") s:statement {return s;})*	{return {value, statements, isDefault: false};}
			/	_ "default" !IDPART _ ":" statements:(_ !("default" / "case") s:statement {return s;})* _		{return {statements, isDefault: true};}


	names 		=	head:name _ tail:("," _ name:name _ {return name;})* lastComma 		{return [head, ...tail];}

	name		=	name:ID as:(_ "as" _ as:ID {return as;})?	{return {name, as};}

	ifStat		=	_ "if" !IDPART _ "(" _ condition:expression _ ")" _
					_ thenStat:statement _
				elseStat:("else"
					_ elseStat:statement _ {return elseStat;})?
										{return w({type: "ifStat", condition, thenStat, elseStat});}

	doStat		=	_ "do" !IDPART _ statement:statement _ "while" _ "(" _ condition:expression _ ")"
										{return {type: "doStat", condition, statement};}

	whileStat	=	_ "while" !IDPART _ "(" _ condition:expression _ ")" _ statement:statement _	{return {type: "whileStat", condition, statement};}

	forOfStat	=	_ "for" !IDPART _ isAwait:"await"? _ "(" _ variable:(variableStat / name:ID) _ "of" _ expression:expression _ ")"
				statement:statement
										{return {type: "forOfStat", variable, expression, statement, isAwait: isAwait ? true : false};}
	forInStat	=	_ "for" !IDPART _ "(" _ variable:(variableStat / name:ID) _ "in" _ expression:expression _ ")"
					statement:statement
										{return {type: "forInStat", variable, expression, statement};}
	forStat		=	_ "for" !IDPART _ "(" _
					init:(variableStat / expression)? _
				";" _
					condition:expression? _
				";" _
					update:expression? _
				")" statement:statement				{return {type: "forStat", init, condition, update, statement};}

	variableStat	=	_ isExport:export _ type:("var" / "let" / "const") !IDPART _ head:variableDef _ tail:("," _ name:variableDef _ {return name;})*
										{return {type, variables: [head, ...tail], isExport};}

	returnStat	=	_ "return" !IDPART returnedValue:(_sl
						v:expression
					{return v;})?
										{return {type: "returnStat", returnedValue};}

	variableDef	=	pattern:simplePattern _ init:("=" _ init:priority2 {return init;})?
										{return {pattern, init};}

	expressionStat	=	_ expression:expression _				{return w({type: "expressionStat", expression});}

	blockStat	=	_ "{" statements:statement* _ "}"				{return {type: "block", statements};}

	pattern		=	isSpread:"..."? pattern:simplePattern				{return {...pattern, isSpread: isSpread ? true : false};}

	simplePattern	=	name:ID		// TODO: should actually be any lvalue, not just an ID
					defaultValue:(_ "=" _ e:priority2 {return e;})?
											{return w({type: "namePat", name, defaultValue});}
			/	"[" _ elements:patterns? "]"				{return {type: "arrayPat", elements};}
			/	"{" _ elements:slotPatterns? "}"				{return {type: "objectPat", elements};}

	patterns	=	head:pattern? _ tail:("," _ pattern:pattern? _{return pattern;})* ","? _	{return [head, ...tail];}

	slotPatterns	=	head:slotPattern _ tail:("," _ p:slotPattern _{return p;})* ","? _	{return [head, ...tail];}

	slotPattern	=	isSpread:"..."? _ name:(ID / numberExp) _ newName:(":" _ n:simplePattern {return n;})? _ defaultValue:("=" _ v:priority2 {return v;})? 	{return w({type: "slotPat", name, newName, defaultValue, isSpread: isSpread ? "true" : false});}

	paramPatterns	=	head:paramPattern _ tail:("," _ p:paramPattern _ {return p;})* ","? _	{return [head, ...tail];}

	paramPattern	=	pattern:pattern _ defaultValue:("=" _ v:priority2 _ {return v;})? {return {type: "paramPat", pattern, defaultValue};}

	expression	=	exp:priority1						{return exp;}

	priority1	=	head:priority2 tail:(_ "," _ exp:priority2 {return exp;})*
										{if(tail.length) return {type: "expressionListExp", expressions: [head, ...tail]}; else return head;};

/*
	priority2	= op:("yield*" / "yield") _ expression:priority2	{return {type: "yieldExp", op, expression};}
			/ exp:priority3						{return exp;}
*/
	priority2	=
				priority3

	priority3	=
				op:("yield" _ "*" {return "yield*";}/ "yield" !IDPART {return "yield";}) _sl expression:priority3?	{return {type: "yieldExp", op, expression};}
			/	left:simplePattern _ op:"=" _ right:priority3	{return {type: "destructuringAssign", left, op, right};}
			/	left:priority4
				right:( _ op:("=" / "+=" / "-=" / "**=" / "*=" / "/=" / "%=" / "<<=" / ">>>=" / ">>=" / "&=" / "^=" / "|=" / "&&=" / "||=" / "??=") _ right:priority3 {return {op, right};})?
										{if(right) return {type: "assign", left, ...right}; else return left;}

	priority4	=	left:priority5 right:(_ "?" _ thenExp:priority2 _ ":" _ elseExp:priority2 {return {thenExp, elseExp};})?
										{if(right) return {type: "conditionalExp", condition: left, ...right}; else return left;}

	priority5	=	left:priority6 right:(_ op:"??" _ right:priority6 {return {op, right};})*
										{return binOp(left, right);}

	priority6	=	left:priority7 right:(_ op:"||" _ right:priority7 {return {op, right};})*
										{return binOp(left, right);}

	priority7	=	left:priority8 right:(_ op:"&&" _ right:priority8 {return {op, right};})*
										{return binOp(left, right);}

	priority8	=	left:priority9 right:(_ !("||") op:"|" _ right:priority9 {return {op, right};})*
										{return binOp(left, right);}

	priority9	=	left:priority10 right:(_ op:"^" _ right:priority10 {return {op, right};})*
										{return binOp(left, right);}

	priority10	=	left:priority11 right:(_ op:"&" _ right:priority11 {return {op, right};})*
										{return binOp(left, right);}

	priority11	=	left:priority12 right:(_ op:("===" / "==" / "!==" / "!=") _ right:priority12 {return {op, right};})*
										{return binOp(left, right);}

	priority12	=	left:priority13 right:(_ op:("<=" / "<" / ">=" / ">" / k:("instanceof" / "in") !IDPART {return k;}) _ right:priority13 {return {op, right};})*
										{return binOp(left, right);}

	priority13	=	left:priority14 right:(_ op:("<<" / ">>>" / ">>") _ right:priority14 {return {op, right};})*
										{return binOp(left, right);}

	priority14	=	left:priority15 right:(_ op:("+" !"+" {return "+"}/ "-" !"-" {return "-"}) _ right:priority15 {return {op, right};})*
										{return binOp(left, right);}

	priority15	=	left:priority16 right:(_ op:("*" !"*" {return "*";}/ "/" / "%") _ right:priority16 {return {op, right};})*
										{return binOp(left, right);}

	priority16	=	left:priority17 right:(_ op:"**" _ right:priority16 {return {op, right};})?
										{if(right) return binOp(left, [right]); else return left;}

	priority17	=	op:("!" / "~" / "++" / "--" / "+" / "-" /
					c:("typeof" / "void" / "delete" / "await") !IDPART {return c;}
				) _ expression:priority17
										{return {type: "prefixUnaryExp", op, expression};}
			/	exp:priority18					{return exp;}

	priority18	=	expression:priority19 op:(_sl op:"++" {return op;} / _sl op:"--" {return op;})?
										{if(op) return {type: "postfixUnaryExp", expression, op}; else return expression;}

	memberExpRight	=	r:memberAccessExp
			/	computedMemberAccessExp
			/	optionalChainingExp

	priority19	=	priority20
			/	"new" !IDPART _ expression:priority19
										{return {type: "newExp", expression};}

	newWithArgsExp	=	"new" !IDPART _ expression:memberExp _ args:functionCallExp
										{return {...args, type: "newWithArgsExp", expression};}

	memberExp	=	source:priority21 rest:memberExpRight*		{return binOp(source, rest, "source");}

	priority20	=
				source:(newWithArgsExp / priority21) rest:(
					(	memberExpRight
					/	r:functionCallExp
					/	TEMPLATE
					)*
				)
										{return binOp(source, rest, "source");}

	priority21	=
				isAsync:"async"? _ params:(
					"(" _ params:paramPatterns? ")" {return params ? params : [];}
				/	name:ID {return [{type: "paramPat", pattern: w({type: "namePat", name, isSpread: false, defaultValue: null}), defaultValue: null,}];}
				) _ "=>" _ body:(blockStat / priority2)		{return {type: "lambdaExp", params, body, isAsync: isAsync ? true : false};}
			/	"(" _ exp:expression _ ")"			{return exp;}
			/	exp:primaryExp					{return exp};

	functionExp	=
				isExport:export isAsync:("async" _)? "function" _ isGenerator:"*"? _ name:(n:ID _ {return n;})? "(" _ params:paramPatterns? ")" _ body:blockStat	{return w({type: "functionExp", name, params: params, body, isExport, isAsync: isAsync ? true : false, isGenerator: isGenerator ? true : false});}

	classExp	=
				isExport:export "class" _ name:(!"extends" n:ID {return n;})? _ superClass:("extends" _ n:expression _ {return n;})? "{" _ members:(classMember / ";" _ )* "}"	{return {type: "classExp", name, superClass, members: members?.filter(e => e[0]!==";"), isExport};}

	primaryExp	=	a:numberExp						{return a;}
			/	stringExp
			/	TEMPLATE
			/	"this" !IDPART						{return w({type: "thisExp"});}
			/	"true" !IDPART						{return {type: "booleanExp", value: true};}
			/	"false"	!IDPART						{return {type: "booleanExp", value: false};}
			/	"throw" !IDPART _ value:expression				{return {type: "throwExp", value};}
			/	classExp
			/	functionExp
			/	!("new" !IDPART) a:variableExp						{return a;}
			/	arrayExp
			/	objectExp
			/	regex:REGEX						{return {type: "regexExp", regex};}

	export		=	e:("export" _ d:"default"? _ {return {isDefault: d ? true : false};})? {return e ? e : false;}

	classMember	=	isStatic:"static"? _ kind:("get" !(IDPART / _ "(")/ "set" !(IDPART / _ "(")/ "async" !IDPART)? _ isGenerator:"*"? _ name:slotName _ "(" _ params:paramPatterns? ")" _ body:blockStat _	{kind = kind?.[0]; return {type: "method", kind, name, params, body, isStatic: isStatic ? true : false, isGenerator: isGenerator ? true : false};}
			/	isStatic:"static"? _ name:ID _ defaultValue:("=" _ v:expression {return v;})? _ ";"? _		{return {type: "field", name, isStatic: isStatic ? true : false, defaultValue};}

	numberExp	=	sign:"-"? "0" ("x" / "X") digits:[0-9a-fA-F]+			{return w({type: "numberExp", value: parseInt(digits.join(""), 16)});}
			/	"0" ("b" / "B") d:[0-1_]+						{return w({type: "numberExp", value: parseInt(d.filter(e => e !== "_").join(""), 2)});}
			/	"0" ("o" / "O")  d:[0-7]+						{return w({type: "numberExp", value: parseInt(d.join(""), 8)});}
			/	"0" d:[0-7]+						{return w({type: "numberExp", value: parseInt(d.join(""), 8)});}	// legacy octal
			/	sign:"-"? num:[0-9]+ dec:("." dec:[0-9]* {return dec;})? e:(("e" / "E") esign:("-"/"+")? d:[0-9]+ {return [...esign ? [esign] : [], ...d]})?
										{return w({type: "numberExp", value: parseFloat(num.join("") + "." + ([...dec ?? [], 0]).join("") + (e ? "e" + e.join("") : "")) * (sign === "-" ? -1 : 1)});}
			/	sign:"-"? "." dec:[0-9]+				{return {type: "numberExp", value: JSON.parse(("0." + dec.join("")) * (sign === "-" ? -1 : 1))};}

	stringExp	=	value:STRING						{return {type: "stringExp", ...value};}
	memberAccessExp	=	_ "." _ propertyName:ID				{return {type: "memberAccessExp", propertyName};}
	computedMemberAccessExp	=
				_ "[" _ propertyName:expression _ "]"		{return {type: "computedMemberAccessExp", propertyName};}
	variableExp	=	name:ID !{name==="function"}							{return w({type: "variableExp", name});}
	functionCallExp =	_ "(" _ args:args?
				  ")"						{return w({type: "functionCallExp", args: args ? args : []});}
	args		=	head:arg _ tail:("," _ arg:arg _ {return arg;})* lastComma	{return [head, ...tail];}
	arg		=	isSpread:"..."? _ expression:priority2			{return isSpread ? {type: "spreadExp", expression} : expression;}
	optionalChainingExp	=
				_ "?." _ propertyName:ID			{return {type: "optionalMemberAccessExp", propertyName};}
			/	_ "?." f:functionCallExp			{return {...f, type: "optionalFunctionCallExp"};}
			/	_ "?." c:computedMemberAccessExp		{return {...c, type: "optionalComputedMemberAccessExp"};}
	arrayExp	=	"[" _ elements:(h:arrayElement? _ t:("," _ e:arrayElement? _ {return e;})* lastComma {return [h, ...t];})? "]"	{return {type: "arrayExp", elements};}

	arrayElement	=	isSpread:"..."? e:priority2	{return {...e, isSpread: isSpread ? true : false};}

	objectExp	=	"{" _ slots:(head:slot _ tail:("," _ slot:slot _ {return slot;})* lastComma {return [head, ...tail];})? "}"
										{return w({type: "objectExp", slots});}

	slot		=	key:slotName _ ":" _ value:priority2				{return {type: "keyValueSlot", key, value};}
			/	kind:("get" !IDPART/ "set" !IDPART/ "async" !IDPART)? _ isGenerator:"*"? _ key:slotName? _ "(" _ params:paramPatterns? ")" _ body:blockStat
										{kind = kind?.[0]; if(kind && !key) {key = {type: "identKey", name: kind}; kind = undefined;} return {type: "functionSlot", kind, key, params, body, isGenerator: isGenerator ? true : false};}
			/	"..." expression:priority2					{return {type: "spreadSlot", expression};}
			/	key:ID							{return {type: "varSlot", key};}

	slotName	= 	name:ID							{return w({type: "identKey", name});}
			/	n:numberExp						{return {type: "numberKey", name: n};}
			//	n:[0-9]+						{return {type: "intKey", name: n.join("")};}
			/	name:STRING						{return w({type: "stringKey", ...name});}
			/	"[" _ expression:expression _ "]"			{return {type: "exprKey", expression};}

	lastComma	=	("," _)?

	IDSTART		=	a:. &{return a.match(/[\p{ID_Start}_$]/u)}			{return a;}
				//[A-Za-z_À-ÖØ-öø-ÿśćę$ॐ]
	IDPART		=	a:. &{return a.match(/[\p{ID_Continue}_$\u200C\u200D]/u)}		{return a;}
				//IDSTART / [0-9]
	ID		=	h:IDSTART t:IDPART*				{return h + t.join("");}
	STRING		=	'"' v:([^"\\] / "\\" a:. {return "\\" + a;})* '"'		{return {value: stringParse('"' + v.join("") + '"'), kind: '"'};}
			/	"'" v:([^'\\] / "\\" a:. {return "\\" + a;})* "'"		{return {value: stringParse('"' + v.map(e => e === '"' ? '\\"' : e).join("") + '"'), kind: "'"};}

	TEMPLATE	=	`+'"`"\tv:(\n\t\t\t\t\t\t\ts:(\n\t\t\t\t\t\t\t\ts:[^`\\\\$]+\t{return s.join("");}\n\t\t\t\t\t\t\t/\t"\\\\" a:. {return "\\\\" + a;}\n\t\t\t\t\t\t\t)+\t{return s.join("");}\n\t\t\t\t\t\t/\t"$" "{" _ expression:expression _  "}"\t{return expression;}\n\t\t\t\t\t\t/\t"$"\t\t\t\t\t{return "$";}\n\t\t\t\t\t\t)* "`"'+String.raw`		{return {type: "templateExp", value: v};}


	NL		=	_ COMMENT? "\r"? "\n"
	BLANK		=	[ \t\r\n] / COMMENT
	// same line blanks
	_sl		=	(SINGLE_LINE_COMMENT / SINGLE_MULTI_LINE_COMMENT / [ \t])*
	_		=	BLANK*
	__		=	BLANK+
	SINGLE_LINE_COMMENT	=	"//" REST
	MULTI_LINE_COMMENT	=	"/*" ([^*] / !("*/") "*")* "*/"
	SINGLE_MULTI_LINE_COMMENT	=	"/*" ([^*\n] / !("*/") "*")* "*/"
	COMMENT		=	SINGLE_LINE_COMMENT
			/	MULTI_LINE_COMMENT
	REST		=	s:[^\n]*								{return s.join("");}
	REGEX		=	"/" c:([^/\\[] / "\\" a:. {return "\\" + a;} / "[" c:([^\\\]] / "\\" a:. {return "\\" + a;})* "]" {return "[" + c.join("") + "]";})* "/" mod:[dgimsuy]*				{return "/" + c.join("") + "/" + mod.join("");}
`,i=peg.generate(String.raw`
	${r("\n\t\tstart\t=\te:expression _\t\t{return e;}\n\t")}
`,{trace:!1}),a=peg.generate(String.raw`
	${r("\n\t\tstart\t=\tstats:statement* _\t{return stats;}\n\t")}
`,{trace:!1});function s(t,e=!1){function n(t,e){return t.startsWith("return")?t+";":t.match(/(?:;|})[ \t\n\r]*$/)&&!t.match(/^(?:const|var|let)/)?t:t+";"}if(t instanceof Array)return t.map((t=>n(s(t)))).join("\n");function r(t){return`(${t})`}function i(t){var e;switch(t.type){case"namePat":return`${t.isSpread?"...":""}${t.name}${t.defaultValue?"="+s(t.defaultValue):""}`;case"slotPat":return`${t.isSpread?"...":""}${"string"==typeof t.name?t.name:t.name.value}${t.newName?":"+i(t.newName):""}${t.defaultValue?"="+s(t.defaultValue):""}`;case"paramPat":return`${t.isSpread?"...":""}${i(t.pattern)}${t.defaultValue?"="+s(t.defaultValue):""}`;case"objectPat":return`{${(null===(e=t.elements)||void 0===e?void 0:e.map(i))??""}}`;case"arrayPat":return`[${t.elements.map((t=>t?i(t):""))}]`;default:throw`Unsupported pattern type: ${t.type} for ${JSON.stringify(t)}`}}function a(t){return t?s(t):""}function o(t){return t.labels?t.labels.map((t=>t+":")).join(""):""}function c(t,e="export ",n=""){return t.isExport?e+(e&&t.isExport.isDefault?"default ":""):n}function l(t){const e=JSON.stringify(t.value);return"'"===t.kind?e.replace(/'/g,"\\'").replace(/^"/,"'").replace(/"$/,"'"):e}switch(String(t.type)){case"templateExp":return(t.tag?s(t.tag):"")+"`"+t.value.map((t=>"string"==typeof t?t:"${"+s(t)+"}")).join("")+"`";case"expressionStat":return`${s(t.expression,!0)}`;case"breakStat":return"break"+(t.name?` ${t.name}`:"");case"continueStat":return"continue"+(t.name?` ${t.name}`:"");case"tryStat":return`\n\t\t\t\t${o(t)}try\n\t\t\t\t\t${s(t.tryBlock)}\n\t\t\t\t${t.catchBlock?`catch${t.varName?`(${t.varName})`:""} ${s(t.catchBlock)}`:""}\n\t\t\t\t${t.finallyBlock?`finally ${s(t.finallyBlock)}`:""}\n\t\t\t`;case"ifStat":return`${o(t)}if(${s(t.condition)}) ${n(s(t.thenStat))}${t.elseStat?` else ${s(t.elseStat)}`:""}`;case"doStat":return`${o(t)}do ${n(s(t.statement))} while(${s(t.condition)})`;case"whileStat":return`${o(t)}while(${s(t.condition)})${s(t.statement)}`;case"forOfStat":return`${o(t)}for${t.isAwait?" await":""}(${"string"==typeof t.variable?t.variable:s(t.variable)} of ${s(t.expression)}) ${s(t.statement)}`;case"forInStat":return`${o(t)}for(${"string"==typeof t.variable?t.variable:s(t.variable)} in ${s(t.expression)}) ${s(t.statement)}`;case"forStat":return`${o(t)}for(${a(t.init)} ; ${a(t.condition)} ; ${a(t.update)} ) ${s(t.statement)}`;case"returnStat":return"return"+(t.returnedValue?` ${s(t.returnedValue)}`:"");case"defaultExportStat":return`export default ${s(t.value)}`;case"exportAllStat":return`export * from ${l(t.from)}`;case"importStat":return t.as?`${t.kind} * as ${t.as} from ${l(t.from)}`:t.defaultExport?`${t.kind} ${t.defaultExport} from ${l(t.from)}`:`${t.kind} {${(null===(u=t.names)||void 0===u?void 0:u.map((t=>`${t.name}${t.as?" as "+t.as:""}`)))??""}}${t.from?` from ${l(t.from)}`:""}`;var u;case"switchStat":return`${o(t)}switch(${s(t.selector)}) {\n\t\t\t\t${(t.clauses??[]).map((t=>t.isDefault?`\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t${s(t.statements)}\n\t\t\t\t\t`:`\n\t\t\t\t\t\tcase ${s(t.value)}:\n\t\t\t\t\t\t\t${s(t.statements)}\n\t\t\t\t\t`)).join("")}\n\t\t\t}`;case"emptyStat":return";";case"block":return`${o(t)}{\n\t\t\t\t${s(t.statements)}\n\t\t\t}`;case"let":case"const":case"var":return`${c(t)}${t.type} ${t.variables.map((t=>`${i(t.pattern)}${t.init?` = ${s(t.init)}`:""}`)).join(", ")}`;case"functionCallExp":return`${s("left"in t?t.left:t.source)}(${(t.args??[]).map(s).join(", ")})`;case"optionalFunctionCallExp":return`${s("left"in t?t.left:t.source)}?.(${(t.args??[]).map(s).join(", ")})`;case"thisExp":return"this";case"throwExp":return`throw ${s(t.value)}`;case"variableExp":return`${t.name}`;case"conditionalExp":return r(`${s(t.condition)} ? ${s(t.thenExp)} : ${s(t.elseExp)}`);case"numberExp":return`(${t.value})`;case"memberAccessExp":return`${s(t.source)}.${t.propertyName}`;case"optionalMemberAccessExp":return`${s(t.source)}?.${t.propertyName}`;case"computedMemberAccessExp":return`${s(t.source??t.left)}[${s(t.propertyName)}]`;case"optionalComputedMemberAccessExp":return`${s(t.source??t.left)}?.[${s(t.propertyName)}]`;case"postfixUnaryExp":return r(`${s(t.expression)}${t.op}`);case"prefixUnaryExp":return r(`${t.op} ${s(t.expression)}`);case"newWithArgsExp":return`(new (${s(t.expression)})(${(t.args??[]).map(s).join(", ")}))`;case"newExp":return`(new (${s(t.expression)}))`;case"destructuringAssign":return r(`${i(t.left)} ${t.op} ${s(t.right)}`);case"binaryOpExp":case"assign":return r(`${s(t.left)} ${t.op} ${s(t.right)}`);case"expressionListExp":return"("+t.expressions.map(s).join(", ")+")";case"yieldExp":return`(${t.op} ${s(t.expression)})`;case"stringExp":case"stringKey":return l(t);case"booleanExp":return JSON.stringify(t.value);case"lambdaExp":return`(${t.isAsync?"async":""}(${t.params.map(i)}) => ${p=s(t.body),_="objectExp"===t.body.type,_?`(${p})`:p})`;case"functionExp":return`${c(t,void 0,e?"":"(")}${t.isAsync?"async ":""}function${t.isGenerator?"*":""}${t.name?" "+t.name:""}(${(t.params??[]).map(i)}) ${s(t.body)}${c(t,"",e?"":")")}`;case"arrayExp":return`[${(t.elements??[]).map((t=>t?`${t.isSpread?"...":""}${s(t)}`:"")).join(",")}]`;case"objectExp":return`({${(t.slots??[]).map(s).join(",")}})`;case"keyValueSlot":return`${s(t.key)}:${s(t.value)}`;case"functionSlot":return`${t.kind?t.kind+" ":""}${t.isGenerator?"*":""}${s(t.key)}(${(t.params??[]).map(i)}) ${s(t.body)}`;case"varSlot":return`${t.key}`;case"spreadSlot":case"spreadExp":return`...${s(t.expression)}`;case"identKey":return t.name;case"numberKey":return t.name.value+"";case"exprKey":return`[${s(t.expression)}]`;case"regexExp":return t.regex;case"classExp":return`${c(t)}class ${t.name??""} ${t.superClass?"extends "+s(t.superClass):""} {${t.members.map(s).join("")}}`;case"method":return`${t.isStatic?"static ":""}${t.kind?t.kind+" ":""}${t.isGenerator?"*":""}${s(t.name)}(${(t.params??[]).map(i)}) ${s(t.body)}`;case"field":return`${t.isStatic?"static ":""}${t.name}${t.defaultValue?`=${s(t.defaultValue)}`:""};`;default:throw`Unsupported JavaScript AST node: ${JSON.stringify(t)}`}var p,_}},463:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>makeTCSVGStatic});var fs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(317),svgdom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(731),_TCSVGSequenceGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(687),path__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(678),url__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(976),svgdom_css__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(403);const svgNS="http://www.w3.org/2000/svg",xlinkNS="http://www.w3.org/1999/xlink";let patchedSVGDOM=!1;function makeTCSVGStatic(svg,__dirname=".",settings){patchedSVGDOM||(patchSVGDOM(),patchedSVGDOM=!0);const styleRegexp=/<style>([^<]*)<\/style>/m;svg=svg.replace(styleRegexp,"\n\t\t\t<style>\n\t\t\t\t$1\n\t\t\t\t/*\n\t\t\t\t\tsvgdom defaults\n\t\t\t\t\t\tnot necessary for svgdom, but necessary for browsers or rsvg to render in the same way\n\t\t\t\t\t\tOpenSans can be install on debian-based distributions with\n\t\t\t\t\t\t\tsudo apt install fonts-open-sans\n\t\t\t\t*/\n\t\t\t\ttext {\n\t\t\t\t\tfont-family: OpenSans;\n\t\t\t\t\tfont-size: 16;\n\t\t\t\t}\n\t\t\t</style>\n\t\t");const style=svg.match(styleRegexp)[1];svg=svg.replace(styleRegexp,"\n\t\t\t<style>\n\t\t\t\t/* For browers, who do not know svgdom's default OpenSans font. */\n\t\t\t\t@font-face {\n\t\t\t\t\tfont-family: 'OpenSans';\n\t\t\t\t\tfont-style: normal;\n\t\t\t\t\tfont-weight: 400;\n\t\t\t\t\tsrc: url('https://fonts.gstatic.com/s/opensans/v28/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVTS-muw.woff2') format('woff2');\n\t\t\t\t}\n\n\t\t\t\t$1\n\t\t\t</style>\n\t\t");const window=svgdom_css__WEBPACK_IMPORTED_MODULE_4__(style);patchSVGDOM(window);const setComputedStyle=window.setComputedStyle,document=window.document,root=document.createElement("g");document.appendChild(root);const getElementsByTagName=window.Document.prototype.getElementsByTagName;window.document.documentElement.constructor.prototype.getElementsByTagName=function(t){return"*"===t?this.querySelectorAll("*"):getElementsByTagName.call(this,t)},document.defaultView.location={href:""},document.defaultView.frameElement=document,globalThis.HTMLCollection={prototype:{}},globalThis.NamedNodeMap={prototype:{}},globalThis.NodeList={prototype:{}},globalThis.document=document,globalThis.window=globalThis,globalThis.ResizeObserver=function(){this.observe=function(){}},globalThis.CSS={escape:t=>t},root.innerHTML=svg;for(const script of root.getElementsByTagName("script")){const href=script.getAttributeNS(xlinkNS,"href")||script.getAttribute("href");if(href){const t=href.replace(/^https?:\/\/[^\/]*\//,""),e=fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync((0,path__WEBPACK_IMPORTED_MODULE_2__.resolve)(__dirname,t),"utf8");contextualEvalNoWith.call(globalThis,e)}else{const processed=script.innerHTML.replace(/function +([^(]*)\(/g,"globalThis.$1 = function $1(").replace(/var +([^ =]*) *=/g,"globalThis.$1 =").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&");eval(processed)}}const roots=document.getElementsByTagName("svg");function copy(t){roots[1].getAttribute(t)||roots[1].setAttribute(t,roots[0].getAttribute(t))}if(copy("viewBox"),copy("width"),copy("height"),null!=settings&&settings.inlineStyles){setComputedStyle(roots[1].parentNode);const t=new RegExp("var\\(([^)]*)\\)","g");for(const e of roots[1].parentNode.querySelectorAll("*")){var _e$getAttribute;const n=null===(_e$getAttribute=e.getAttribute("style"))||void 0===_e$getAttribute?void 0:_e$getAttribute.replace(t,((t,n)=>window.getComputedStyle(e).getPropertyValue(n)));n&&e.setAttribute("style",n)}}if(null!=settings&&settings.removeDominantBaseline)for(const t of roots[1].parentNode.querySelectorAll("text")){const e="dominant-baseline",n="text-before-edge";window.getComputedStyle(t).getPropertyValue(e)===n&&(t.setAttribute("style",t.getAttribute("style").replace(new RegExp(`${e}: ${n};`),"")),t.setAttribute("y",1*window.getComputedStyle(t).getPropertyValue("font-size")+1*t.getAttribute("y")))}const ret=(0,_TCSVGSequenceGenerator_js__WEBPACK_IMPORTED_MODULE_5__.k)(roots[1].parentNode);return ret}function patchSVGDOM(t){function e(e,n,r){!function(t,e,n,r){n=n||e,Object.defineProperty(t,e,{get:function(){const t=this;return{get baseVal(){return t.getAttribute(n)||r},get value(){return t.getAttribute(n)||r}}},configurable:!0})}(t.Element.prototype,e,n,r)}t||(t=(0,svgdom__WEBPACK_IMPORTED_MODULE_1__.createSVGWindow)()),e("href","xlink:href"),e("xlink:href"),e("cx","cx",0),e("cy","cy",0);const n=Object.getOwnPropertyDescriptor(t.Element.prototype,"attributes"),r=n.get;n.get=function(){const t=r.call(this),e=this;return Object.defineProperty(t,"xlink:href",{get:function(){return{get value(){return e.getAttribute("xlink:href")}}},configurable:!0}),Object.defineProperty(t,"name",{get:function(){return{get value(){return e.getAttribute("name")}}},configurable:!0}),t},Object.defineProperty(t.Element.prototype,"attributes",{get:n.get,configurable:!0})}},921:(t,e,n)=>{"use strict";n.d(e,{H:()=>a});var r=n(625),i=n(171);class a{constructor(t,e){var n;const a=/after\(([^)]*)\)/,s=/when\(([^)]*)\)/;if(!(t=(0,i.F)(t)).objects){const e=t;t={name:e.name,objects:[t]},e.settings&&(t.settings=e.settings,delete e.settings),e.historyCauses&&(t.historyCauses=e.historyCauses,delete e.historyCauses)}Object.assign(this,t),Object.assign(this,{getObject(t){return this.objects.find((e=>e.name==t))},removeObject(e){(0,r.Od)(t.objects,e),t.connectors.filter((t=>t.ends.includes(e))).forEach((e=>{(0,r.Od)(t.connectors,e),delete t.connectorByName[e.name]}))},getObjectClass(e){var n;return e.class?null===(n=t.classes)||void 0===n?void 0:n[e.class]:void 0},getConnectors(t){var e;return(null===(e=this.connectors)||void 0===e?void 0:e.filter((e=>e.ends.includes(t))))||[]},getBehavior(t){return(0,r.Xq)(t.states)?t:this.getObjectClass(t)},getInitial(t){return this.isActive(t)?this.getBehavior(t).states.find((t=>"initial"==t.kind)):void 0},getState(t){var e=t.split("."),n=this.getObject(e[0]);return n=this.getBehavior(n),(e=e.slice(1)).forEach((t=>{n=n.stateByName[t]})),n},getTransition(t){var e,n=t.split("."),i=this.getObject(n[0]);return(n=n.slice(1)).slice(0,n.length-1).forEach((t=>{i=i.stateByName[t]})),(i=null===(e=i)||void 0===e?void 0:e.transitionByName[(0,r.Z$)(n).replace(/__DOT__/g,".")])||console.trace("Could not find transition: ",t),i},getRelativeName(t,e){const n=(this.connectors||[]).find((n=>n.ends.includes(t)&&n.ends.includes(e)));var r,i;return n?t==n.ends[0]?(null===(r=n.endNames)||void 0===r?void 0:r[1])||e.name:(null===(i=n.endNames)||void 0===i?void 0:i[0])||e.name:e.name},getObjectRelative(t,e){const n=(this.connectors||[]).filter((e=>e.ends.some((e=>e.name===t.name)))).map((n=>{const r=n.endNames||n.ends.map((t=>t.name));switch(n.ends.findIndex((e=>e.name===t.name))){case 0:if(e===r[1])return n.ends[1];break;case 1:if(e===r[0])return n.ends[0];break;default:return}})).filter((t=>t));return 1==n.length?n[0]:0==n.length?void 0:n},fullState(t){if(t.region){var e=this.fullState(t.region);return e.push(t),e}return[]},isAfter:t=>t.trigger&&t.trigger.match(a),noEventTrigger(t){return!t.trigger||this.isAfter(t)||t.trigger.match(s)},isActive(t){var e;return(0,r.Xq)(t.states)||(0,r.Xq)(null===(e=this.getObjectClass(t))||void 0===e?void 0:e.states)},isPort:t=>"Port"==t.type,stateFullName(t){return`${t.region?`${this.stateFullName(t.region)}.`:""}${t.name}`},transFullName(t){return`${this.stateFullName(t.region)}.${t.name.replace(/\./g,"__DOT__")}`},fullStateDisplay:t=>t?t.map((t=>t.name)).join("."):t,getOtherEnd:(t,e)=>t.ends.find((t=>t!=e)),getStateObject(t){for(var e=t.region;e.region;)e=e.region;return e},getTransObject(t){for(var e=t.region;e.region;)e=e.region;return e},navigateThroughPorts(t,e,n){const r=[],i=[],a=[];for(var s,o=t,c=e;this.isPort(c);){const t=this.getConnectors(c).find((t=>!t.ends.includes(o)));r.push(t),o=c,c=this.getOtherEnd(t,c),a.push(c),i.push(t.endNames?t.endNames[t.ends.indexOf(c)]:c.name),t.incomingTag&&t.ends[0]==c&&(s=t.incomingTag),t.outgoingTag&&t.ends[1]==c&&(s=t.outgoingTag),n&&console.log("Navigating from ",o.name," through ",t.name," to ",c.name)}return{target:c,tag:s,traversedConnectors:r,traversedProperties:i,traversedObjects:a}},setInitialState(t){var n;null==e||null===(n=e.onaddobject)||void 0===n||n.call(e,t)},get afterRegex(){return a},get whenRegex(){return s}}),null==e||null===(n=e.onload)||void 0===n||n.call(e,t)}}},57:(t,e,n)=>{"use strict";n.d(e,{$m:()=>s,B8:()=>p,ES:()=>u,Le:()=>a,Sv:()=>c,tD:()=>_,zE:()=>o});var r=n(625),i=n(392);function a(t){return t?t.replace(i.E,"$1"):t}function s(t){var e;return null===(e=t.match(i.E))||void 0===e?void 0:e[2].split(",").filter((t=>t))}function o(t){const e=[...t.transitions,...t.states.flatMap((t=>Object.values(t.internalTransitions??{})))];return(0,r.vM)(e.filter((t=>t.trigger)),(t=>a(t.trigger)))}function c(t){return(t.states??[]).flatMap((t=>[t,...c(t)]))}function l(t){return c(t).filter((t=>!t.kind))}function u(t){return[...t.transitions??[],...l(t).flatMap((t=>[...t.transitions??[],...Object.values(t.internalTransitions??{})]))]}function p(t){return t&&Object.fromEntries(function t(e){var n,r;return[...Object.entries((null==e?void 0:e.operationByName)??{}),...(null==e||null===(n=e.supertypes)||void 0===n?void 0:n.flatMap(t))??[],...(null==e||null===(r=e.interfaces)||void 0===r?void 0:r.flatMap(t))??[]].filter((([t,e])=>!e.isStatic))}(t))}function _(t){return t&&Object.fromEntries(function t(e){var n,r;return[...Object.entries((null==e?void 0:e.propertyByName)??{}),...(null==e||null===(n=e.supertypes)||void 0===n?void 0:n.flatMap(t))??[],...(null==e||null===(r=e.interfaces)||void 0===r?void 0:r.flatMap(t))??[]].filter((([t,e])=>!e.isStatic))}(t))}},42:(t,e,n)=>{"use strict";n.d(e,{K:()=>s});const r={async create(t,e){const n=[];let r=!1;new Array(t).fill().forEach((async(t,i)=>{if(!r){const t=await e();var a;r||!t?null==t||null===(a=t.close)||void 0===a||a.call(t):(n.push({index:i,resource:t}),u())}}));let i=0;const a=[],s=[];let o=0,c=0,l=0;function u(){if(r)return;a.length>o&&(o=a.length),s.length>c&&(c=s.length);const t=a.length+s.length;if(t>l&&(l=t),0==n.length||0==t)return;const e=n.pop(),{index:i,resource:p}=e,{index:_,task:d,orig:m}=s.pop()??a.pop();d(p).then((()=>{n.push(e);try{u()}catch(t){console.error(t)}})).catch(console.error),u()}return{work:async(t,e)=>new Promise(((n,r)=>{(e?s:a).push({index:i++,async task(e){try{n(await t(e))}catch(t){console.log(t)}},orig:t,reject:r,resolve:n});try{u()}catch(t){console.error(t)}})),close(){r=!0,a.length+s.length>0&&console.log("Resource pool still has",a.length+s.length,"queued tasks (",a.length,"non urgent, and",s.length,"urgent)"),a.forEach((t=>t.resolve())),s.forEach((t=>t.resolve())),console.log("Resource pool had",l,"queued tasks at maximum (",o,"non urgent, and",c,"urgent)")}}}},i={async create(t,e){const n=await r.create(t,e);let i=!1;return{reset:async()=>await n.work((async t=>{if(await t.reset(),!i)return await t.getConfiguration()}),!0),getFireables:async t=>await n.work((async e=>{if(await e.setConfiguration(t),!i)return await e.getFireables()}),!0),fire:async(t,e)=>await n.work((async n=>{if(await n.setConfiguration(t),!i&&(await n.fire(e),!i))return await n.getConfiguration()}),!1),parseTransition:async t=>await n.work((async e=>await e.parseTransition(t)),!0),parseConfiguration:async t=>await n.work((async e=>await e.parseConfiguration(t)),!0),close(){i=!0,n.close()},get closed(){return i}}}};var a=n(330);async function s(t,e,n,{onfired:r,poolSize:s=4,useHash:o={name:"SHA-256"}}={}){let c,l=0,u=0,p=0,_={},d=!1,m=!1;const g=await i.create(s,t),f=await g.reset();function h(t){e&&e(l,u,p,t)}try{await async function t(e,i,s,f=0){i&&r&&r(await g.parseTransition(s),e);let y=await(0,a.w)(e,g,!o);if(_[y]);else{_[y]={from:i,transition:s};let r=await g.getFireables(e);if(!r)return!0;if(0==r.length&&p++,_[y].fireables=r,l++,u+=r.length,h(f),n){const t=await n(e,l,f);var v,b;if(t)return m=!0,null!==(v=t.includes)&&void 0!==v&&v.call(t,"memorize")&&(c=e),null!==(b=t.includes)&&void 0!==b&&b.call(t,"allBranches")&&(d=!0,g.close()),!0}if((await Promise.all(r.map((async n=>{const r=await g.fire(e,n);return d||await t(r,e,n,f+1)})))).reduce(((t,e)=>t||e),!1))return!0}return!1}(f)}catch(t){if("closed"!==t)throw t}return h(),g.closed||g.close(),{nbConfigurations:l,nbTransitions:u,nbDeadlocks:p,stoppingConditionReached:m,configs:_,stoppingConfig:c}}},985:(t,e,n)=>{"use strict";function r(t,e,n){var r=(3&t)<<4|e>>4,a=(15&e)<<2|n>>6,s=63&n,o="";return o+=i(63&t>>2),o+=i(63&r),(o+=i(63&a))+i(63&s)}function i(t){return t<10?String.fromCharCode(48+t):(t-=10)<26?String.fromCharCode(65+t):(t-=26)<26?String.fromCharCode(97+t):0==(t-=26)?"-":1==t?"_":"?"}function a(t,e){return t+"svg/"+function(t){for(var e="",n=0;n<t.length;n+=3)n+2==t.length?e+=r(t.charCodeAt(n),t.charCodeAt(n+1),0):n+1==t.length?e+=r(t.charCodeAt(n),0,0):e+=r(t.charCodeAt(n),t.charCodeAt(n+1),t.charCodeAt(n+2));return e}(pako.deflateRaw(e,{level:9,to:"string"}))}n.d(e,{K:()=>a}),n(125)},279:(t,e,n)=>{"use strict";n.d(e,{d:()=>d});var r=n(416);n(582);const i=String.raw`
	{
		const regions = [];
		let region;
		function newRegion() {
			region = {stateByName: {}, transitionByName: {}};
		}
		newRegion();
		function enter(name) {
			regions.push(region);
/*
			if(name in region.stateByName) {
console.log("region already existing", name)
				region = region[name];
			} else {
				newRegion();
			}
*/
			region = getState(name);
		}
		function leave(state) {
			const nestedRegion = region;
			region = regions.pop();
			//Object.assign(getState(state), nestedRegion);
		}
		function addTransition(trans, name) {
			simplifyTrans(trans);
			if(!name) {
				const baseName = trans.source + "2" + trans.target + "_";
				let i = 1;
				while((baseName + i) in region.transitionByName) i++;
				name = baseName + i;
			}
			region.transitionByName[name] = trans;
		}
		function addInternalTransition(state, trans, name) {
			simplifyTrans(trans);
			const st = getState(state);
			st.internalTransitions = st.internalTransitions || {};
			if(!name) {
				let i = 1;
				while(st.internalTransitions["T" + i]) i++;
				name = "T" + i;
			}
			st.internalTransitions[name] = trans;
		}
		function simplifyTrans(trans) {
			if(trans.trigger) {
				trans.trigger = trans.trigger.call + (
					trans.trigger.args
					?	"(" + (trans.trigger.args || []).join(", ") + ")"
					:	""
				);
			} else {
				trans.trigger = undefined;
			}
			if(trans.guard) {
				trans.guard = unesc(trans.guard);
			} else {
				trans.guard = undefined;
			}
			if(trans.effect) {
				trans.effect = unesc(trans.effect);
			} else {
				trans.effect = undefined;
			}
			if(trans.label) {
				trans.label = unesc(trans.label);
			} else {
				trans.label = undefined;
			}
			if(trans.comment) {
				trans.comment = unesc(trans.comment);
			} else {
				trans.comment = undefined;
			}
		}
		function unesc(s) {
			const ret = s
				.replace(/\\(.)/g, (m, c) => {
					switch(c) {
						case "\\": return "\\";
						case "n": return "\n";
						case "t": return "\t";
						default: return c;
					}
				})
			;
			return ret;
		}
		// could be generalized to addStatePropertyValue, because it is notably used with action={type: "kind", action: "choice"}
		function addStateAction(state, action) {
			const oldAction = getState(state)[action.type];
			if(oldAction) {
				console.log("warning:", action.type, "already defined for", state, "(old action:", oldAction, "; new action:", action.action, ")");
			}
			getState(state)[action.type] = unesc(action.action);
		}
		function getState(state) {
			return region.stateByName[state] = region.stateByName[state] || {stateByName: {}, transitionByName: {}};
		}
		function addInit() {
			region.stateByName.init = {type: "Pseudostate", kind: "initial"};
		}
		function addTerminate() {
			region.stateByName.__end__ = {type: "Pseudostate", kind: "terminate"};
		}
		function addShallowHistory(st) {
			const parent = getState(st);
			parent.stateByName = parent.stateByName || {};
			parent.stateByName._hist_ = {type: "Pseudostate", kind: "shallowHistory"};
		}
	}
	start =	NL* title:(_ "title" _ title:REST NL+ {return title;})?
		(transition / state / note)* _
		{return region;}

	transition = internalTransition / externalTransition
	externalTransition =	_ source:("[*]" {addInit(); return "init";} / source:ID)
				transitionArrow
				_ target:(
					"[*]" {addTerminate(); return "__end__";}
				/	st:ID _ "[H]" {addShallowHistory(st); return st + "._hist_";}
				/	h:ID t:(_ "." _ i:ID {return i;})* {return [h, ...t ?? []].join(".");}
				)
				name:transitionName?
				_ label:(
					":" _ label:(
						&(transitionLabel NL) label:transitionLabel {return label;}
					/	label:REST {return {label};}
					) {return label;}
				)? NL+
				note:transitionComment
																{addTransition(Object.assign({source, target, comment: note}, label), name);}

	transitionName =	_ "as" _ name:(ID / STRING)									{return name;}
	transitionComment =	// TODO: support note on link anywhere after a link, like PlantUML?
				note:(
					_ "note" _ "on" _ "link" _ NL+
						note:(!(_ "end" _ "note") note:REST NL {return note;})*
					_ "end" _ "note" _ NL+ {return note.join("\n");}
				)?
																{return note;}
	transitionArrow = _ "-"+ (
				direction hidden?
			/	hidden direction?
			)? "-"* ">"

	direction	=	"left" / "right" / "up" / "down"
			/	"l" / "r" / "u" / "d"

	hidden		=	"[hidden]"

	internalTransition = _ state:ID name:transitionName? _ ":" _ (		// WARNING: name allowed for stateAction although not used
					&(stateAction NL) action:stateAction							{addStateAction(state, action);}
				/	&(transitionLabel NL) label:transitionLabel						{addInternalTransition(state, label, name);}
				/	label:REST										{addInternalTransition(state, {label}, name);}
				) NL+
	state =	_ "state" _ (STRING _ "as" _ )? name:ID _ (
			"<<" _ action:("choice" / "junction" / "join") _ ">>" {addStateAction(name, {type: "kind", action});}
		/	("{" {enter(name);}) _ NL+
				(transition / state)*
			_ ("}" {leave(name);})
		)? _ NL+

	transitionLabel =	trigger:sig? _ ports:("from" _ h:ID _ t:("," _ i:ID _ {return i;})* {return [h, ...t];})? guard:("[" _ guard:[^\]\n]* _ "]" _ {return guard.join("");})? effect:(
					"/" _
					effect:(
						effect:block {return effect.flat().slice(1, -1).join("");}
					/	effect:REST {return effect;}
					) {return effect;}
				)?
				{return {trigger, ports, guard, effect};}

	block = b:("{" ([^{}] / b:block {return b.flat();})* "}") {return b.flat();}

	stateAction = type:("entry" / "exit" / "do" {return "doActivity";}) _ "/" _ action:REST {return {type, action};}
	note =	_ "note" _ ("left" / "right" / "top" / "bottom") _ "of" _ state:ID _ NL
			note:(!(_ "end" _ "note") note:REST NL {return note;})*
		_ "end" _ "note" _ NL+												{getState(state).comment = note.join("\n");}



	REST = s:[^\n]*										{return s.join("");}
	ID = h:[A-Za-z_.À-ÖØ-öø-ÿ]t:[A-Za-z0-9_.À-ÖØ-öø-ÿ]*
												{return h + t.join("");}
	STRING = '"' s:[^"]* '"'								{return s.join("");}
	sig =	call:ID _ args:("("
			args:(_ args:(h:arg t:(_ "," _ arg:arg {return arg;})* {return [h].concat(t);}) {return args;})?
		")" {return args ?? [];})?								{return {call, args};}
	arg = arg:[^,)]+ {return arg.join("");}


	NL = _ COMMENT? "\r"? "\n"
	_ = ([ \t] / "\\n")*
	COMMENT = "'" REST / "/'" (!"'/" .)* "'/"
`,a=peg.generate(i),s=String.raw`
	// TODO: {static}, {abstract} that can be anywhere in PlantUML but will not show up as is, only underline or italicize
	// TODO: stereotypes? apparently PlantUML only replaces << & >> by the corresponding Unicode quote characters
	//		notably the predefined stereotypes such as <<Create>> (for constructors), <<signal>> (for receptions, but not really a stereotype, just a notation keyword)
	//		a priori shown at the beginning of the line in UML
	operation =	_ visibility:visibility?
			_ isStatic:("{" _ "static" _ "}")?
			_ name:ID _ "(" parameters:parameters? ")" _ returnType:(":" _ type:ID _ multiplicity:multiplicity {return {type, multiplicity};})?
			stereotypes:stereotype*
			bodyAndComment:(
				"{" _ comment:comment? NL+ body:(
					//!(_ "}") body:REST NL+ {return body;}
					b:block {return b.flat();} / !(NL* _ "}") [^{}]
				)* NL* _ "}" NL+ {return {body: body.flat().join(""), comment};}
			/	comment:comment?
				NL+ {return {comment};}
			)
												{
													operationByName[name] = {
														name,
														private:	"private" === visibility ?
																	true
																:"public" === visibility ?
																	false
																:	undefined,
														isStatic: isStatic ? true : undefined,
														parameters,
														returnType: returnType?.type,
														multiplicity: returnType?.multiplicity ?? undefined,
														method: bodyAndComment.body,
														comments: bodyAndComment.comment ? [bodyAndComment.comment] : undefined,
														stereotypes,
													};
												}
	block = b:("{" ([^{}] / b:block {return b.flat();})* "}") {return b.flat();}

	parameters = _ head:parameter _ tail:("," _ param:parameter _ {return param;})*	{return [head, ...tail];}
	parameter = direction:parameterDirection? _ name:ID _ type:(":" _ type:ID _ multiplicity:multiplicity {return {type, multiplicity};})?	{
													return {
														name,
														type: type?.type,
														multiplicity: type?.multiplicity ?? undefined,
														direction: direction ?? undefined,
													};
												}

	parameterDirection = d:("in" / "inout" / "out" / "return") !IDPART			{return d;}

	comment = "''" _ c:REST {return c.replace(/\\n/g, "\n").replace(/\\(\[|])/g, "$1");}

	// TODO: {static} (& {abstract} ? supported by PlantUML, but what does it mean in UML for a property to be abstract? only Classifiers and BehavioralFeatures are supposed to be abstract)
	property =	_ visibility:visibility?
			_ isStatic:("{" _ "static" _ "}")?
			_ isDerived:("/")?
			_ name:ID
			_ type:(":" _ type:ID _ {return type;})?
			multiplicity:multiplicity
			_ isReadOnly:("{" _ "readOnly" _ "}")?
			defaultValue:("=" _ v:REST {return v;})?
			comment:comment?
			NL+									{
													propertyByName[name] = {
														type,
														isStatic: isStatic ? true : undefined,
														isReadOnly: isReadOnly ? true : undefined,
														isDerived: isDerived ? true : undefined,
														private:	"private" === visibility ?
																	true
																:"public" === visibility ?
																	false
																:	undefined,
														multiplicity,
														comments: comment ? [comment] : undefined,
													};
													if(defaultValue) {
														propertyByName[name].defaultValue = defaultValue;
													}
												}

	multiplicity = m:("[" _
				lower:("1" _ ".." _ {return 1;})?
				upper:("*" {return -1;} / INT)
			_ "]"  _ {return {lower, upper};})?
												{return m;}

	visibility =		"+" {return "public";}
			/	"-" {return "private";}
			/	"#" {return "protected";}
			/	"~" {return "package private";}


	stereotype = "<<" _ name:ID _ ">>" _							{return name};



	INT = v:[0-9]+										{return parseInt(v.join(""));}
	REST = s:[^\n]*										{return s.join("");}
	ID = h:[A-Za-z0-9_.À-ÖØ-öø-ÿ] t:IDPART*							{return h + t.join("");}
	IDPART = [A-Za-z0-9_.À-ÖØ-öø-ÿ]
	// TODO: character escapment (including unescaping backslashes)
	STRING = '"' value:[^"]* '"'								{return value.join("");}


	NL = _ SINGLE_LINE_COMMENT? "\r"? "\n"
	_ = ([ \t] / "\\n" / MULTI_LINE_COMMENT)*
	SINGLE_LINE_COMMENT	=	"'" REST
	MULTI_LINE_COMMENT	=	"/'" ([^'] / !("'/") "'")* "'/"
`,o=String.raw`
	{
		const classifiers = {};
		let operationByName;
		let propertyByName;

		function getClassifier(name) {
			//return classifiers[name] ??= {};	??= unsupported in node as of 20201202
			return classifiers[name] = classifiers[name] ?? {name};
		}

		function getInterfaces(c) {
			//return c.interfaces ??= [];
			return c.interfaces = c.interfaces ?? [];
		}
		function getSupertypes(c) {
			//return c.supertypes ??= [];
			return c.supertypes = c.supertypes ?? [];
		}
		function getComments(c) {
			//return c.comments ??= [];
			return c.comments = c.comments ?? [];
		}

		const packagePath = [];

		function enterPackage(name) {
			packagePath.push(name);
		}

		function leavePackage() {
			packagePath.pop();
		}
	}
	start =	NL* title:(_ "title" _ title:REST NL+ {return title;})?
		packageElement* _ NL*
		{return classifiers;}

	package	=	_ "package" _ name:ID _ ("{" {enterPackage(name);}) NL+
				packageElement* NL*
			_ ("}" {leavePackage();}) NL+

	packageElement	=	class / enum / note / edge / package

	class =	_ attrs:(
			ret:(
				isAbstract:("abstract" _ {return true;})? "class"	{return {isAbstract};}
			/	"interface"						{return {isInterface: true};}
			)
			{operationByName = {}; propertyByName = {}; return ret;}
		)
		_ (STRING _ "as" _)? name:ID _ stereotypes:stereotype*
		supertypes:("extends" _ head:ID _ tail:("," _ supertype:ID _ {return supertype;})* {return [head, ...tail];})?
		interfaces:("implements" _ head:ID _ tail:("," _ iface:ID _ {return iface;})* {return [head, ...tail];})?
		"{" NL+ (
			property
		/	operation
		)*
		behavior:(
			_ "behavior" _ b:block NL+ {return b.slice(1, -1).join("");}
		)?
		_ "}" NL+
												{
													const c = getClassifier(
														//[...packagePath, name].join("::")
														name
													);
													Object.assign(c, {
														...attrs,
														name,
														operationByName,
														propertyByName,
														stereotypes,
														behavior,
														packagePath: packagePath.slice(0),
													});
													supertypes && getSupertypes(c).push(...supertypes.map(getClassifier));
													interfaces && getInterfaces(c).push(...interfaces.map(getClassifier));
												}

	enum =	_ "enum" _ name:ID _ stereotypes:stereotype* "{" NL+
			literals:(_ lname:ID _ comment:comment? NL+ {return {name: lname, comments: comment ? [comment] : undefined};})*
		_ "}" NL+
												{
													const e = getClassifier(name);
													e.name = name;
													e.literals = literals;
												}

	edge = realization / generalization / association

	realization = _ left:ID _ left2right:("..|>" {return true;} / "<|.." {return false;}) _ right:ID NL+
												{
													const l = getClassifier(left);
													const r = getClassifier(right);
													if(left2right) {
														getInterfaces(l).push(r);
													} else {
														getInterfaces(r).push(l);
													}
												}

	generalization = _ left:ID _ left2right:("-"+ "|>" {return true;} / "<|" "-"+ {return false;}) _ right:ID NL+
												{
													const l = getClassifier(left);
													const r = getClassifier(right);
													if(left2right) {
														getSupertypes(l).push(r);
													} else {
														getSupertypes(r).push(l);
													}
												}

	// PlantUML does not allow < & * on the same side
	association =		_ left:ID _ leftLabel:(r:STRING _ {return r;})? leftNav:"<"? leftComp:"*"?
			"-"+ (
				direction hidden?
			/	hidden direction?
			)? "-"*
				rightComp:"*"? rightNav:">"? _ rightLabel:(r:STRING _ {return r;})? right:ID
			label:(_ ":" _ r:REST {return r;})? NL+
												{
													const assoc = getClassifier(left + "2" + right + (label ? "_" + label : ""));
													assoc.ends = [
														{
															type: getClassifier(left),
															isNavigable: !!leftNav,
															isComposite: !!rightComp,
															multiplicity: leftLabel,
														},
														{
															type: getClassifier(right),
															isNavigable: !!rightNav,
															isComposite: !!leftComp,
															multiplicity: rightLabel,
														},
													];
													assoc.label = label;
												}

	direction	=	"left" / "right" / "up" / "down"
			/	"l" / "r" / "u" / "d"

	hidden		=	"[hidden]"

	/*
		TODO:
			- keep notes as comments
			- note on property/operation
	*/
	note =	_ "note" _ ("left" / "right" / "top" / "bottom") _ "of" _ target:ID targetTail:(_ "::" _ r:ID {return r;})* _ NL
			note:(!(_ "end" _ "note") note:REST NL {return note;})*
		_ "end" _ "note" _ NL+
												{
													const tgt = getClassifier(target);
													if(targetTail.length) {
														const op = tgt.operationByName[targetTail[0]];
														if(op) {
															getComments(op).push(note.join("\n"));
														} else {
															const prop = tgt.propertyByName[targetTail[0]];
															if(prop) {
																getComments(prop).push(note.join("\n"));
															}
														}
													} else {
														getComments(tgt).push(note.join("\n"));
													}
												}


	${s}
`,c=peg.generate(String.raw`
	{
		let operationByName = {};
		let propertyByName = {};
	}
	start = NL*
		(	property
		/	operation
		)* _ {return {operationByName, propertyByName};}
	${s}
`),l=peg.generate(o);var u=n(625),p=n(263);function _(t,e,n="",r){try{return t.humanLocation=n,t.parse(e+"\n",{...r})}catch(i){function a(t){return null!=r&&r.noHTMLEsc?t:t.replace(/</g,"&lt;")}if("peg$SyntaxError"===i.constructor.name&&i.location){const s=i.location.start,o=i.location.end;o.offset==s.offset&&(o.offset==e.length?s.offset--:o.offset++);const c=`${a(e.slice(0,s.offset))}<span class="syntaxError" title="${i.message.replace(/"/g,"&quot;")}">${a(e.slice(s.offset,o.offset))}</span>${a(e.slice(o.offset))}`;if(globalThis.stateFigo)globalThis.stateFigo.innerHTML=`\n\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t.syntaxError {\n\t\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\t\tbackground-color: red;\n\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t\ttext-decoration-line: underline;\n\t\t\t\t\t\t\t\ttext-decoration-style: wavy;\n\t\t\t\t\t\t\t\ttext-decoration-color: red;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</style>\n\t\t\t\t\t\t<blockquote>\n\t\t\t\t\t\tThere is a syntax error in the following code block${n?` (${n})`:""}:\n\t\t\t\t\t\t<pre>\n\n\t\t\t\t\t\t\t${c}\n\n\t\t\t\t\t\t</pre>\n\t\t\t\t\t\tline ${i.location.start.line}, column ${i.location.start.column}: ${i.message}\n\t\t\t\t\t\t</blockquote>\n\t\t\t\t\t`,globalThis.stateFigo.data="";else{const l=8,u="  ",p=l-u.length;function _(t,e){return[...t.slice(0,e)].map((t=>"\t"===t?l:1)).reduce(((t,e)=>t+e))}const d=2,m=Math.min(d,s.line),g=2,f=o.line-s.line+1;console.log(e.split(/\r?\n/).slice(s.line-1-m,o.line+g).flatMap(((t,e)=>{const n=(s.line+e-m+"").padStart(p," ")+u;if(e>=m&&e<m+f){const r=(e===m?_(t,s.column):0)+n.length,i=1;return[n+t,"".padStart(i,"^").padStart(r+i-1," ")]}return n+t})).join("\n")),console.log(`\nerror:${n?" ":""}${n} line ${s.line}, column ${s.column}: ${i.message}`)}}throw i}}async function d(t,e){if("string"==typeof t.classes){let n=t.classes;n.match(/^#/)&&(n=await e(n));const r=_(l,n,"classes");t.classes=r}function n(t){if(t.behavior){const e=_(a,t.behavior,`behavior of object ${t.name}`);t.stateByName=e.stateByName,t.transitionByName=e.transitionByName,t.behavior=void 0}}function i(t){if(t.features){const e=_(c,t.features,`features of object ${t.name}`);t.operationByName=e.operationByName,t.propertyByName=e.propertyByName,t.features=void 0}}if(await(0,u.Ic)(t.interactions,(async(n,i)=>{const a=`interaction ${n}`;if("string"==typeof i){const e=_(r.E2,i,a);t.interactions[n]=e}else i.loadFrom&&(await e(i.loadFrom).then((t=>{const e=_(r.E2,t,a);i.lifelines=e.lifelines,i.events=e.events})),i.loadFrom=void 0);!function(t,e){function n(n,r){var i;null!==(i=t.lifelines)&&void 0!==i&&i.includes(r)||console.log(`${e}: warning: participant ${r} not found`)}(0,p.vs)(t.events,{[p.Tk](t,e){t.type??(t.type=(0,r.x6)(t)),e(t)}}),(0,p.vs)(t.events,{autoAcceptCall(t,e){n(0,t.from),n(0,t.to)},call(t,e){n(0,t.from),n(0,t.to)},found(t,e){n(0,t.to)}})}(t.interactions[n],a)})),t.objects)for(const e of t.objects)n(e),i(e);else n(t),i(t);if(t.classes)for(const e of Object.values(t.classes))n(e)}},746:(t,e,n)=>{"use strict";n.d(e,{U:()=>i,b:()=>r});class r{constructor(t){var e,n=new Promise(((n,r)=>{var i=new WebSocket(t);i.onopen=()=>n(i),i.onmessage=t=>{e&&e(t.data),e=void 0}}));this.askCommands=async()=>new Promise((async(t,n)=>{e=t,this.sendCommand("ASK_COMMANDS")})).then(JSON.parse),this.sendCommand=async(...t)=>{const e=JSON.stringify(t);(await n).send(e)},this.close=async()=>{(await n).close()}}}class i{constructor(t,e){var n=new WebSocket(t);const r=[];function i(t){n.send(t)}async function a(){return new Promise(((t,e)=>{r.push(t)}))}this.close=()=>{n.close()},n.onerror=function(t){console.log("WebSocket Error: %s",t)},n.onclose=function(){var t;null==e||null===(t=e.onclose)||void 0===t||t.call(e)};var s=Promise.resolve();n.onmessage=t=>{(function(){const n=r.shift();if(n)n(t.data);else{var o=t.data.split(":"),c=o[0],l=o.slice(1).join(":");switch(String(c)){case"RESET":this.engine.reset();break;case"GET_CONFIGURATION":s=s.then((async()=>{const t=await this.engine.getConfiguration();await i(t),null!=e&&e.ongetconfig&&await e.ongetconfig(t)}));break;case"PARSE_CONFIGURATION":{const t=a();s=s.then((async()=>{i(await this.engine.parseConfiguration(await t))}));break}case"GET_FIREABLES":s=s.then((async()=>{const t=await this.engine.getFireables();i(""+t.length);for(const e of t)i(e)}));break;case"PARSE_TRANSITION":{const t=a();s=s.then((async()=>{i(await this.engine.parseTransition(await t))}));break}case"FIRE":{const t=a();s=s.then((async()=>{await this.engine.fire(await t),null!=e&&e.onfired&&await e.onfired(await t)}));break}case"SET_CONFIGURATION":{const t=a();s=s.then((async()=>{await this.engine.setConfiguration(await t)}));break}case"EVALUATE_ATOMS":s=s.then((()=>Promise.all(l.split(";").map((async t=>{try{return await this.engine.evaluateAtom(t.replace(/\\\|/g,"|"))}catch(t){return!1}}))))).then((t=>i(JSON.stringify(t))));break;case"UUID":var u;null==e||null===(u=e.onuuid)||void 0===u||u.call(e,l);break;case"RESULTS":var p;null==e||null===(p=e.onresults)||void 0===p||p.call(e,t.data);break;case"PROGRESS":var _;null==e||null===(_=e.onprogress)||void 0===_||_.call(e,t.data);break;default:console.log("Unsupported request from server: %s",t.data)}}}).bind(this)()}}setEngine(t){this.engine=t}}},687:(t,e,n)=>{"use strict";n.d(e,{R:()=>i,k:()=>a});var r=n(991);function i(t,{origin:e,scale:n,hideLinks:i,styleMode:a}){return n=n/1.7||10,r.W`
		<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:c="http://myconstraints">
			<style>
				${"dark"===a?"svg {\n\t\t\t\t\t\t--main-fill: #070707;\n\t\t\t\t\t\t--note-fill: #131313;\n\t\t\t\t\t\t--main-stroke: #C7C7C7;\n\t\t\t\t\t\t--text-fill: #FFFFFF;\n\t\t\t\t\t\t--fragment-stroke: #FFFFFF;\n\t\t\t\t\t\t--polygon-fill: #111111;\n\t\t\t\t\t\t--background: #121212;\n\t\t\t\t\t}":"svg {\n\t\t\t\t\t\t--main-fill: #FEFECE;\n\t\t\t\t\t\t--note-fill: #FBFB77;\n\t\t\t\t\t\t--main-stroke: #A80036;\n\t\t\t\t\t\t--text-fill: #000000;\n\t\t\t\t\t\t--fragment-stroke: #000000;\n\t\t\t\t\t\t--polygon-fill: #EEEEEE;\n\t\t\t\t\t\t--background: #FFFFFF;\n\t\t\t\t\t}"}
				.participant {
					fill: var(--main-fill);
					stroke: var(--main-stroke);
					stroke-width: 1.5;
				}
				.participantName {
					stroke-width: 0;
				}
				.actor {
					fill: var(--main-fill);
					stroke: var(--main-stroke);
					stroke-width: 2;
				}
				.invariant {
					stroke: var(--main-stroke);
					fill: var(--note-fill);
				}
				.note {
					stroke: var(--main-stroke);
					fill: var(--note-fill);
				}
				.note polygon {
					fill: none;
				}
				.lifeline {
					stroke: var(--main-stroke);
					stroke-width: 1.0;
				}
				.messagePart {
					stroke: var(--main-stroke);
					stroke-width: 1.0;
				}
				.messageArrow {
					stroke: var(--main-stroke);
					stroke-width: 1.0;
					marker-end: url(#arrowHead);
				}
				.messageArrowHead {
					fill: var(--main-stroke);
					stroke: var(--main-stroke);
					stroke-width: 1.0;
				}
				.circle {
					stroke: var(--main-stroke);
				}
				.found circle {
					fill: none;
				}
				.set rect {
					fill: none;
				}
				.fragment rect {
					stroke: var(--fragment-stroke);
					stroke-width: 2.0;
					fill: none;
				}
				.fragment polygon {
					fill: var(--polygon-fill);
					stroke: var(--fragment-stroke);
					stroke-width: 1.0;
				}
				text {
					fill: var(--text-fill);
				}
				.fragment text, .compartment text {
					font-weight: bold;
				}
				.compartment line {
					stroke: black;
					stroke-dasharray: 2.0,2.0;
				}
				${i?"":r.W`
					a[*|href] > text {
					fill: blue; text-decoration: underline;
				}`}
				.dashed {
					stroke-dasharray: 2.0,2.0;
				}
				#horizontalWhiteStripes * {
					stroke: var(--background)!important;
				}
			</style>
			${'\n\t<script>\n\t\t\n\t\tvar OCLLibrary = {\n\t\t    __asArray(x) {\n\t\t        if (Array.isArray(x)) {\n\t\t            return x;\n\t\t        }\n\t\t        else {\n\t\t            return [x];\n\t\t        }\n\t\t    },\n\t\t\n\t\t    size(collection) {\n\t\t        return this.__asArray(collection).length;\n\t\t    },\n\t\t\n\t\t    notEmpty(collection) {\n\t\t        return this.size(collection) != 0;\n\t\t    },\n\t\t\n\t\t    empty(collection) {\n\t\t        return this.size(collection) == 0;\n\t\t    },\n\t\t\n\t\t    union(lhs, rhs) {\n\t\t        return lhs.concat(rhs);\n\t\t    },\n\t\t\n\t\t    at(collection, idx) {\n\t\t        return this.__asArray(collection)[idx - 1];\n\t\t    },\n\t\t\n\t\t    subSequence(collection, start, end) {\n\t\t        return this.__asArray(collection).slice(start - 1, end);\n\t\t    },\n\t\t\n\t\t    sum(collection) {\n\t\t        return this.__asArray(collection).reduce((acc, val) => acc + val);\n\t\t    },\n\t\t\n\t\t    iterate(collection, seed, lambda) {\n\t\t        return this.__asArray(collection).reduce(lambda, seed);\n\t\t    },\n\t\t\n\t\t    collect(collection, lambda) {\n\t\t        return this.__asArray(collection).map(lambda);\n\t\t    },\n\t\t\n\t\t    zipWith(left, right, lambda) {\n\t\t\tconst length = Math.min(left.length, right.length);\n\t\t        return left.slice(0, length).map((v, idx) => lambda(v, right[idx]));\n\t\t    },\n\t\t\n\t\t    prepend(collection, element) {\n\t\t        return [element].concat(collection);\n\t\t    },\n\t\t\n\t\t    includes(collection, element) {\n\t\t        return this.__asArray(collection).includes(element);\n\t\t    },\n\t\t\n\t\t    oclIsUndefined(val) {\n\t\t        return val ? false : true;\n\t\t    },\n\t\t\n\t\t    oclType(val) {\n\t\t        //TODO implement oclType\n\t\t    },\n\t\t\n\t\t    oclIsKindOf(val, type) {\n\t\t        //TODO implement oclIsKindOf\n\t\t    },\n\t\t\n\t\t    toString(val) {\n\t\t        return val.toString();\n\t\t    },\n\t\t\n\t\t    asOrderedSet(collection) {\n\t\t        return new Set(collection);\n\t\t    },\n\t\t\n\t\t    startWiths(str, prefix) {\n\t\t        return str.startWiths(prefix);\n\t\t    },\n\t\t\n\t\t    first(collection) {\n\t\t        return this.__asArray(collection)[0];\n\t\t    },\n\t\t\n\t\t    last(collection) {\n\t\t        let c = this.__asArray(collection);\n\t\t        return c[c.length - 1];\n\t\t    },\n\t\t\n\t\t    toInteger(string) {\n\t\t        return string * 1;\n\t\t    },\n\t\t}\n\t\t\n\t\t\n\n\t\t// 19:1-19:34\n\t\tfunction __attribute__HEAD_R() {\n\t\t\treturn 8\n\t\t\t;\n\t\t}\n\t\t// 20:1-20:40\n\t\tfunction __attribute__BODY_LENGTH() {\n\t\t\treturn 27\n\t\t\t;\n\t\t}\n\t\t// 21:1-21:39\n\t\tfunction __attribute__ARM_LENGTH() {\n\t\t\treturn 26\n\t\t\t;\n\t\t}\n\t\t// 22:1-22:37\n\t\tfunction __attribute__HEAD2ARMS() {\n\t\t\treturn 8\n\t\t\t;\n\t\t}\n\t\t// 23:1-23:39\n\t\tfunction __attribute__LEG_HEIGHT() {\n\t\t\treturn 15\n\t\t\t;\n\t\t}\n\t\t// 25:1-25:48\n\t\tfunction __attribute__INTER_OBJECT_MARGIN() {\n\t\t\treturn 100\n\t\t\t;\n\t\t}\n\t\t// 26:1-26:48\n\t\tfunction __attribute__INTER_MESSAGE_MARGIN() {\n\t\t\treturn 50\n\t\t\t;\n\t\t}\n\t\t// 27:1-27:34\n\t\tfunction __attribute__MARGIN() {\n\t\t\treturn 10\n\t\t\t;\n\t\t}\n\t\t// 29:1-29:32\n\t\tfunction __attribute__scale() {\n\t\t\treturn 10.0\n\t\t\t;\n\t\t}\n\t\t// 34:1-36:35\n\t\tfunction SVG__Rectangle__mustContainX(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\t\tother\n\t\t\t\t.ge(\n\t\t\t\t\tself.x\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 35:3-35:18"\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\tother\n\t\t\t\t.le(\n\t\t\t\t\t\tself.x\n\t\t\t\t\t.plus(\n\t\t\t\t\t\tself.width\n\t\t\t\t\t)\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 36:6-36:34"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 39:1-41:37\n\t\tfunction SVG__Rectangle__mustContainX_2(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\t\tother.x\n\t\t\t\t.ge(\n\t\t\t\t\tself.x\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 40:3-40:20"\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\tother.x\n\t\t\t\t.le(\n\t\t\t\t\t\tself.x\n\t\t\t\t\t.plus(\n\t\t\t\t\t\tself.width\n\t\t\t\t\t)\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 41:6-41:36"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 44:1-46:38\n\t\tfunction SVG__Rectangle__mustContainY(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\t\tother.y\n\t\t\t\t.ge(\n\t\t\t\t\tself.y\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 45:3-45:20"\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\tother.y\n\t\t\t\t.le(\n\t\t\t\t\t\tself.y\n\t\t\t\t\t.plus(\n\t\t\t\t\t\tself.height\n\t\t\t\t\t)\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 46:6-46:37"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 49:1-51:31\n\t\tfunction SVG__Rectangle__mustContain(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\tSVG__Rectangle__mustContainX_2(self, other)\n\t\t\t.and(\n\t\t\t\tSVG__Rectangle__mustContainY(self, other)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 54:1-56:42\n\t\tfunction SVG__Rectangle__mustContain_2(self, other) {\n\t\t\treturn new tcsvg.Constraints().and(\tSVG__Rectangle__mustContain(self, other.topLeft)\n\t\t\t.and(\n\t\t\t\tSVG__Rectangle__mustContain(self, other.bottomRight)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 59:1-62:56\n\t\tfunction textOutline(outline, name) {\n\t\t\treturn new tcsvg.Constraints().and(\t\t\toutline.width\n\t\t\t\t\t.ge(\n\t\t\t\t\t\t\tname.width\n\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__MARGIN()))\n\t\t\t\t\t\t\t.times(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 60:3-60:54"\n\t\t\t\t\t)\n\t\t\t\t.and(\n\t\t\t\t\t\tname.center\n\t\t\t\t\t.eq(\n\t\t\t\t\t\toutline.center\n\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 61:6-61:34"\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\toutline.height\n\t\t\t\t.ge(\n\t\t\t\t\t\tname.height\n\t\t\t\t\t.plus(\n\t\t\t\t\t\t(new tcsvg.Expression(__attribute__MARGIN()))\n\t\t\t\t\t)\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 62:6-62:55"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 65:1-85:45\n\t\tfunction participantConstraints(part) {\n\t\t\treturn new tcsvg.Constraints().and(((tgt) => (\n\t\t\t\t((afterTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(part.x))) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpart.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 70:4-70:26"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpart.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 71:7-71:29"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: new tcsvg.Constraints())\n\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(part.after))) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.bottom.p1.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.bottom.p1.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 74:4-74:58"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__INTER_OBJECT_MARGIN()))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 75:7-75:140"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p2.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.line.p2.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 76:7-76:41"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: new tcsvg.Constraints())\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p1\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.outline.bottom.center\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 78:6-78:45"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p2.x\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 79:6-79:35"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p2.y\n\t\t\t\t\t\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\t\t\t\t\t\ttgt.line.p1.y\n\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(20))\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 80:6-80:41"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\ttextOutline(tgt.outline, tgt.name)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\ttextOutline(tgt.outline2, tgt.name2)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\ttgt.line2.p1\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\ttgt.line.p2\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 83:6-83:32"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\ttgt.line2.p2\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\ttgt.line2.p1.dy((new tcsvg.Expression(40)))\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 84:6-84:40"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\ttgt.line2.p2\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\ttgt.outline2.top.center\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 85:6-85:44"\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t))(part.after)\n\t\t\t))(part)\n\t\t\t);\n\t\t}\n\t\t// 120:1-129:85\n\t\tfunction actor(head, body, arms, leftLeg, rightLeg) {\n\t\t\treturn new tcsvg.Constraints().and(\t\t\t\t\t\t\t\t\thead.r\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__HEAD_R()))\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 121:3-121:29"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tbody.p1\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\thead.center.dy((new tcsvg.Expression(__attribute__HEAD_R())))\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 122:6-122:49"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tbody.p2\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tbody.p1.dy((new tcsvg.Expression(__attribute__BODY_LENGTH())))\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 123:6-123:50"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tarms.p1\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tbody.p1.plus(\t(new tcsvg.Expression(__attribute__ARM_LENGTH())).neg\n\t\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t), (new tcsvg.Expression(__attribute__HEAD2ARMS())))\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 124:6-124:76"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tarms.p2\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tbody.p1.plus(\t(new tcsvg.Expression(__attribute__ARM_LENGTH()))\n\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t), (new tcsvg.Expression(__attribute__HEAD2ARMS())))\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 125:6-125:75"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tleftLeg.p1\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tbody.p2\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 126:6-126:26"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tleftLeg.p2\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tleftLeg.p1.plus(\t(new tcsvg.Expression(__attribute__ARM_LENGTH())).neg\n\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t), (new tcsvg.Expression(__attribute__LEG_HEIGHT())))\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 127:6-127:83"\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t.and(\n\t\t\t\t\t\trightLeg.p1\n\t\t\t\t\t.eq(\n\t\t\t\t\t\tbody.p2\n\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 128:6-128:27"\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t.and(\n\t\t\t\t\trightLeg.p2\n\t\t\t\t.eq(\n\t\t\t\t\trightLeg.p1.plus(\t(new tcsvg.Expression(__attribute__ARM_LENGTH()))\n\t\t\t\t\t.div(\n\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t), (new tcsvg.Expression(__attribute__LEG_HEIGHT())))\n\t\t\t\t\t, "./Sequence2TCSVG.atl - 129:6-129:84"\n\t\t\t\t)\n\t\t\t)\n\t\t\t);\n\t\t}\n\t\t// 169:1-172:52\n\t\tfunction eventConstraints(e, on) {\n\t\t\treturn new tcsvg.Constraints().and(((tgt) => (\n\t\t\t\teventConstraints2(e, on, tgt.outline)\n\t\t\t))(e)\n\t\t\t);\n\t\t}\n\t\t// 175:1-179:52\n\t\tfunction eventConstraints2(e, on, outline) {\n\t\t\treturn new tcsvg.Constraints().and(((tgt) => (\n\t\t\t\t\t\toutline.center.x\n\t\t\t\t\t.eq(\n\t\t\t\t\t\ttgt.line.p1.x\n\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 178:3-178:35"\n\t\t\t\t\t)\n\t\t\t\t.and(\n\t\t\t\t\teventConstraintsY2(e, on, outline)\n\t\t\t\t)\n\t\t\t))(on)\n\t\t\t);\n\t\t}\n\t\t// 183:1-186:53\n\t\tfunction eventConstraintsY(e, on) {\n\t\t\treturn new tcsvg.Constraints().and(((tgt) => (\n\t\t\t\teventConstraintsY2(e, on, tgt.outline)\n\t\t\t))(e)\n\t\t\t);\n\t\t}\n\t\t// 190:1-210:4\n\t\tfunction eventConstraintsY2(e, on, outline) {\n\t\t\treturn new tcsvg.Constraints().and(((scale) => (\n\t\t\t\t((onTgt) => (\n\t\t\t\t\t((afterTgt) => (\n\t\t\t\t\t\t((parentTgt) => (\n\t\t\t\t\t\t\t\t\t\tonTgt.line.p2.y\n\t\t\t\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\t\t\toutline.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 196:3-196:42"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(e.after)))) ? (\n\t\t\t\t\t\t\t\t\t\t\toutline.y\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 198:3-198:52"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(e.parent)))) ? (\n\t\t\t\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(parentTgt.label)))) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline.y\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparentTgt.label.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 201:4-201:52"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline.y\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparentTgt.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 203:4-203:43"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\toutline.y\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\tonTgt.line.p1.y\n\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscale\n\t\t\t\t\t\t\t\t\t\t\t\t\t.times(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 206:3-206:42"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t((! (OCLLibrary.oclIsUndefined(e.parent))) ?\n\t\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(parentTgt.outline, outline.enlarge((new tcsvg.Expression(5))))\n\t\t\t\t\t\t\t\t: new tcsvg.Constraints())\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(e.parent)\n\t\t\t\t\t))(e.after)\n\t\t\t\t))(on)\n\t\t\t))((new tcsvg.Expression(__attribute__scale())))\n\t\t\t);\n\t\t}\n\t<\/script>\n\t<defs>\n\t\t\x3c!-- 95:1-117:2 --\x3e\n\t\t<g id="object" >\n\t\t\t<line class="lifeline" id=".line"/>\n\t\t\t<rect class="participant" id=".outline"/>\n\t\t\t<text class="participantName" content-value="param(name)" id=".name">default</text>\n\t\t\t<line class="lifeline" id=".line2"/>\n\t\t\t<rect class="participant" id=".outline2"/>\n\t\t\t<text class="participantName" content-value="param(name)" id=".name2">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints>\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn participantConstraints(s);\n\t\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 131:1-166:2 --\x3e\n\t\t<g id="actor" class="actor">\n\t\t\t<line class="lifeline" id=".line"/>\n\t\t\t<rect display="none" id=".outline"/>\n\t\t\t<text class="participantName" content-value="param(name)" id=".name">default</text>\n\t\t\t<circle id=".head"/>\n\t\t\t<line id=".body"/>\n\t\t\t<line id=".arms"/>\n\t\t\t<line id=".leftLeg"/>\n\t\t\t<line id=".rightLeg"/>\n\t\t\t<line class="lifeline" id=".line2"/>\n\t\t\t<rect display="none" fill="none" id=".outline2"/>\n\t\t\t<text class="participantName" content-value="param(name)" id=".name2">default</text>\n\t\t\t<circle id=".head2"/>\n\t\t\t<line id=".body2"/>\n\t\t\t<line id=".arms2"/>\n\t\t\t<line id=".leftLeg2"/>\n\t\t\t<line id=".rightLeg2"/>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="participant">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn participantConstraints(s);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="actorTop">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn \tactor(this.head, this.body, this.arms, this.leftLeg, this.rightLeg)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tthis.outline.top.center\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tthis.body.p2.dy((new tcsvg.Expression(__attribute__LEG_HEIGHT())))\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 162:10-162:64"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="actorBot">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn \tactor(this.head2, this.body2, this.arms2, this.leftLeg2, this.rightLeg2)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tthis.outline2.bottom.center\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tthis.head2.center.dy((new tcsvg.Expression(__attribute__HEAD_R())).neg)\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 164:10-164:70"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 220:1-232:2 --\x3e\n\t\t<g id="call" >\n\t\t\t<rect display="param(cursor) none" height="10" id=".outline" width="10"/>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 234:1-254:2 --\x3e\n\t\t<g id="accept" >\n\t\t\t<rect display="param(cursor) none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="acceptCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((callTgt) => (\n\t\t\t\t\t\t\t\t\tthis.line.p1\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tcallTgt.outline.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 250:6-250:38"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.line.p2\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 251:9-251:33"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 252:9-252:41"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t))(s.call);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 256:1-276:2 --\x3e\n\t\t<g id="direct" >\n\t\t\t<rect display="param(cursor) none" height="10" id=".outline" width="10"/>\n\t\t\t<rect display="param(cursor) none" fill="none" height="10" id=".source" width="10"/>\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstrFrom">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints2(s, s.from, this.source);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="eventCstrTo">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints2(s, s.to, this.outline);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="directCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn \t\t\tthis.line.p1\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tthis.source.center\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 272:6-272:29"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tthis.line.p2\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 273:9-273:33"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 274:9-274:41"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 278:1-305:2 --\x3e\n\t\t<g id="selfaccept" >\n\t\t\t<rect display="none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messagePart" id=".line1"/>\n\t\t\t<line class="messagePart" id=".line2"/>\n\t\t\t<line class="messageArrow" id=".line3"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="selfAcceptCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((DX) => (\n\t\t\t\t\t\t((callTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p1\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcallTgt.outline.center\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 297:6-297:39"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p2\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p1.dx(DX)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 298:9-298:35"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p1\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p2\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 299:9-299:28"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line3.p1\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p2\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 300:9-300:28"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line3.p2\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tthis.line3.p1.dx(DX.neg)\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 301:9-301:36"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line3.p2\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 302:9-302:34"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.left.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line2.center.dx((new tcsvg.Expression(5)))\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 303:9-303:46"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(s.call)\n\t\t\t\t\t))((new tcsvg.Expression(20)));\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 307:1-327:2 --\x3e\n\t\t<g id="unaccepted" >\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="unacceptedCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((callTgt) => (\n\t\t\t\t\t\t((rightmostTgt) => (\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tcallTgt.outline.center\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 322:6-322:38"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p2.y\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1.y\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 323:9-323:30"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line.p2.x\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\trightmostTgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(150))\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 324:9-324:49"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 325:9-325:41"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(s.rightmost)\n\t\t\t\t\t))(s.call);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 329:1-353:2 --\x3e\n\t\t<g id="found" class="found">\n\t\t\t<rect display="none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t<circle class="circle" display="param(circle) yes" id=".circle" r="5"/>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="unacceptedCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((leftmostTgt) => (\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1.x\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tleftmostTgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t\t.minus(\n\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(150))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 347:6-347:45"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1.y\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p2.y\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 348:9-348:30"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line.p2\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 349:9-349:33"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.circle.center.dx((new tcsvg.Expression(5)))\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line.p1\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 350:9-350:38"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 351:9-351:41"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t))(s.leftmost);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 355:1-383:2 --\x3e\n\t\t<g id="set" class="set">\n\t\t\t<rect display="none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messagePart" id=".line1"/>\n\t\t\t<line class="messagePart" id=".line2"/>\n\t\t\t<line class="messageArrow" id=".line3"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="selfAcceptCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((DX) => (\n\t\t\t\t\t\t((DY) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p1\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 375:6-375:31"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p2\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p1.dx(DX)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 376:9-376:35"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p1\n\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.line1.p2\n\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 377:9-377:28"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p2\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line2.p1.dy(DY)\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 378:9-378:35"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line3.p1\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tthis.line2.p2\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 379:9-379:28"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line3.p2\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.line3.p1.dx(DX.neg)\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 380:9-380:36"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.left.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line2.center.dx((new tcsvg.Expression(5)))\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 381:9-381:46"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))((new tcsvg.Expression(15)))\n\t\t\t\t\t))((new tcsvg.Expression(20)));\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 385:1-408:2 --\x3e\n\t\t<g id="after" >\n\t\t\t<rect fill="url(#horizontalWhiteStripes)" id=".outline" stroke="none"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="onCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn (OCLLibrary.iterate(OCLLibrary.collect(s.on, (o) => ((oTgt) => (\n\t\t\t\t\t\t\t\teventConstraintsY(s, o)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\toTgt.outline.center.x\n\t\t\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\t\t\tthis.outline.x\n\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(5))\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 401:10-401:48"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\toTgt.outline.center.x\n\t\t\t\t\t\t\t.le(\n\t\t\t\t\t\t\t\t\tthis.outline.topRight.x\n\t\t\t\t\t\t\t\t.minus(\n\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(5))\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 402:10-402:57"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t))(o)), (new tcsvg.Constraints()),\n\t\t\t\t\t\t(acc, c) => \tacc\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\tc\n\t\t\t\t\t\t)\n\t\t\t\t\t))\n\t\t\t\t\t;\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="cstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn \t\tthis.outline.height\n\t\t\t\t\t\t.ge(\n\t\t\t\t\t\t\t\tthis.text.height\n\t\t\t\t\t\t\t.times(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 405:6-405:39"\n\t\t\t\t\t\t)\n\t\t\t\t\t.and(\n\t\t\t\t\t\t\tthis.text.center\n\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 406:9-406:37"\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 410:1-447:2 --\x3e\n\t\t<g id="note" >\n\t\t\t<rect class="note" display="none" id=".outline"/>\n\t\t\t<polygon class="note" id=".polygon"/>\n\t\t\t<text content-value="param(note)" id=".text">default<title content-value="param(title)">no title</title></text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraintsY(s, OCLLibrary.first(s.on));\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="outlCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((first) => (\n\t\t\t\t\t\t((last) => (\n\t\t\t\t\t\t\t\t\tthis.outline.center.x\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tlast.outline.center.x\n\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\tfirst.outline.center.x\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 430:6-430:77"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 431:9-431:37"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(OCLLibrary.last(s.on))\n\t\t\t\t\t))(OCLLibrary.first(s.on));\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="polyCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((DELTA) => (\n\t\t\t\t\t\t((M) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(this.outline, this.text.enlarge(M, M, \tM\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDELTA\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t), M))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(0)), this.outline.topLeft)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(1)), this.outline.topRight.dx(DELTA.neg))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(2)), this.outline.topRight.plus(DELTA.neg, DELTA))\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(3)), this.outline.topRight.dx(DELTA.neg))\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(4)), this.outline.topRight.dy(DELTA))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(5)), this.outline.topRight.plus(DELTA.neg, DELTA))\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(6)), this.outline.topRight.dy(DELTA))\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(7)), this.outline.bottomRight)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(8)), this.outline.bottomLeft)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(\t(new tcsvg.Expression(__attribute__MARGIN()))\n\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t(new tcsvg.Expression(3))\n\t\t\t\t\t\t))\n\t\t\t\t\t))((new tcsvg.Expression(10)));\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 449:1-474:2 --\x3e\n\t\t<g id="invariant" >\n\t\t\t<rect display="none" id=".outline" width="10"/>\n\t\t\t<rect display="none" height="10" id=".helpr" width="10"/>\n\t\t\t<polygon class="invariant" id=".polygon"/>\n\t\t\t<a href-value="param(link) default">\n\t\t\t\t\t\t\t\t\t<text class="invariantText" content-value="param(invariant)" id=".text">default</text>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraints(s, s.on);\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="invCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((width) => (\n\t\t\t\t\t\t((height) => (\n\t\t\t\t\t\t\t\t\t\t\tthis.outline.height\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\theight\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 469:6-469:29"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.polygon.constrainTEllipse(this.helpr.x, this.helpr.y, \twidth\n\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\theight\n\t\t\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t), width)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.polygon.center\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 471:9-471:40"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 472:9-472:37"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(\tthis.text.height\n\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__MARGIN()))\n\t\t\t\t\t\t\t.times(\n\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))\n\t\t\t\t\t))(this.text.width);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 476:1-513:2 --\x3e\n\t\t<g id="fragment" class="fragment">\n\t\t\t<rect id=".outline"/>\n\t\t\t<polygon id=".polygon"/>\n\t\t\t<text content-value="param(label)" id=".label">default</text>\n\t\t\t<text content-value="param(condition)" id=".condition">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="eventCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn eventConstraintsY(s, OCLLibrary.first(s.on));\n\t\t\t}\n\t\t\t</constraints>\n\t\t\t<constraints name="outlCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((lblOutline) => (\n\t\t\t\t\t\t((first) => (\n\t\t\t\t\t\t\t((last) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlast.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfirst.outline.center.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.div(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(2))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 496:6-496:77"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(OCLLibrary.iterate(OCLLibrary.collect(s.on, (o) => ((DX) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t((oTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.mustContainX(\toTgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDX\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.mustContainX(\toTgt.line.p1.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.minus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDX\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))(o)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))((new tcsvg.Expression(5)))), (new tcsvg.Constraints()),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(acc, c) => \tacc\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tc\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlblOutline.topLeft\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.topLeft\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 504:9-504:45"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(0)), lblOutline.topLeft)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(1)), lblOutline.topRight.dx((new tcsvg.Expression(10))))\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(2)), lblOutline.topRight.plus((new tcsvg.Expression(10)), (new tcsvg.Expression(10))))\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(3)), lblOutline.bottomRight)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.polygon.pointEq((new tcsvg.Expression(4)), lblOutline.bottomLeft)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.condition.topLeft\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tlblOutline.topRight.dx((new tcsvg.Expression(20)))\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 510:9-510:55"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(this.outline, this.condition)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t))(OCLLibrary.last(s.on))\n\t\t\t\t\t\t))(OCLLibrary.first(s.on))\n\t\t\t\t\t))(this.label.enlarge((new tcsvg.Expression(__attribute__MARGIN())), (new tcsvg.Expression(0))));\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 515:1-544:2 --\x3e\n\t\t<g id="compartment" class="compartment">\n\t\t\t<rect display="none" id=".outline"/>\n\t\t\t<line id=".line"/>\n\t\t\t<text content-value="param(condition)" id=".label">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="compCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((parTgt) => (\n\t\t\t\t\t\t((afterTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.x\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 532:6-532:34"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 533:9-533:45"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\t(OCLLibrary.oclIsUndefined(s.after)) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 535:7-535:35"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafterTgt.outline.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(__attribute__scale()))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 537:7-537:67"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.line\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.top\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 539:9-539:27"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.label.topLeft.x\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tparTgt.label.enlarge((new tcsvg.Expression(__attribute__MARGIN())), (new tcsvg.Expression(0))).topRight.x\n\t\t\t\t\t\t\t\t\t\t\t.plus(\n\t\t\t\t\t\t\t\t\t\t\t\t(new tcsvg.Expression(20))\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 540:9-540:85"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(this.outline, this.label)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(parTgt.outline, this.outline)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(s.after)\n\t\t\t\t\t))(s.parent);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 546:1-568:2 --\x3e\n\t\t<g id="textcompartment" class="textcompartment">\n\t\t\t<rect display="none" id=".outline"/>\n\t\t\t<text content-value="param(label)" id=".label">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="compCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((parTgt) => (\n\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.x\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.x\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 561:6-561:34"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.outline.width\n\t\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\t\tparTgt.outline.width\n\t\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 562:9-562:45"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.outline.y\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tparTgt.label.bottomLeft.y\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 563:9-563:46"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.label.center\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 564:9-564:38"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(this.outline, this.label.enlarge((new tcsvg.Expression(10))))\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\tSVG__Rectangle__mustContain_2(parTgt.outline, this.outline)\n\t\t\t\t\t\t)\n\t\t\t\t\t))(s.parent);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t\t\x3c!-- 570:1-592:2 --\x3e\n\t\t<g id="actualgate">\n\t\t\t<rect display="param(cursor) none" height="10" id=".outline" width="10"/>\n\t\t\t<line class="messageArrow" id=".line"/>\n\t\t\t<text class="messageSignature" content-value="param(signature)" id=".text">default</text>\n\t\t\t\x3c!-- constraints --\x3e\n\t\t\t<constraints name="compCstr">\n\t\t\t\t{\n\t\t\t\t\tlet s = this;\n\t\t\t\t\treturn ((fragTgt) => (\n\t\t\t\t\t\t((callTgt) => (\n\t\t\t\t\t\t\t\t\t\tthis.outline.center.onSegment(fragTgt.outline.left)\n\t\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\t\tthis.line.p1\n\t\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\t\tcallTgt.outline.center\n\t\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 588:9-588:41"\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\t\tthis.line.p2\n\t\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\t\tthis.outline.center\n\t\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 589:9-589:33"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.and(\n\t\t\t\t\t\t\t\t\tthis.text.bottom.center\n\t\t\t\t\t\t\t\t.eq(\n\t\t\t\t\t\t\t\t\tthis.line.center\n\t\t\t\t\t\t\t\t\t, "./Sequence2TCSVG.atl - 590:9-590:41"\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t))(s.call)\n\t\t\t\t\t))(s.fragment);\n\t\t\t}\n\t\t\t</constraints>\n\t\t</g>\n\t</defs>\n\t<marker id="arrowHead" markerWidth="10" markerHeight="8" refX="10" refY="4" orient="auto">\n\t\t<polygon class="messageArrowHead" points="0,0,10,4,0,8,6,4"/>\n\t</marker>\n\t<pattern id="horizontalWhiteStripes" patternUnits="userSpaceOnUse" width="4" height="4">\n\t\t<line x1="-5" y1="0" x2="9" y2="0" style="stroke-width: 4; stroke: white;"/>\n\t</pattern>\n'}

			${t}

			<script>
				function __attribute__scale() {
					return ${n??10};
				}
			</script>

			<script xlink:href="${e}tcsvg/c.js"/>
			<script xlink:href="${e}tcsvg/TCSVG.min.js"/>
		</svg>
	`.replace(/([^:])\/\/[^\n]*/g,"$1\n").replace(/\t/g," ")}function a(t){return t.querySelectorAll("use,defs>g,script,constraints,[display=none]").forEach((t=>t.remove())),t.querySelectorAll("[params]").forEach((t=>t.removeAttribute("params"))),t.querySelectorAll("[content-value]").forEach((t=>t.removeAttribute("content-value"))),t.querySelectorAll("text").filter((t=>" "===t.innerHTML)).forEach((t=>t.remove())),t.innerHTML.replace(/(<a .*?)(xlink:)?href="[^"]*"/g,"$1")}},991:(t,e,n)=>{"use strict";function r(t,...e){const n=t[0].replace(/^\s*\n/,""),r=n.replace(/^(\s*)[\s\S]*$/,"$1");function i(t){return t.replace(new RegExp(`^${r}`,"mg"),"")}function a(t){return"number"==typeof t?t:t.replace(/\n/g,`\n${c}`)}function s(t){return t.replace(/^[\s\S]*\n/,"")}var o=i(n),c=s(o);return e.forEach(((n,r)=>{var l=i(t[r+1]);""===(n=Array.isArray(n)?n.map(a).join(`\n${c}`):0==n||n?a(n):"")?o.match(/\n\s*$/)&&l.match(/^\s*\n/)&&(o=o.replace(/\n\s*$/,"")):o+=n,r==e.length-1&&(l=l.trimEnd()),o+=l,c=s(l)})),o}n.d(e,{W:()=>r})},54:(t,e,n)=>{"use strict";n.d(e,{W:()=>a});var r=n(625),i=n(57);function a(t,e,n=!0){var a={states:{},transitions:{}};let s=!1;function o(t){return t.trigger.replace(e.afterRegex,"$1")}function c(t){return`TO${p(t)}`}function l(t){return"shallowHistory"===t.kind&&t.incoming.some((e=>e.source!=t.region))}function u(n){const r=b.filter((t=>t.source==n));if(l(n)){const i=n.region,a=e.getInitial(i).outgoing[0],s=a.target;return[...r,...i.states.filter((t=>!t.kind)).map((r=>({name:`__${n.name}2${r.name}__`,region:t,source:n,target:r,guard:`_histories_['${e.stateFullName(i)}'] == '${r.name}'`}))),{name:`__${n.name}else__`,region:t,source:n,target:s,guard:"else",effect:a.effect}]}return r}function p(t){return t.replace(/[ .]/g,"_").replace(/</g,"LT").replace(/>/g,"GT").replace(/=/g,"EQ").replace(/&/g,"AMP").replace(/[|]/g,"PIPE").replace(/[(]/g,"LPAREN").replace(/[)]/g,"RPAREN").replace(/,/g,"COMMA").replace(/!/g,"QMARK").replace(/==/g,"EQ").replace(/\+/g,"PLUS").replace(/-/g,"MINUS")}function _(t){const e=p(t);return"else"===e?"GUARD_else":"GUARD_"+e}function d(t){return t.states&&t.states.length>0}function m(t,e,n){return(t.states||[]).filter((t=>!(e&&"initial"==t.kind))).flatMap((t=>{var e=m(t,!0,n);return 0==e.length?[t]:n?[t].concat(e):e}))}function g(t){return function(t){return!t.region}(t.region)?t.name:`${g(t.region)}${n?".":"_"}${t.name}`}function f(r){if(r){var i=e.stateFullName(r),s=a.states[i];return s||(s={},a.states[i]=s,s.region=f(t),s.name=g(r),s.incoming=function(t){return b.filter((e=>e.target==t))}(r).map(y),s.outgoing=u(r).map(y),"choice"===r.kind?s.kind=void 0:"shallowHistory"===r.kind?l(r)?s.kind="choice":s.kind=void 0:s.kind=r.kind,s.doActivity=r.doActivity,s.internalTransitions={},[...Object.entries(r.region.internalTransitions||{}).map((([t,e])=>[`${r.region.name}_${t}`,e])),...Object.entries(r.internalTransitions||{})].map((([t,e])=>{const i=y(e);s.internalTransitions[t]=i,s.internalTransitions[t].isInternal=!0;const a=n?`__internal__${t}__`:`__internal__${r.name}__${t}__`;s.internalTransitions[t].name=a,s.internalTransitions[t].source=s,s.internalTransitions[t].target=s,s.internalTransitions[t].region=s,s.transitionByName=s.transitionByName||{},s.transitionByName[a]=i}))),s}}function h(t){var n="choice"===t.source.kind&&t.guard?`${_(t.guard)}`:t.trigger||"";return n.match(e.afterRegex)?n=c(o(t)):n.match(e.whenRegex),""==n?void 0:n}function y(n){const a=function(n){var a;function l(t){var e,n;n=""==t?void 0:t,a=(e=a)&&""!=e?n&&""!=n?`${e}\n${n}`:e:n&&""!=n?n:void 0}const p=e.fullState(n.source),d=e.fullState(n.target);let m=0;for(;m<p.length&&m<d.length&&p[m]===d[m]&&(n.source!=p[m]||n.isInternal);m++);if(p.splice(0,m),d.splice(0,m),!n.isInternal){l(function(t){var n="";return(u(t.source)||[]).filter((n=>t!=n&&(n.trigger||"").match(e.afterRegex))).forEach((t=>{var e=c(o(t));n=`resetTimer(${e}); ${n}`})),n}(n));for(const t of p.slice(0).reverse())l(t.exit||"")}if(l(n.effect||""),!n.isInternal){const a=d.map((n=>function(n){var a=n.entry||"";function l(){a&&(a+="\n")}if(n.region.states.some((t=>"shallowHistory"===t.kind))&&"shallowHistory"!==n.kind&&(l(),s=!0,a+=`_histories_['${e.stateFullName(n.region)}'] = '${n.name}';`),u(n).filter((t=>(t.trigger||"").match(e.afterRegex))).forEach((t=>{var e=o(t),n=c(e);l(),a+=`setTimer(${n}, "${e}");`})),"choice"===n.kind){l();let e=!0;for(const s of(0,r.MR)(n.outgoing,(t=>"else"===t.guard))){e?e=!1:a+=" else ","else"!==s.guard&&(a+=`if(${s.guard??!1}) `);const r="";let o="";if(s.guard){const e=n.incoming[0].trigger;if(e){var p;const n=(0,i.Le)(e),r=null===(p=t.operationByName)||void 0===p?void 0:p[n];var d;r&&(o=(null===(d=r.parameters)||void 0===d?void 0:d.map((t=>`params.${t.name}`)).join(","))??"",t.operationByName[_(s.guard)]={parameters:r.parameters})}}s.guard&&(a+=`{${r}${_(s.guard)}(${o});}`)}}return a}(n)));n.lastEffect&&a.splice(-1,0,n.lastEffect);for(const t of a)l(t)}return""==a?void 0:a}(n);return{region:f(n.region),name:n.name,source:f(n.source),target:f(n.target),trigger:h(n),ports:n.ports,guard:"choice"==n.source.kind?void 0:n.guard,effect:a}}var v={};a.states[e.stateFullName(t)]=v;var b=[t,...m(t,!0,!0)].flatMap((r=>{return a=t,((i=r).transitions||[]).flatMap((t=>{var r=d(t.target)?e.getInitial(t.target).outgoing[0].target:t.target;let s=t.effect;const o=d(t.target)?e.getInitial(t.target).outgoing[0].effect:void 0;if("initial"===t.source.kind){if(a&&i==a){let e=t.source;return[{region:a||i,name:g(t),source:e,target:r,trigger:t.trigger,ports:t.ports,guard:t.guard,effect:s,lastEffect:o}]}return[]}if(d(t.source))return m(t.source,!0).filter((t=>!t.kind)).map(((e,c)=>({region:a||i,name:`${g(t)}${n?"":`_${c}`}`,source:e,target:"shallowHistory"==r.kind&&r.region==e.region?e:r,trigger:t.trigger,ports:t.ports,guard:t.guard,effect:s,lastEffect:o})));{let e=t.source;return[{region:a||i,name:g(t),source:e,target:r,trigger:t.trigger,ports:t.ports,guard:t.guard,effect:s,lastEffect:o}]}}));var i,a}));v.name=t.name,v.type=t.type,v.isActor=t.isActor,v.isObserver=t.isObserver,v.class=t.class,v.states=m(t).map(f),v.transitions=v.states.flatMap((t=>t.outgoing)),v.operationByName={...t.operationByName},v.operations=Object.values(v.operationByName);for(const[t,e]of Object.entries(v.operationByName))e.name=t;return v.propertyByName={...t.propertyByName},s&&(v.propertyByName._histories_={defaultValue:{},type:"Map<String,String>"}),n||(v.stateByName=Object.fromEntries(v.states.map((t=>[t.name,t]))),v.transitionByName=Object.fromEntries(v.transitions.map((t=>[t.name,t])))),v}},625:(t,e,n)=>{"use strict";function r(t,e){return(t=t[0])<(e=e[0])?-1:t>e?1:0}function i(t){return Array.from(new Set(t))}function a(t){return t[t.length-1]}function s(t,e="    "){var n;const r=null===(n=t)||void 0===n?void 0:n.split("\n");if((null==r?void 0:r.length)>0){const e=r[""===r[0]&&r.length>1?1:0].replace(/[^ \t].*$/,""),n=new RegExp(`^${e}`);t=r.map((t=>t.replace(n,""))).join("\n")}const i=t&&t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n"+e).replace(/{/g,"<U+007B>").replace(/}/g,"<U+007D>").replace(/\\n/g,"\\l").replace(/__/g,"~__");return null==i?void 0:i.trimEnd()}function o(t,e){return t.map(((t,n)=>[t,e[n]]))}function c(t,e){var n,r,i,a=0;return(n=t.split(""),r=e.split(""),i=(t,e,n)=>t===e,o(n,r).map((([t,e],n)=>i(t,e)))).every((t=>t&&++a)),[t.slice(a),e.slice(a)]}function l(t,e){if(t)for(const[n,r]of Object.entries(t))e(n,r)}async function u(t,e){if(t)for(const[n,r]of Object.entries(t))await e(n,r)}async function p(t,e){for(const n of t)await e(n)}function _(t){return t&&t.length&&t.length>0}function d(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}function m(t,e){return t.reduce(((t,n)=>{const r=e(n);return{...t,[r]:(t[r]||[]).concat([n])}}),{})}function g(t,e){return t.sort(((t,n)=>{const r=e(t),i=e(n);return r<i?-1:r>i?1:0}))}async function f(t,e){const n=[];for(const r of t)n.push(await e(r));return n}function h(t){return t[0].toUpperCase()+t.slice(1)}n.d(e,{$Q:()=>c,$R:()=>o,Ic:()=>u,LI:()=>l,MR:()=>g,Mo:()=>p,Od:()=>d,Tw:()=>i,Xq:()=>_,Z$:()=>a,Z5:()=>h,hN:()=>r,sz:()=>f,uB:()=>s,vM:()=>m})},490:(t,e,n)=>{"use strict";n.d(e,{R3:()=>r});const r={async connect({url:t="ws://localhost:10015",onclose:e}={}){var n,r;if((null===(n=this.ws)||void 0===n?void 0:n.readyState)!==WebSocket.OPEN)return this.onclose=void 0,null===(r=this.ws)||void 0===r||r.close(),this.onclose=e,new Promise((async(e,n)=>{const r=new WebSocket(t);this.ws=r,r.onerror=t=>{this.onclose=void 0,n(t)};const i=[];r.onclose=()=>{var t;null===(t=this.onclose)||void 0===t||t.call(this)},r.onmessage=t=>{const{resolve:e}=i.shift();e(t.data)},r.onopen=()=>{this.close=()=>{r.close()},this.send=(t,e,n=0,i=0,a=0)=>{const s=`${t},${e},${n},${i},${a}`;r.send(s)},this.setLeftSpeed=t=>{this.send(2,1,0,t)},this.setRightSpeed=t=>{this.send(2,1,1,t)},this.setSpeed=t=>{this.send(2,1,2,t)},this.resetLeftEncoder=()=>{this.send(2,4,0)},this.resetRightEncoder=()=>{this.send(2,4,1)},this.getEvents=async()=>{const t=async function(){return new Promise(((t,e)=>{i.push({resolve:t,reject:e})}))}();return this.send(2,3),t},this.setLed=t=>{this.send(2,7,0,0,t)},this.setLedOff=()=>{this.setLed(0)},this.setLedRed=()=>{this.setLed(1)},this.setLedGreen=()=>{this.setLed(2)},this.setLedBlue=()=>{this.setLed(3)},this.resetWorld=()=>{r.send("ResetWorld")},e()}}))}}},209:(t,e,n)=>{"use strict";n.d(e,{DH:()=>y});var r=n(428),i=n(985),a=n(317),s=n(113),o=n(463);globalThis["./ContextualEval.cjs"],n(125);var c=n(850),l=n(625),u=n(730);const p=globalThis.NODE_FETCH;var _=n(886),d=(n(54),n(991));const m={raw:!0,forAnimation:!1,editing:!1,hideLinks:!1,showExplicitSM:!1,hideOuterSMBoxes:!1,showPorts:!1,hideClasses:!1,hideMethods:!1,hideStateMachines:!1,showEndNames:!1,hideOperations:!1,checkEvents:!1},g={getSlots:()=>[],isFireable:()=>!0,isActivable:()=>!0,getFireURI:()=>"",isCurrent:()=>!0,eventMatched:()=>!0};async function f(t,e,n){if(n.rawPlantUML){t=`${t}.puml`;const n=`@startuml\n${e}\n@enduml`;void 0!==n?(a.writeFileSync(t,n),console.log("Saved to",t)):console.log("Unchanged",t)}else await async function(t,e){const n=(0,i.K)("http://127.0.0.1:8082/plantuml/",e);console.log(n);{const e=await p(n),r=await e.text();r.match(/>An error has occured/)&&console.error("PlantUML error"),void 0!==r?(a.writeFileSync(t,r),console.log("Saved to",t)):console.log("Unchanged",t)}}(`${t}.svg`,e)}async function h(t,e,n){const i=(0,r.tC)(e,g,n);await f(t,i,n)}async function y(t){const e=await(0,_.u7)(t[2],t[3]||"model");console.log("Model static analysis results:"),(0,u.BJ)(e);const n=t[4]||"testDiagram",i=n,l=Object.fromEntries(t.slice(5).map((t=>t.split("="))).map((([t,e])=>[t,"true"===e||"false"!==e&&e.split(",").filter((t=>t))])));if(l.rejectedObjects??(l.rejectedObjects=[]),l.listActive){console.log("ACTIVE_OBJECTS:");for(const t of e.objects.filter((t=>e.isActive(t))))console.log(t.name);console.log("END")}if(l.listInteractions){console.log("INTERACTIONS:");for(const t of Object.keys(e.interactions??{}))console.log(t);console.log("END")}if(l.listClasses){console.log("CLASSES:");for(const[t,n]of Object.entries(e.classes??{}))n.literals||n.ends||console.log(t);console.log("END")}if(l.listEnumerations){console.log("ENUMERATIONS:");for(const[t,n]of Object.entries(e.classes??{}))n.literals&&console.log(t);console.log("END")}if(l.listActive||l.listInteractions)return;const p={operationCommentLocation:!1,propertyCommentLocation:!1};if(await h(i,e,{...m,...l}),await h(`${i}-context`,e,{...m,...l,hideStateMachines:!0,displayedObjects:e.objects.filter((t=>!l.rejectedObjects.includes(t.name))),hideMethods:!0,...p}),await h(`${i}-class`,e,{...m,...l,hideStateMachines:!0,classDiagram:!0,...p}),await h(`${i}-classes`,e,{...m,...l,hideStateMachines:!0,classDiagram:!0,showDataTypes:!1,...p}),await h(`${i}-datatypes`,e,{...m,...l,hideStateMachines:!0,classDiagram:!0,showNonDataTypes:!1,...p}),e.classes){a.writeFileSync(`${i}-macros.tex`,function(t){const e=[];e.push("\\makeatletter");for(const[n,r]of Object.entries(t.classes))if(r.literals)e.push(d.W`
				\\@namedef{enum${n}LiteralList\\macroSuffix}{${r.literals.map((t=>t.name)).join(", ")}}
			`),e.push(d.W`
				\\@namedef{enum${n}LiteralDescriptions\\macroSuffix}{
					\\begin{itemize}
						${r.literals.map((t=>d.W`
							\\item	{\\bf ${t.name}}
								${t.comments?` --- ${t.comments.join("\n")}`:""}
						`))}
					\\end{itemize}
				}
			`);else if(!r.ends){const t=Object.entries(r.propertyByName||{});e.push(d.W`
				\\@namedef{class${n}Properties\\macroSuffix}{
					${t.length?d.W`
						\\begin{itemize}
							${t.map((([t,e])=>d.W`
								\\item	{\\bf ${t}${e.type?` : ${e.type}${(0,c.BV)(e)}`:""}}
									${e.comments?` --- ${e.comments.join("\n")}`:""}
							`)).join("\n")}
						\\end{itemize}
					`:d.W`
						\\begin{quote}
							N.A.
						\\end{quote}`}
				}
			`);const i=Object.entries(r.operationByName||{});e.push(d.W`
				\\@namedef{class${n}Operations\\macroSuffix}{
					${i.length?d.W`
						\\begin{itemize}
							${i.map((([t,e])=>d.W`
								\\item	{\\bf ${v(e)}}
								${e.comments?` --- ${e.comments.join("\n")}`:""}
							`)).join("\n")}
						\\end{itemize}
					`:d.W`
						\\begin{quote}
							N.A.
						\\end{quote}`}
				}
			`)}return e.push("\\makeatother"),e.join("\n").replace(/_/g,"\\_")}(e));for(const[t,n]of Object.entries(e.classes))n.literals||n.ends||await h(`${i}-class-${t}`,e,{...m,...l,hideStateMachines:!0,classDiagram:!0,showDataTypes:!1,displayedClasses:[n],...p})}for(const t of l.genActivitiesFor??[]){var g;const[n,a,s]=t.split("."),o="class"===n?e.classes[a]:e.getObject(a),c=null==o||null===(g=o.operationByName)||void 0===g?void 0:g[s];if(c){const e=`\n\t\t\t\tgroup ${v(c)}\n\t\t\t\t${(0,r.hy)(c)}\n\t\t\t\tend group\n\t\t\t`;await f(`${i}-activity-${t}`,e,l)}else console.log(`Error: operation ${t} not found.`)}await async function(t=""){for(const i of e.objects.filter((t=>e.isActive(t)))){console.log("Processing",i.name);const a=`${n}${t}-${i.name}`;await h(a,e,{displayedObjects:[i],...m,...l}),await h(`${a}-SM`,e,{...m,displayedObjects:[i],hideClasses:!0,...l,hideOuterSMBoxes:!0});for(const t of(null===(r=l.foldedStateFQNs)||void 0===r?void 0:r.filter((t=>t.startsWith(i.name+"."))))||[]){var r;await h(`${a}-${t}-SM`,e,{...m,displayedObjects:[i],hideClasses:!0,...l,onlyStateFQN:t,hideOuterSMBoxes:!1})}}}(),Object.entries(e.interactions||{}).forEach((([t,n],r)=>{n.isDummy||(console.log("Processing",t),console.group(),function(t,e,n){!function(t,e){void 0!==e?(a.writeFileSync(t,e,"utf8",(t=>{t&&console.log(t)})),console.log("Saved to",t)):console.log("Unchanged",t)}(n,function(t,e,n=!0,r){const i=(0,s.o)(t,e,{});return n?(0,o.E)(i,void 0,r):i}(t,e,!0,{inlineStyles:!0,removeDominantBaseline:!0}))}(n,e,`${i}-sequence-${t.replace(/ /g,"_")}.svg`),console.groupEnd())}))}function v(t){const e=`${t.name}(${(t.parameters||[]).map((t=>"string"==typeof t?t:`${t.name??""}${t.type?` : ${t.type}${(0,c.BV)(t)}`:""}`)).join(", ")})${t.returnType?` : ${t.returnType}${(0,c.BV)(t)}`:""}${(0,l.Xq)(t.stereotypes)?" "+t.stereotypes.map((t=>`<<${t}>>`)).join(""):""}`;return t.isStatic?`\\underline{${e}}`:e}},686:(t,e,n)=>{"use strict";n.d(e,{x:()=>r});class r{constructor(t){this.n=t,this.buffer=[],this.start=0,this.end=0,this.size=0}get contents(){return this.size===this.n&&this.end!==this.n?[...this.buffer.slice(this.start),...this.buffer.slice(0,this.end)]:this.buffer.slice(this.start,this.end)}push(t){this.end===this.n&&(this.end=0),this.buffer[this.end]=t,this.end++,this.size===this.n?(this.start++,this.start===this.n&&(this.start=0)):this.size++}debug(){return{n:this.n,buffer:this.buffer,start:this.start,end:this.end,size:this.size,contents:this.contents}}}},282:(t,e,n)=>{"use strict";function r(t,e,n,r){this.m_capacity=t,this.m_hashFunction=t=>Math.abs(e(t)),this.m_equalsFunction=n,this.m_maxLoadFactor=.667,this.m_growthFactor=2,this.m_items=new Array(t),this.m_size=0,this.m_isMap=r}n.r(e),n.d(e,{bfs_hashset_predicate_mc_full:()=>u,bfs_hashset_predicate_mc_simple:()=>p,dfs_hashset_predicate_mc_full:()=>_});const i={size(){return this.m_size},toString(){let t="capacity="+this.m_capacity+", size="+this.m_size+" items=[";for(let e=0;e<this.m_capacity;e++)0!=e&&(t+=", "),t+=JSON.stringify(this.m_items[e]);return t+="]",t},add(t,e=null){this.m_size>=this.m_capacity*this.m_maxLoadFactor&&this.grow();let n=this.m_hashFunction(t)%this.m_capacity;if(null==this.m_items[n])return this.m_items[n]=this.m_isMap?{key:t,value:e}:t,this.m_size++,!this.m_isMap||null;let r=this.m_items[n];if(this.m_equalsFunction(t,this.m_isMap?r.key:r)){if(!this.m_isMap)return!1;let t=r.value;return r.value=e,t}let i=n;do{n=(n+1)%this.m_capacity}while(null!=this.m_items[n]&&!this.m_equalsFunction(t,this.m_isMap?this.m_items[n].key:this.m_items[n])&&n!=i);if(n==i)throw new Error("The hashset is full");if(null==this.m_items[n])return this.m_items[n]=this.m_isMap?{key:t,value:e}:t,this.m_size++,!this.m_isMap||null;if(!this.m_isMap)return!1;let a=this.m_items[n].value;return this.m_items[n].value=e,a},contains(t){let e=this.m_hashFunction(t)%this.m_capacity;if(null==this.m_items[e])return!1;let n=this.m_items[e];if(this.m_equalsFunction(t,this.m_isMap?n.key:n))return!0;let r=e;do{e=(e+1)%this.m_capacity}while(null!=this.m_items[e]&&!this.m_equalsFunction(t,this.m_isMap?this.m_items[e].key:this.m_items[e])&&e!=r);return e!=r&&null!=this.m_items[e]},get(t){let e=this.m_hashFunction(t)%this.m_capacity;if(null==this.m_items[e])return null;let n=this.m_items[e];if(this.m_equalsFunction(t,this.m_isMap?n.key:n))return this.m_isMap?n.value:n;let r=e;do{e=(e+1)%this.m_capacity}while(null!=this.m_items[e]&&!this.m_equalsFunction(t,this.m_isMap?this.m_items[e].key:this.m_items[e])&&e!=r);return e==r||null==this.m_items[e]?null:this.m_isMap?this.m_items[e].value:this.m_items[e]},grow(){let t=this.m_capacity*this.m_growthFactor,e=new Array(t);for(let t=0;t<this.m_capacity;t++){let n=this.m_items[t];null!=n&&this.internalAddRehash(e,n,this.m_hashFunction(this.m_isMap?n.key:n))}this.m_capacity=t,this.m_items=e},internalAddRehash(t,e,n){let r=t.length,i=n%r;if(null==t[i])return void(t[i]=e);let a=i;do{i=(i+1)%r}while(null!=t[i]&&i!=a);if(i==a)throw new Error("The hashset is full");null==t[i]&&(t[i]=e)}};function a(t){this.m_growthFactor=2,this.m_read_idx=0,this.m_write_idx=0,this.m_barrier_idx=0,this.m_items=new Array(t),this.m_size=0}i.addIfAbsent=i.add,r.prototype=i,r.prototype.constructor=r;const s={size(){return this.m_size},capacity(){return this.m_items.length},isEmpty(){return 0==this.m_size},isFull(){return this.m_size==this.capacity()},enqueue:function(t){this.growIfFull(),this.m_items[this.m_write_idx]=t,this.m_write_idx=(this.m_write_idx+1)%this.capacity(),this.m_size++},dequeue:function(){if(this.isEmpty())return null;let t=this.m_items[this.m_read_idx];return this.m_read_idx=(this.m_read_idx+1)%this.capacity(),this.m_size--,t},markLayer(){this.m_barrier_idx=this.m_write_idx},layerChanged(){return this.m_read_idx==this.m_barrier_idx},growIfFull:function(){if(this.m_size<this.m_items.length)return;let t=this.capacity();if(this.m_items.length=t*this.m_growthFactor,this.m_write_idx<=this.m_read_idx)if(0==this.m_write_idx)this.m_write_idx=t;else if(this.m_write_idx<=t-this.m_read_idx)this.m_items.copyWithin(t,0,this.m_write_idx),this.m_barrier_idx<this.m_write_idx&&(this.m_barrier_idx=t+this.m_barrier_idx),this.m_write_idx=t+this.m_write_idx;else{let e=this.m_items.length-(t-this.m_read_idx);this.m_items.copyWithin(e,this.m_read_idx,t),this.m_barrier_idx>=this.m_read_idx&&(this.m_barrier_idx=e+(this.m_barrier_idx-this.m_read_idx)),this.m_read_idx=e}},toString:function(){let t="capacity="+this.capacity()+", size="+this.m_size+", isEmpty= "+this.isEmpty()+", isFull= "+this.isFull()+", ridx="+this.m_read_idx+", widx="+this.m_write_idx+", bidx="+this.m_barrier_idx+" items=[";for(let e=0;e<this.capacity();e++)0!=e&&(t+=", "),t+=JSON.stringify(this.m_items[e]);return t+="]",t}};function o(t,e){this.m_growthFactor=e,this.m_top=-1,this.m_items=new Array(t)}a.prototype=s,a.prototype.constructor=a;const c={size(){return this.m_top+1},capacity(){return this.m_items.length},isEmpty(){return-1==this.m_top},isFull(){return this.m_top+1==this.capacity()},push(t){this.growIfFull(),this.m_items[++this.m_top]=t},pop(){return this.isEmpty()?null:this.m_items[this.m_top--]},peek(){return this.isEmpty()?null:this.m_items[this.m_top]},growIfFull(){this.m_top+1<this.m_items.length||(this.m_items.length=this.m_items.length*this.m_growthFactor)},toString:function(){let t="  capacity="+this.capacity()+", size="+this.size()+", isEmpty= "+this.isEmpty()+", isFull= "+this.isFull()+", top="+this.m_top+", items=[";for(let e=0;e<this.capacity();e++)0!=e&&(t+=", "),t+=JSON.stringify(this.m_items[e]);return t+="]",t},map(t){let e=[];for(let n=0;n<this.size();n++)e.push(t(this.m_items[n]));return e}};async function l(t,e=(t=>t),n,r,i,a){let s=await t.initial(),o={holds:!0,witness:null,configuration_count:0,parents:a},{holds:c,witness:l,configuration_count:u,parents:p}=await async function(e,n,i,a,s,o,c,l,u){let p=!0;for(;!u.isEmpty()||p;){let n=null,s=null;p?(s=e,p=!1):(n=u.dequeue(),s=await(d=n,t.next(d)));for(let t of s){let e=await i(t);if(await(_=e,r.add(_))){if(u.enqueue(t),await a(n,t,0,c))return c}else if(await!1)return c}if(await!1)return c}var _,d;return c}(s,0,e,(async function(t,e,r,i){return i.holds=await n(e),i.witness=i.holds?e:null,i.configuration_count++,i.parents.contains(e)||i.parents.add(e,t),i.holds}),0,0,o,0,i);if(c){let t=function(t,e){let n=[],r=t;for(;null!=r;)n.push(r),r=e.get(r);return n.reverse()}(l,p);return{verified:!1,trace:t,configuration_count:u}}return{verified:!0,trace:[],configuration_count:u}}async function u(t,e,n,i,s){return l(t,e,n,new r(1024,i,s,!1),new a(1024),new r(1024,i,s,!0))}async function p(t,e){let n=e=>t.configurationHashFn(e),i=(e,n)=>t.configurationEqFn(e,n),s=new r(1024,n,i,!1),o=new a(1024),c=new r(1024,n,i,!0);return l(t,(t=>t),e,s,o,c)}async function _(t,e,n,i,a){return async function(t,e=(t=>t),n,r,i){let a=await t.initial(),{holds:s,witness:o,configuration_count:c,trace:l}=await async function(e,n,i,a,s,o,c,l,u){for(u.push({configuration:null,neighbours:e,index:0});!u.isEmpty();){const e=u.peek();if(e.index<e.neighbours.length){const n=e.neighbours[e.index++],s=await i(n);if(await(_=s,r.add(_))){if(u.push({configuration:n,neighbours:await(p=n,t.next(p)),index:0}),await a(e.configuration,n,0,c))return c;continue}if(await(e.configuration,!1))return c}else if(u.pop(),null!=e.configuration&&await(e.configuration,!1))return c}var p,_;return c}(a,0,e,(async function(t,e,r,a){return await n(e)?(a.holds=!1,a.witness=e,a.trace=i.map((t=>t.configuration)).slice(1),!0):(a.configuration_count++,!1)}),0,0,{holds:!0,witness:null,configuration_count:0,trace:[]},0,i);return{verified:s,trace:l,configuration_count:c}}(t,e,n,new r(1024,i,a,!1),new o(1024,2))}o.prototype=c,o.prototype.constructor=o},453:(t,e,n)=>{"use strict";n.r(e),n.d(e,{STR2TR:()=>r});class r{constructor(t){this.operand=t}initial(){return this.operand.initial()}async next(t){let e=[],n=await this.operand.actions(t);for(let r of n){let n=await this.operand.execute(r,t);e.push(...n)}return e}isAccepting(t){return this.operand.isAccepting(t)}configurationHashFn(t){return this.operand.configurationHashFn(t)}configurationEqFn(t,e){return this.operand.configurationEqFn(t,e)}}},86:(t,e,n)=>{"use strict";n.r(e),n.d(e,{STUTTERING:()=>a,StateSynchronousProductSemantics:()=>r,StepSynchronousProductSemantics:()=>s});class r{constructor(t,e){this.lhs=t,this.rhs=e}configurationHashFn(t){let{lc:e,rc:n}=t,r=this.lhs.configurationHashFn(e);return r^=this.rhs.configurationHashFn(n)+2654435769+(r<<6)+(r>>2),r}configurationEqFn(t,e){let{lc:n,rc:r}=t,{lc:i,rc:a}=e;return this.lhs.configurationEqFn(n,i)&&this.rhs.configurationEqFn(r,a)}async initial(){return await this.rhs.initial().map((t=>({lc:null,rc:t})))}async actions(t){let{lc:e,rc:n}=t,r=[];if(null==e){for(let t of await this.lhs.initial())await i(this.rhs,t,n,r);return r}let a=await this.lhs.actions(e),s=a.length;for(let t of a){let a=await this.lhs.execute(t,e);if(0!=a.length)for(let t of a)await i(this.rhs,t,n,r);else s-=1}return 0==s&&await i(this.rhs,e,n,r),r}async execute(t,e){let{lo:n,ra:r}=t,{lc:i,rc:a}=e;return(await this.rhs.execute(r,n,a)).map((t=>({lc:n,rc:t})))}async isAccepting(t){let{lc:e,rc:n}=t;return await this.lhs.isAccepting(e)&&await this.rhs.isAccepting(n)}}async function i(t,e,n,r){let i=(await t.actions(e,n)).map((t=>({lo:e,ra:t})));r.push(...i)}const a={};class s{constructor(t,e){this.lhs=t,this.rhs=e}configurationHashFn(t){let{lc:e,rc:n}=t,r=this.lhs.configurationHashFn(e);return r^=this.rhs.configurationHashFn(n)+2654435769+(r<<6)+(r>>2),r}configurationEqFn(t,e){let{lc:n,rc:r}=t,{lc:i,rc:a}=e;return this.lhs.configurationEqFn(n,i)&&this.rhs.configurationEqFn(r,a)}async initial(){let t=[];for(let e of await this.lhs.initial())for(let n of await this.rhs.initial())t.push({lc:e,rc:n});return t}async actions(t){let{lc:e,rc:n}=t,r=[],s=await this.lhs.actions(e),o=s.length;for(let t of s){let a=await this.lhs.execute(t,e);if(0!=a.length)for(let s of a){let a={s:e,a:t,t:s};await i(this.rhs,a,n,r)}else o-=1}if(0==o){let t={s:e,a,t:e};await i(this.rhs,t,n,r)}return r}async execute(t,e){let{lo:n,ra:r}=t,{lc:i,rc:a}=e,{s,a:o,t:c}=n;return(await this.rhs.execute(r,n,a)).map((t=>({lc:c,rc:t})))}async isAccepting(t){let{lc:e,rc:n}=t;return await this.lhs.isAccepting(e)&&await this.rhs.isAccepting(n)}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__(666);var __webpack_exports__=__webpack_require__(599);globalThis.AnimUMLUtils=__webpack_exports__})();